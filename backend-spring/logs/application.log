2025-11-30 09:29:25.332 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-30 09:29:25.354 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-30 09:29:25.378 [SpringApplicationShutdownHook] INFO  e.tfg.votacion.service.FabricService - Closing Fabric Gateway connection
2025-11-30 09:29:25.382 [SpringApplicationShutdownHook] INFO  e.t.votacion.service.StorageService - Shutting down Storage Service
2025-11-30 09:29:25.383 [SpringApplicationShutdownHook] DEBUG e.t.votacion.service.StorageService - Master key cleared from memory
2025-11-30 09:45:54.054 [main] INFO  es.tfg.votacion.Application - Starting Application using Java 21.0.9 with PID 1202059 (/home/ehuetadr/TFG/VotacionBC/backend-spring/target/classes started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-30 09:45:54.056 [main] DEBUG es.tfg.votacion.Application - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-30 09:45:54.057 [main] INFO  es.tfg.votacion.Application - No active profile set, falling back to 1 default profile: "default"
2025-11-30 09:45:55.155 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-30 09:45:55.168 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-30 09:45:55.168 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-30 09:45:55.221 [main] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring embedded WebApplicationContext
2025-11-30 09:45:55.222 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1101 ms
2025-11-30 09:45:55.273 [main] INFO  es.tfg.votacion.service.AuthService - Initializing Authentication Service (Mock Mode)
2025-11-30 09:45:55.274 [main] DEBUG es.tfg.votacion.service.AuthService - Loading mock users from: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-30 09:45:55.291 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: juan.perez (role: Votante (voter), active: true)
2025-11-30 09:45:55.291 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: maria.gonzalez (role: Votante (voter), active: true)
2025-11-30 09:45:55.292 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: admin (role: Administrador (admin), active: true)
2025-11-30 09:45:55.292 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: auditor (role: Auditor (auditor), active: true)
2025-11-30 09:45:55.293 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: carlos.martin (role: Votante (voter), active: true)
2025-11-30 09:45:55.293 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: ana.rodriguez (role: Votante (voter), active: true)
2025-11-30 09:45:55.293 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: pedro.lopez (role: Administrador (admin), active: true)
2025-11-30 09:45:55.294 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: lucia.garcia (role: Votante (voter), active: false)
2025-11-30 09:45:55.294 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: test.user (role: Votante (voter), active: true)
2025-11-30 09:45:55.294 [main] INFO  es.tfg.votacion.service.AuthService - Loaded 9 mock users from /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-30 09:45:55.298 [main] DEBUG es.tfg.votacion.service.AuthService - JWT signing key initialized with HS256 algorithm
2025-11-30 09:45:55.298 [main] INFO  es.tfg.votacion.service.AuthService - JWT signing key initialized successfully
2025-11-30 09:45:55.298 [main] DEBUG es.tfg.votacion.service.AuthService - JWT issuer: votacion-blockchain-poc
2025-11-30 09:45:55.298 [main] DEBUG es.tfg.votacion.service.AuthService - JWT audience: voting-system
2025-11-30 09:45:55.298 [main] DEBUG es.tfg.votacion.service.AuthService - JWT expiration: 3600 seconds
2025-11-30 09:45:55.298 [main] DEBUG es.tfg.votacion.service.AuthService - Allowed roles: [voter, admin, auditor]
2025-11-30 09:45:55.298 [main] WARN  es.tfg.votacion.service.AuthService - Running in MOCK authentication mode - not suitable for production!
2025-11-30 09:45:55.343 [main] DEBUG e.t.v.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-30 09:45:55.392 [main] INFO  e.t.votacion.service.StorageService - Initializing Storage Service with AES-GCM encryption
2025-11-30 09:45:55.392 [main] DEBUG e.t.votacion.service.StorageService - Loading encryption key from keystore: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/keystore/keystore.json
2025-11-30 09:45:55.397 [main] DEBUG e.t.votacion.service.StorageService - Keystore loaded - algorithm: AES/GCM/NoPadding, key length: 256 bits
2025-11-30 09:45:55.398 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded and validated successfully
2025-11-30 09:45:55.398 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded successfully from keystore
2025-11-30 09:45:55.398 [main] INFO  e.t.votacion.service.StorageService - Storage directory initialized: /home/ehuetadr/TFG/VotacionBC/backend-spring/data/storage
2025-11-30 09:45:55.398 [main] DEBUG e.t.votacion.service.StorageService - Encryption algorithm: AES/GCM/NoPadding
2025-11-30 09:45:55.398 [main] DEBUG e.t.votacion.service.StorageService - Key length: 256 bits
2025-11-30 09:45:55.398 [main] DEBUG e.t.votacion.service.StorageService - IV length: 12 bytes
2025-11-30 09:45:55.399 [main] DEBUG e.t.votacion.service.StorageService - Tag length: 128 bits
2025-11-30 09:45:55.399 [main] INFO  e.t.votacion.service.StorageService - Automatic cleanup enabled - retention: 30 days
2025-11-30 09:45:55.413 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-30 09:45:55.414 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-30 09:45:55.415 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /home/ehuetadr/TFG/VotacionBC/fabric/test-network/organizations/peerOrganizations/org1.example.com/connection-org1.json
2025-11-30 09:45:55.415 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /home/ehuetadr/TFG/VotacionBC/backend-spring/wallet
2025-11-30 09:45:55.415 [main] DEBUG e.tfg.votacion.service.FabricService - User: appUser
2025-11-30 09:45:55.415 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: electionchannel
2025-11-30 09:45:55.416 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: electioncc
2025-11-30 09:45:56.195 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Fabric network
2025-11-30 09:45:56.195 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-30 09:45:56.197 [main] INFO  e.t.votacion.service.ElectionService - Initializing ElectionService
2025-11-30 09:45:56.309 [main] INFO  e.t.votacion.service.ElectionService - Loaded 3 elections from disk
2025-11-30 09:45:56.703 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 7f64309b-729b-47cb-8539-cc07604a2815

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-30 09:45:56.709 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-30 09:45:56.745 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring Spring Security with JWT authentication
2025-11-30 09:45:56.746 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-30 09:45:56.774 [main] INFO  e.tfg.votacion.config.SecurityConfig - Spring Security configured successfully
2025-11-30 09:45:57.080 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-11-30 09:45:57.087 [main] INFO  es.tfg.votacion.Application - Started Application in 3.617 seconds (process running for 3.879)
2025-11-30 09:58:26.573 [tomcat-handler-1] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-30 09:58:26.573 [tomcat-handler-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-30 09:58:26.576 [tomcat-handler-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-11-30 09:58:26.784 [tomcat-handler-2] INFO  e.t.v.controller.AuthController - Login attempt for user: admin from IP: 0:0:0:0:0:0:0:1
2025-11-30 09:58:26.784 [tomcat-handler-2] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: admin
2025-11-30 09:58:26.901 [tomcat-handler-2] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: admin (role: Administrador (admin))
2025-11-30 09:58:26.902 [tomcat-handler-2] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: admin
2025-11-30 09:58:27.022 [tomcat-handler-2] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: admin (expires: Sun Nov 30 10:58:26 CET 2025)
2025-11-30 09:58:27.024 [tomcat-handler-2] INFO  e.t.v.controller.AuthController - User authenticated successfully: admin (role: Administrador)
2025-11-30 10:01:09.797 [tomcat-handler-5] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:01:09.842 [tomcat-handler-5] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:01:09.843 [tomcat-handler-5] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 10:01:09.916 [tomcat-handler-5] INFO  e.t.v.controller.ElectionController - Creating new election: Prueba 20251130
2025-11-30 10:01:09.916 [tomcat-handler-5] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:01:09.917 [tomcat-handler-5] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:01:09.918 [tomcat-handler-5] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-11-30 10:01:09.918 [tomcat-handler-5] INFO  e.t.votacion.service.ElectionService - Election created: election-f9e4da2a
2025-11-30 10:01:09.928 [tomcat-handler-5] INFO  e.t.votacion.service.ElectionService - Data saved to disk
2025-11-30 10:01:09.959 [tomcat-handler-6] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:01:09.961 [tomcat-handler-6] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:01:09.962 [tomcat-handler-6] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 10:01:09.964 [tomcat-handler-6] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:01:09.965 [tomcat-handler-6] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:01:09.967 [tomcat-handler-6] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:01:09.970 [tomcat-handler-6] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 10:01:19.643 [tomcat-handler-7] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:01:19.645 [tomcat-handler-7] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:01:19.645 [tomcat-handler-7] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 10:01:19.647 [tomcat-handler-7] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:01:19.647 [tomcat-handler-7] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:01:19.659 [tomcat-handler-7] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:01:19.659 [tomcat-handler-7] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 10:01:29.176 [tomcat-handler-9] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:01:29.178 [tomcat-handler-9] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:01:29.178 [tomcat-handler-9] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 10:01:29.181 [tomcat-handler-9] INFO  e.t.v.controller.ElectionController - Fetching election: election-001
2025-11-30 10:01:29.183 [tomcat-handler-9] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:01:29.187 [tomcat-handler-9] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:01:39.049 [tomcat-handler-10] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:01:39.050 [tomcat-handler-10] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:01:39.051 [tomcat-handler-10] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 10:01:39.052 [tomcat-handler-10] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:01:39.052 [tomcat-handler-10] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:01:39.054 [tomcat-handler-10] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:01:39.054 [tomcat-handler-10] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 10:01:46.161 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:01:46.163 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:01:46.163 [tomcat-handler-12] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 10:01:46.165 [tomcat-handler-12] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 10:01:46.166 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:01:46.168 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:01:56.858 [tomcat-handler-14] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:01:56.860 [tomcat-handler-14] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:01:56.860 [tomcat-handler-14] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 10:01:56.861 [tomcat-handler-14] ERROR e.t.v.config.JwtAccessDeniedHandler - Access denied to: /api/v1/elections/election-f9e4da2a/vote - Access Denied
2025-11-30 10:02:02.974 [tomcat-handler-15] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:02:02.976 [tomcat-handler-15] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:02:02.976 [tomcat-handler-15] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 10:02:02.978 [tomcat-handler-15] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:02:02.978 [tomcat-handler-15] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:02:02.980 [tomcat-handler-15] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:02:02.981 [tomcat-handler-15] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 10:02:07.506 [tomcat-handler-16] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:02:07.508 [tomcat-handler-16] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:02:07.509 [tomcat-handler-16] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 10:02:07.510 [tomcat-handler-16] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 10:02:07.511 [tomcat-handler-16] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:02:07.512 [tomcat-handler-16] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:02:10.516 [tomcat-handler-17] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:02:10.517 [tomcat-handler-17] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:02:10.518 [tomcat-handler-17] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 10:02:10.519 [tomcat-handler-17] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:02:10.519 [tomcat-handler-17] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:02:10.521 [tomcat-handler-17] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:02:10.521 [tomcat-handler-17] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 10:02:11.470 [tomcat-handler-18] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:02:11.472 [tomcat-handler-18] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:02:11.472 [tomcat-handler-18] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 10:02:11.473 [tomcat-handler-18] INFO  e.t.v.controller.ElectionController - Fetching election: election-001
2025-11-30 10:02:11.474 [tomcat-handler-18] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:02:11.475 [tomcat-handler-18] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:02:12.321 [tomcat-handler-19] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:02:12.323 [tomcat-handler-19] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:02:12.323 [tomcat-handler-19] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 10:02:12.325 [tomcat-handler-19] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:02:12.325 [tomcat-handler-19] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:02:12.327 [tomcat-handler-19] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:02:12.328 [tomcat-handler-19] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 10:02:14.604 [tomcat-handler-21] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:02:14.605 [tomcat-handler-21] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:02:14.605 [tomcat-handler-21] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 10:02:14.607 [tomcat-handler-21] INFO  e.t.v.controller.AuthController - User logged out: admin from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:02:20.623 [tomcat-handler-22] INFO  e.t.v.controller.AuthController - Login attempt for user: juan.perez from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:02:20.623 [tomcat-handler-22] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: juan.perez
2025-11-30 10:02:20.722 [tomcat-handler-22] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: juan.perez (role: Votante (voter))
2025-11-30 10:02:20.723 [tomcat-handler-22] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: juan.perez
2025-11-30 10:02:20.723 [tomcat-handler-22] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: juan.perez (expires: Sun Nov 30 11:02:20 CET 2025)
2025-11-30 10:02:20.724 [tomcat-handler-22] INFO  e.t.v.controller.AuthController - User authenticated successfully: juan.perez (role: Votante)
2025-11-30 10:02:20.761 [tomcat-handler-23] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:02:20.762 [tomcat-handler-23] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:02:20.762 [tomcat-handler-23] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:02:20.765 [tomcat-handler-23] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:02:20.765 [tomcat-handler-23] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:02:20.767 [tomcat-handler-23] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:02:20.767 [tomcat-handler-23] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 10:02:31.336 [tomcat-handler-24] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:02:31.337 [tomcat-handler-24] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:02:31.338 [tomcat-handler-24] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:02:31.339 [tomcat-handler-24] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 10:02:31.339 [tomcat-handler-24] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:02:31.340 [tomcat-handler-24] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:02:36.173 [tomcat-handler-25] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:02:36.174 [tomcat-handler-25] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:02:36.175 [tomcat-handler-25] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:02:36.183 [tomcat-handler-25] INFO  e.t.v.controller.ElectionController - Vote submission for election: election-f9e4da2a
2025-11-30 10:02:36.184 [tomcat-handler-25] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:02:36.187 [tomcat-handler-25] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:02:36.191 [tomcat-handler-25] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: election-f9e4da2a (142 bytes)
2025-11-30 10:02:36.191 [tomcat-handler-25] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 142 bytes
2025-11-30 10:02:36.193 [tomcat-handler-25] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 170 bytes (IV: 12, encrypted: 158)
2025-11-30 10:02:36.193 [tomcat-handler-25] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 170 bytes
2025-11-30 10:02:36.195 [tomcat-handler-25] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-election-f9e4da2a-1764493356191-eae01176.enc
2025-11-30 10:02:36.196 [tomcat-handler-25] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 9943ec7c76a1eb8a2c894765c915ee3dd8418de17e2d32a8bd9d3370146de3e2
2025-11-30 10:02:36.196 [tomcat-handler-25] INFO  e.t.v.controller.ElectionController - Vote encrypted and stored: blobId=BLOB-election-f9e4da2a-1764493356191-eae01176
2025-11-30 10:02:36.196 [tomcat-handler-25] INFO  e.tfg.votacion.service.FabricService - Emitting vote commitment to blockchain - Election: election-f9e4da2a, Commitment: mdcDmlnVzjCmX9Rn0y1WLD7Bcw233K0dINh2cVyquS0=
2025-11-30 10:02:37.600 [tomcat-handler-25] ERROR e.tfg.votacion.service.FabricService - Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-11-30 10:02:37.600 [tomcat-handler-25] WARN  e.tfg.votacion.service.FabricService - Attempt 1/3 for emitVote failed, retrying in 1000ms: Failed to submit vote transaction
2025-11-30 10:02:38.628 [tomcat-handler-25] ERROR e.tfg.votacion.service.FabricService - Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-11-30 10:02:38.628 [tomcat-handler-25] WARN  e.tfg.votacion.service.FabricService - Attempt 2/3 for emitVote failed, retrying in 2000ms: Failed to submit vote transaction
2025-11-30 10:02:40.649 [tomcat-handler-25] ERROR e.tfg.votacion.service.FabricService - Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-11-30 10:02:40.650 [tomcat-handler-25] ERROR e.tfg.votacion.service.FabricService - Operation emitVote failed after 3 attempts: Failed to submit vote transaction
2025-11-30 10:02:40.650 [tomcat-handler-25] ERROR e.t.v.controller.ElectionController - Error submitting vote
java.lang.RuntimeException: Operation failed after retries
	at es.tfg.votacion.service.FabricService.executeWithRetry(FabricService.java:413)
	at es.tfg.votacion.service.FabricService.emitVote(FabricService.java:177)
	at es.tfg.votacion.controller.ElectionController.emitVote(ElectionController.java:351)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at es.tfg.votacion.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:329)
Caused by: java.lang.RuntimeException: Failed to submit vote transaction
	at es.tfg.votacion.service.FabricService.lambda$emitVote$5(FabricService.java:189)
	at es.tfg.votacion.service.FabricService.executeWithRetry(FabricService.java:399)
	... 106 common frames omitted
Caused by: org.hyperledger.fabric.client.EndorseException: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
	at org.hyperledger.fabric.client.GatewayClient.endorse(GatewayClient.java:73)
	at org.hyperledger.fabric.client.ProposalImpl.endorse(ProposalImpl.java:74)
	at org.hyperledger.fabric.client.Proposal.endorse(Proposal.java:65)
	at org.hyperledger.fabric.client.ContractImpl.submitTransaction(ContractImpl.java:47)
	at es.tfg.votacion.service.FabricService.lambda$emitVote$5(FabricService.java:179)
	... 107 common frames omitted
Caused by: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
	at io.grpc.stub.ClientCalls.toStatusRuntimeException(ClientCalls.java:268)
	at io.grpc.stub.ClientCalls.getUnchecked(ClientCalls.java:249)
	at io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:167)
	at org.hyperledger.fabric.protos.gateway.GatewayGrpc$GatewayBlockingStub.endorse(GatewayGrpc.java:455)
	at org.hyperledger.fabric.client.GatewayClient.endorse(GatewayClient.java:71)
	... 111 common frames omitted
2025-11-30 10:03:43.995 [tomcat-handler-26] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:03:43.997 [tomcat-handler-26] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:03:43.998 [tomcat-handler-26] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:03:44.003 [tomcat-handler-26] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:03:44.007 [tomcat-handler-26] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:03:44.009 [tomcat-handler-26] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:03:44.012 [tomcat-handler-26] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 10:03:46.658 [tomcat-handler-27] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:03:46.659 [tomcat-handler-27] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:03:46.659 [tomcat-handler-27] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:03:46.661 [tomcat-handler-27] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 10:03:46.661 [tomcat-handler-27] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:03:46.663 [tomcat-handler-27] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:03:47.315 [tomcat-handler-28] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:03:47.317 [tomcat-handler-28] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:03:47.317 [tomcat-handler-28] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:03:47.319 [tomcat-handler-28] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:03:47.319 [tomcat-handler-28] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:03:47.320 [tomcat-handler-28] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:03:47.321 [tomcat-handler-28] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 10:03:48.873 [tomcat-handler-29] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:03:48.875 [tomcat-handler-29] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:03:48.875 [tomcat-handler-29] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:03:48.877 [tomcat-handler-29] INFO  e.t.v.controller.AuthController - User logged out: juan.perez from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:03:51.905 [tomcat-handler-30] INFO  e.t.v.controller.AuthController - Login attempt for user: admin from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:03:51.905 [tomcat-handler-30] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: admin
2025-11-30 10:03:52.009 [tomcat-handler-30] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: admin (role: Administrador (admin))
2025-11-30 10:03:52.009 [tomcat-handler-30] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: admin
2025-11-30 10:03:52.010 [tomcat-handler-30] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: admin (expires: Sun Nov 30 11:03:52 CET 2025)
2025-11-30 10:03:52.010 [tomcat-handler-30] INFO  e.t.v.controller.AuthController - User authenticated successfully: admin (role: Administrador)
2025-11-30 10:04:35.857 [tomcat-handler-31] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:04:35.859 [tomcat-handler-31] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:04:35.859 [tomcat-handler-31] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 10:04:35.860 [tomcat-handler-31] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:04:35.861 [tomcat-handler-31] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:04:35.862 [tomcat-handler-31] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:04:35.862 [tomcat-handler-31] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 10:04:40.827 [tomcat-handler-32] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:04:40.828 [tomcat-handler-32] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:04:40.829 [tomcat-handler-32] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 10:04:40.830 [tomcat-handler-32] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 10:04:40.830 [tomcat-handler-32] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:04:40.832 [tomcat-handler-32] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:04:52.066 [tomcat-handler-33] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:04:52.068 [tomcat-handler-33] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:04:52.068 [tomcat-handler-33] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 10:04:52.068 [tomcat-handler-33] ERROR e.t.v.config.JwtAccessDeniedHandler - Access denied to: /api/v1/elections/election-f9e4da2a/vote - Access Denied
2025-11-30 10:09:33.510 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-30 10:09:33.528 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-30 10:09:33.531 [SpringApplicationShutdownHook] INFO  e.tfg.votacion.service.FabricService - Closing Fabric Gateway connection
2025-11-30 10:09:33.567 [SpringApplicationShutdownHook] INFO  e.t.votacion.service.StorageService - Shutting down Storage Service
2025-11-30 10:09:33.567 [SpringApplicationShutdownHook] DEBUG e.t.votacion.service.StorageService - Master key cleared from memory
2025-11-30 10:09:48.023 [main] INFO  es.tfg.votacion.Application - Starting Application using Java 21.0.9 with PID 1213404 (/home/ehuetadr/TFG/VotacionBC/backend-spring/target/classes started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-30 10:09:48.025 [main] DEBUG es.tfg.votacion.Application - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-30 10:09:48.026 [main] INFO  es.tfg.votacion.Application - No active profile set, falling back to 1 default profile: "default"
2025-11-30 10:09:49.182 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-30 10:09:49.199 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-30 10:09:49.199 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-30 10:09:49.257 [main] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring embedded WebApplicationContext
2025-11-30 10:09:49.258 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1194 ms
2025-11-30 10:09:49.314 [main] INFO  es.tfg.votacion.service.AuthService - Initializing Authentication Service (Mock Mode)
2025-11-30 10:09:49.314 [main] DEBUG es.tfg.votacion.service.AuthService - Loading mock users from: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-30 10:09:49.332 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: juan.perez (role: Votante (voter), active: true)
2025-11-30 10:09:49.333 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: maria.gonzalez (role: Votante (voter), active: true)
2025-11-30 10:09:49.333 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: admin (role: Administrador (admin), active: true)
2025-11-30 10:09:49.333 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: auditor (role: Auditor (auditor), active: true)
2025-11-30 10:09:49.333 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: carlos.martin (role: Votante (voter), active: true)
2025-11-30 10:09:49.334 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: ana.rodriguez (role: Votante (voter), active: true)
2025-11-30 10:09:49.334 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: pedro.lopez (role: Administrador (admin), active: true)
2025-11-30 10:09:49.334 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: lucia.garcia (role: Votante (voter), active: false)
2025-11-30 10:09:49.335 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: test.user (role: Votante (voter), active: true)
2025-11-30 10:09:49.335 [main] INFO  es.tfg.votacion.service.AuthService - Loaded 9 mock users from /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-30 10:09:49.338 [main] DEBUG es.tfg.votacion.service.AuthService - JWT signing key initialized with HS256 algorithm
2025-11-30 10:09:49.338 [main] INFO  es.tfg.votacion.service.AuthService - JWT signing key initialized successfully
2025-11-30 10:09:49.339 [main] DEBUG es.tfg.votacion.service.AuthService - JWT issuer: votacion-blockchain-poc
2025-11-30 10:09:49.339 [main] DEBUG es.tfg.votacion.service.AuthService - JWT audience: voting-system
2025-11-30 10:09:49.339 [main] DEBUG es.tfg.votacion.service.AuthService - JWT expiration: 3600 seconds
2025-11-30 10:09:49.339 [main] DEBUG es.tfg.votacion.service.AuthService - Allowed roles: [voter, admin, auditor]
2025-11-30 10:09:49.339 [main] WARN  es.tfg.votacion.service.AuthService - Running in MOCK authentication mode - not suitable for production!
2025-11-30 10:09:49.378 [main] DEBUG e.t.v.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-30 10:09:49.437 [main] INFO  e.t.votacion.service.StorageService - Initializing Storage Service with AES-GCM encryption
2025-11-30 10:09:49.437 [main] DEBUG e.t.votacion.service.StorageService - Loading encryption key from keystore: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/keystore/keystore.json
2025-11-30 10:09:49.442 [main] DEBUG e.t.votacion.service.StorageService - Keystore loaded - algorithm: AES/GCM/NoPadding, key length: 256 bits
2025-11-30 10:09:49.443 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded and validated successfully
2025-11-30 10:09:49.444 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded successfully from keystore
2025-11-30 10:09:49.445 [main] INFO  e.t.votacion.service.StorageService - Storage directory initialized: /home/ehuetadr/TFG/VotacionBC/backend-spring/data/storage
2025-11-30 10:09:49.446 [main] DEBUG e.t.votacion.service.StorageService - Encryption algorithm: AES/GCM/NoPadding
2025-11-30 10:09:49.446 [main] DEBUG e.t.votacion.service.StorageService - Key length: 256 bits
2025-11-30 10:09:49.446 [main] DEBUG e.t.votacion.service.StorageService - IV length: 12 bytes
2025-11-30 10:09:49.446 [main] DEBUG e.t.votacion.service.StorageService - Tag length: 128 bits
2025-11-30 10:09:49.446 [main] INFO  e.t.votacion.service.StorageService - Automatic cleanup enabled - retention: 30 days
2025-11-30 10:09:49.463 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-30 10:09:49.464 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-30 10:09:49.464 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /home/ehuetadr/TFG/VotacionBC/fabric/test-network/organizations/peerOrganizations/org1.example.com/connection-org1.json
2025-11-30 10:09:49.464 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /home/ehuetadr/TFG/VotacionBC/backend-spring/wallet
2025-11-30 10:09:49.464 [main] DEBUG e.tfg.votacion.service.FabricService - User: appUser
2025-11-30 10:09:49.464 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: electionchannel
2025-11-30 10:09:49.464 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: electioncc
2025-11-30 10:09:50.605 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Fabric network
2025-11-30 10:09:50.608 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-30 10:09:50.611 [main] INFO  e.t.votacion.service.ElectionService - Initializing ElectionService
2025-11-30 10:09:50.706 [main] INFO  e.t.votacion.service.ElectionService - Loaded 4 elections from disk
2025-11-30 10:09:51.126 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: b36717b3-e885-4c69-83a4-36f8465893a5

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-30 10:09:51.133 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-30 10:09:51.178 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring Spring Security with JWT authentication
2025-11-30 10:09:51.179 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-30 10:09:51.212 [main] INFO  e.tfg.votacion.config.SecurityConfig - Spring Security configured successfully
2025-11-30 10:09:51.572 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-11-30 10:09:51.582 [main] INFO  es.tfg.votacion.Application - Started Application in 4.082 seconds (process running for 4.373)
2025-11-30 10:16:31.284 [tomcat-handler-0] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-30 10:16:31.284 [tomcat-handler-0] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-30 10:16:31.286 [tomcat-handler-0] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-11-30 10:16:31.359 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:16:31.508 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:16:31.510 [tomcat-handler-0] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 10:16:31.517 [tomcat-handler-0] ERROR e.t.v.config.JwtAccessDeniedHandler - Access denied to: /api/v1/elections/election-f9e4da2a/vote - Access Denied
2025-11-30 10:16:37.790 [tomcat-handler-1] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:16:37.792 [tomcat-handler-1] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:16:37.792 [tomcat-handler-1] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 10:16:37.793 [tomcat-handler-1] ERROR e.t.v.config.JwtAccessDeniedHandler - Access denied to: /api/v1/elections/election-f9e4da2a/vote - Access Denied
2025-11-30 10:16:41.357 [tomcat-handler-2] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:16:41.359 [tomcat-handler-2] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:16:41.360 [tomcat-handler-2] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 10:16:41.403 [tomcat-handler-2] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:16:41.403 [tomcat-handler-2] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:16:41.405 [tomcat-handler-2] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:16:41.408 [tomcat-handler-2] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 10:16:44.322 [tomcat-handler-3] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:16:44.323 [tomcat-handler-3] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 10:16:44.323 [tomcat-handler-3] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 10:16:44.326 [tomcat-handler-3] INFO  e.t.v.controller.AuthController - User logged out: admin from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:18:48.045 [tomcat-handler-5] INFO  e.t.v.controller.AuthController - Login attempt for user: juan.perez from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:18:48.046 [tomcat-handler-5] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: juan.perez
2025-11-30 10:18:48.164 [tomcat-handler-5] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: juan.perez (role: Votante (voter))
2025-11-30 10:18:48.165 [tomcat-handler-5] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: juan.perez
2025-11-30 10:18:48.187 [tomcat-handler-5] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: juan.perez (expires: Sun Nov 30 11:18:48 CET 2025)
2025-11-30 10:18:48.188 [tomcat-handler-5] INFO  e.t.v.controller.AuthController - User authenticated successfully: juan.perez (role: Votante)
2025-11-30 10:18:48.249 [tomcat-handler-6] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:18:48.250 [tomcat-handler-6] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:18:48.251 [tomcat-handler-6] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:18:48.252 [tomcat-handler-6] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:18:48.253 [tomcat-handler-6] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:18:48.264 [tomcat-handler-6] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:18:48.265 [tomcat-handler-6] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 10:19:07.889 [tomcat-handler-7] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:19:07.891 [tomcat-handler-7] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:19:07.891 [tomcat-handler-7] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:19:07.894 [tomcat-handler-7] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 10:19:07.896 [tomcat-handler-7] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:19:07.905 [tomcat-handler-7] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:19:16.153 [tomcat-handler-8] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:19:16.154 [tomcat-handler-8] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:19:16.155 [tomcat-handler-8] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:19:16.171 [tomcat-handler-8] INFO  e.t.v.controller.ElectionController - Vote submission for election: election-f9e4da2a
2025-11-30 10:19:16.171 [tomcat-handler-8] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:19:16.173 [tomcat-handler-8] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:19:16.177 [tomcat-handler-8] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: election-f9e4da2a (142 bytes)
2025-11-30 10:19:16.178 [tomcat-handler-8] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 142 bytes
2025-11-30 10:19:16.180 [tomcat-handler-8] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 170 bytes (IV: 12, encrypted: 158)
2025-11-30 10:19:16.191 [tomcat-handler-8] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 170 bytes
2025-11-30 10:19:16.193 [tomcat-handler-8] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-election-f9e4da2a-1764494356177-4086e95a.enc
2025-11-30 10:19:16.194 [tomcat-handler-8] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: f2ea85b349ca7f9da560d3a5685b6f1a2e465e632d5e5b9f8aaa6477df2d6c2f
2025-11-30 10:19:16.194 [tomcat-handler-8] INFO  e.t.v.controller.ElectionController - Vote encrypted and stored: blobId=BLOB-election-f9e4da2a-1764494356177-4086e95a
2025-11-30 10:19:16.194 [tomcat-handler-8] INFO  e.tfg.votacion.service.FabricService - Emitting vote commitment to blockchain - Election: election-f9e4da2a, Commitment: FSNamdaBCECVdgT1Ofno2f7qVNyCPdQlpIZDoDLnOCk=
2025-11-30 10:19:19.228 [tomcat-handler-8] INFO  e.tfg.votacion.service.FabricService - Vote emitted successfully. TX-ID: 1c5df6e35e034548b9bc71ce310446a59127a0a232ea00c4ddec60b96d90d0f1
2025-11-30 10:19:19.228 [tomcat-handler-8] INFO  e.t.v.controller.ElectionController - Vote registered in blockchain: txId=1c5df6e35e034548b9bc71ce310446a59127a0a232ea00c4ddec60b96d90d0f1
2025-11-30 10:19:19.229 [tomcat-handler-8] INFO  e.t.votacion.service.ElectionService - Vote registered: electionId=election-f9e4da2a, userId=user_juan.perez_001, optionId=opt-1
2025-11-30 10:19:19.248 [tomcat-handler-8] INFO  e.t.votacion.service.ElectionService - Data saved to disk
2025-11-30 10:19:19.254 [tomcat-handler-8] INFO  e.t.v.controller.ElectionController - Vote processed successfully for user: juan.perez in election: election-f9e4da2a
2025-11-30 10:19:20.632 [tomcat-handler-9] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:19:20.633 [tomcat-handler-9] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:19:20.634 [tomcat-handler-9] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:19:20.639 [tomcat-handler-9] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 10:19:20.641 [tomcat-handler-9] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:19:20.643 [tomcat-handler-9] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:24:37.840 [tomcat-handler-11] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:24:37.843 [tomcat-handler-11] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:24:37.843 [tomcat-handler-11] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:24:37.844 [tomcat-handler-11] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 10:24:37.845 [tomcat-handler-11] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:24:37.847 [tomcat-handler-11] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:24:41.646 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:24:41.650 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:24:41.651 [tomcat-handler-12] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:24:41.653 [tomcat-handler-12] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 10:24:41.653 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:24:41.654 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:25:11.006 [tomcat-handler-13] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:25:11.007 [tomcat-handler-13] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:25:11.009 [tomcat-handler-13] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:25:11.016 [tomcat-handler-13] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 10:25:11.017 [tomcat-handler-13] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:25:11.023 [tomcat-handler-13] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:26:25.712 [tomcat-handler-15] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:26:25.715 [tomcat-handler-15] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:26:25.715 [tomcat-handler-15] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:26:25.717 [tomcat-handler-15] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 10:26:25.717 [tomcat-handler-15] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:26:25.719 [tomcat-handler-15] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:26:31.430 [tomcat-handler-16] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:26:31.432 [tomcat-handler-16] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:26:31.433 [tomcat-handler-16] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:26:31.435 [tomcat-handler-16] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 10:26:31.436 [tomcat-handler-16] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:26:31.437 [tomcat-handler-16] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:26:33.527 [tomcat-handler-17] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:26:33.530 [tomcat-handler-17] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:26:33.530 [tomcat-handler-17] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:26:33.532 [tomcat-handler-17] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 10:26:33.532 [tomcat-handler-17] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:26:33.534 [tomcat-handler-17] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:26:35.449 [tomcat-handler-18] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:26:35.450 [tomcat-handler-18] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:26:35.451 [tomcat-handler-18] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:26:35.452 [tomcat-handler-18] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:26:35.453 [tomcat-handler-18] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:26:35.454 [tomcat-handler-18] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:26:35.455 [tomcat-handler-18] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 10:28:59.030 [tomcat-handler-20] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:28:59.032 [tomcat-handler-20] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:28:59.032 [tomcat-handler-20] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:28:59.034 [tomcat-handler-20] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:28:59.034 [tomcat-handler-20] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:28:59.036 [tomcat-handler-20] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:28:59.037 [tomcat-handler-20] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 10:29:57.528 [tomcat-handler-21] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:29:57.529 [tomcat-handler-21] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:29:57.530 [tomcat-handler-21] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:29:57.531 [tomcat-handler-21] INFO  e.t.v.controller.ElectionController - Fetching election: election-001
2025-11-30 10:29:57.531 [tomcat-handler-21] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:29:57.533 [tomcat-handler-21] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:30:03.303 [tomcat-handler-22] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:30:03.305 [tomcat-handler-22] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:30:03.305 [tomcat-handler-22] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:30:03.308 [tomcat-handler-22] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:30:03.308 [tomcat-handler-22] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:30:03.310 [tomcat-handler-22] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:30:03.310 [tomcat-handler-22] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 10:30:14.068 [tomcat-handler-23] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:30:14.069 [tomcat-handler-23] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:30:14.070 [tomcat-handler-23] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:30:14.071 [tomcat-handler-23] INFO  e.t.v.controller.ElectionController - Fetching election: election-001
2025-11-30 10:30:14.071 [tomcat-handler-23] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:30:14.072 [tomcat-handler-23] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:30:36.162 [tomcat-handler-24] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:30:36.164 [tomcat-handler-24] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:30:36.165 [tomcat-handler-24] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:30:36.167 [tomcat-handler-24] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:30:36.167 [tomcat-handler-24] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:30:36.169 [tomcat-handler-24] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:30:36.169 [tomcat-handler-24] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 10:30:52.529 [tomcat-handler-25] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:30:52.530 [tomcat-handler-25] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:30:52.530 [tomcat-handler-25] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:30:52.532 [tomcat-handler-25] INFO  e.t.v.controller.AuthController - User logged out: juan.perez from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:39:11.928 [tomcat-handler-27] INFO  e.t.v.controller.AuthController - Login attempt for user: juan.perez from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:39:11.929 [tomcat-handler-27] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: juan.perez
2025-11-30 10:39:12.027 [tomcat-handler-27] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: juan.perez (role: Votante (voter))
2025-11-30 10:39:12.028 [tomcat-handler-27] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: juan.perez
2025-11-30 10:39:12.028 [tomcat-handler-27] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: juan.perez (expires: Sun Nov 30 11:39:12 CET 2025)
2025-11-30 10:39:12.029 [tomcat-handler-27] INFO  e.t.v.controller.AuthController - User authenticated successfully: juan.perez (role: Votante)
2025-11-30 10:39:12.093 [tomcat-handler-28] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:39:12.096 [tomcat-handler-28] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:39:12.096 [tomcat-handler-28] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:39:12.097 [tomcat-handler-28] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:39:12.097 [tomcat-handler-28] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:39:12.098 [tomcat-handler-28] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:39:12.099 [tomcat-handler-28] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 10:39:46.424 [tomcat-handler-29] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:39:46.426 [tomcat-handler-29] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:39:46.426 [tomcat-handler-29] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:39:46.427 [tomcat-handler-29] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:39:46.428 [tomcat-handler-29] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:39:46.429 [tomcat-handler-29] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:39:46.429 [tomcat-handler-29] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 10:39:50.608 [tomcat-handler-30] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:39:50.610 [tomcat-handler-30] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:39:50.610 [tomcat-handler-30] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:39:50.612 [tomcat-handler-30] INFO  e.t.v.controller.ElectionController - Fetching election: election-001
2025-11-30 10:39:50.612 [tomcat-handler-30] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:39:50.613 [tomcat-handler-30] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:39:56.410 [tomcat-handler-32] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:39:56.412 [tomcat-handler-32] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:39:56.412 [tomcat-handler-32] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:39:56.417 [tomcat-handler-32] INFO  e.t.v.controller.ElectionController - Vote submission for election: election-001
2025-11-30 10:39:56.418 [tomcat-handler-32] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:39:56.419 [tomcat-handler-32] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:39:56.419 [tomcat-handler-32] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: election-001 (136 bytes)
2025-11-30 10:39:56.419 [tomcat-handler-32] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 136 bytes
2025-11-30 10:39:56.421 [tomcat-handler-32] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 164 bytes (IV: 12, encrypted: 152)
2025-11-30 10:39:56.421 [tomcat-handler-32] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 164 bytes
2025-11-30 10:39:56.422 [tomcat-handler-32] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-election-001-1764495596419-77c5467b.enc
2025-11-30 10:39:56.422 [tomcat-handler-32] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 86e6aaccfeb00249a960575b5b1839379f5b7c0018f914876c122a7af8a8a46a
2025-11-30 10:39:56.422 [tomcat-handler-32] INFO  e.t.v.controller.ElectionController - Vote encrypted and stored: blobId=BLOB-election-001-1764495596419-77c5467b
2025-11-30 10:39:56.422 [tomcat-handler-32] INFO  e.tfg.votacion.service.FabricService - Emitting vote commitment to blockchain - Election: election-001, Commitment: 7Yy65wlAUXVx4VWRS0nkmzG30dIjDqRMoOexVn6T/dM=
2025-11-30 10:39:56.902 [tomcat-handler-32] ERROR e.tfg.votacion.service.FabricService - Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-11-30 10:39:56.902 [tomcat-handler-32] WARN  e.tfg.votacion.service.FabricService - Attempt 1/3 for emitVote failed, retrying in 1000ms: Failed to submit vote transaction
2025-11-30 10:39:57.923 [tomcat-handler-32] ERROR e.tfg.votacion.service.FabricService - Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-11-30 10:39:57.923 [tomcat-handler-32] WARN  e.tfg.votacion.service.FabricService - Attempt 2/3 for emitVote failed, retrying in 2000ms: Failed to submit vote transaction
2025-11-30 10:39:59.940 [tomcat-handler-32] ERROR e.tfg.votacion.service.FabricService - Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-11-30 10:39:59.940 [tomcat-handler-32] ERROR e.tfg.votacion.service.FabricService - Operation emitVote failed after 3 attempts: Failed to submit vote transaction
2025-11-30 10:39:59.941 [tomcat-handler-32] ERROR e.t.v.controller.ElectionController - Error submitting vote
java.lang.RuntimeException: Operation failed after retries
	at es.tfg.votacion.service.FabricService.executeWithRetry(FabricService.java:442)
	at es.tfg.votacion.service.FabricService.emitVote(FabricService.java:206)
	at es.tfg.votacion.controller.ElectionController.emitVote(ElectionController.java:351)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at es.tfg.votacion.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:329)
Caused by: java.lang.RuntimeException: Failed to submit vote transaction
	at es.tfg.votacion.service.FabricService.lambda$emitVote$6(FabricService.java:218)
	at es.tfg.votacion.service.FabricService.executeWithRetry(FabricService.java:428)
	... 106 common frames omitted
Caused by: org.hyperledger.fabric.client.EndorseException: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
	at org.hyperledger.fabric.client.GatewayClient.endorse(GatewayClient.java:73)
	at org.hyperledger.fabric.client.ProposalImpl.endorse(ProposalImpl.java:74)
	at org.hyperledger.fabric.client.Proposal.endorse(Proposal.java:65)
	at org.hyperledger.fabric.client.ContractImpl.submitTransaction(ContractImpl.java:47)
	at es.tfg.votacion.service.FabricService.lambda$emitVote$6(FabricService.java:208)
	... 107 common frames omitted
Caused by: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
	at io.grpc.stub.ClientCalls.toStatusRuntimeException(ClientCalls.java:268)
	at io.grpc.stub.ClientCalls.getUnchecked(ClientCalls.java:249)
	at io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:167)
	at org.hyperledger.fabric.protos.gateway.GatewayGrpc$GatewayBlockingStub.endorse(GatewayGrpc.java:455)
	at org.hyperledger.fabric.client.GatewayClient.endorse(GatewayClient.java:71)
	... 111 common frames omitted
2025-11-30 10:40:05.517 [tomcat-handler-33] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:40:05.518 [tomcat-handler-33] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:40:05.518 [tomcat-handler-33] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:40:05.519 [tomcat-handler-33] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:40:05.519 [tomcat-handler-33] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:40:05.520 [tomcat-handler-33] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:40:05.520 [tomcat-handler-33] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 10:40:08.342 [tomcat-handler-34] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:40:08.344 [tomcat-handler-34] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:40:08.344 [tomcat-handler-34] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:40:08.346 [tomcat-handler-34] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:40:08.347 [tomcat-handler-34] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:40:08.349 [tomcat-handler-34] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:40:08.349 [tomcat-handler-34] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 10:40:13.991 [tomcat-handler-35] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:40:13.993 [tomcat-handler-35] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:40:13.993 [tomcat-handler-35] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:40:13.994 [tomcat-handler-35] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:40:13.994 [tomcat-handler-35] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:40:13.995 [tomcat-handler-35] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:40:13.996 [tomcat-handler-35] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 10:40:15.347 [tomcat-handler-36] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:40:15.350 [tomcat-handler-36] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:40:15.351 [tomcat-handler-36] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:40:15.354 [tomcat-handler-36] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:40:15.355 [tomcat-handler-36] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:40:15.356 [tomcat-handler-36] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:40:15.356 [tomcat-handler-36] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 10:40:19.118 [tomcat-handler-37] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 10:40:19.119 [tomcat-handler-37] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 10:40:19.119 [tomcat-handler-37] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:40:19.121 [tomcat-handler-37] INFO  e.t.v.controller.AuthController - User logged out: juan.perez from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:26:58.178 [tomcat-handler-40] INFO  e.t.v.controller.AuthController - Login attempt for user: maria.gonzalez from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:26:58.179 [tomcat-handler-40] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: maria.gonzalez
2025-11-30 12:26:58.279 [tomcat-handler-40] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: maria.gonzalez (role: Votante (voter))
2025-11-30 12:26:58.279 [tomcat-handler-40] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: maria.gonzalez
2025-11-30 12:26:58.281 [tomcat-handler-40] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: maria.gonzalez (expires: Sun Nov 30 13:26:58 CET 2025)
2025-11-30 12:26:58.281 [tomcat-handler-40] INFO  e.t.v.controller.AuthController - User authenticated successfully: maria.gonzalez (role: Votante)
2025-11-30 12:26:58.340 [tomcat-handler-42] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:26:58.341 [tomcat-handler-42] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:26:58.341 [tomcat-handler-42] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:26:58.342 [tomcat-handler-42] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:26:58.342 [tomcat-handler-42] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:26:58.351 [tomcat-handler-42] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:26:58.351 [tomcat-handler-42] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 12:27:02.887 [tomcat-handler-44] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:27:02.890 [tomcat-handler-44] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:27:02.890 [tomcat-handler-44] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:27:02.891 [tomcat-handler-44] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 12:27:02.892 [tomcat-handler-44] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:27:02.892 [tomcat-handler-44] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:27:17.101 [tomcat-handler-45] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:27:17.104 [tomcat-handler-45] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:27:17.104 [tomcat-handler-45] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:27:17.105 [tomcat-handler-45] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 12:27:17.106 [tomcat-handler-45] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:27:17.107 [tomcat-handler-45] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:27:23.387 [tomcat-handler-47] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:27:23.388 [tomcat-handler-47] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:27:23.388 [tomcat-handler-47] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:27:23.389 [tomcat-handler-47] INFO  e.t.v.controller.AuthController - User logged out: maria.gonzalez from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:27:38.785 [tomcat-handler-48] INFO  e.t.v.controller.AuthController - Login attempt for user: carlos.martin from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:27:38.785 [tomcat-handler-48] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: carlos.martin
2025-11-30 12:27:38.895 [tomcat-handler-48] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: carlos.martin (role: Votante (voter))
2025-11-30 12:27:38.895 [tomcat-handler-48] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: carlos.martin
2025-11-30 12:27:38.896 [tomcat-handler-48] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: carlos.martin (expires: Sun Nov 30 13:27:38 CET 2025)
2025-11-30 12:27:38.896 [tomcat-handler-48] INFO  e.t.v.controller.AuthController - User authenticated successfully: carlos.martin (role: Votante)
2025-11-30 12:27:38.940 [tomcat-handler-49] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:27:38.941 [tomcat-handler-49] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: carlos.martin
2025-11-30 12:27:38.942 [tomcat-handler-49] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'carlos.martin' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:27:38.943 [tomcat-handler-49] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:27:38.943 [tomcat-handler-49] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:27:38.944 [tomcat-handler-49] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: carlos.martin
2025-11-30 12:27:38.944 [tomcat-handler-49] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 12:27:43.149 [tomcat-handler-50] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:27:43.150 [tomcat-handler-50] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: carlos.martin
2025-11-30 12:27:43.150 [tomcat-handler-50] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'carlos.martin' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:27:43.152 [tomcat-handler-50] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 12:27:43.153 [tomcat-handler-50] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:27:43.154 [tomcat-handler-50] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: carlos.martin
2025-11-30 12:30:04.405 [tomcat-handler-52] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:30:04.407 [tomcat-handler-52] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: carlos.martin
2025-11-30 12:30:04.407 [tomcat-handler-52] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'carlos.martin' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:30:04.408 [tomcat-handler-52] INFO  e.t.v.controller.AuthController - User logged out: carlos.martin from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:30:23.307 [tomcat-handler-53] INFO  e.t.v.controller.AuthController - Login attempt for user: pedro.lopez from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:30:23.307 [tomcat-handler-53] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: pedro.lopez
2025-11-30 12:30:23.409 [tomcat-handler-53] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: pedro.lopez (role: Administrador (admin))
2025-11-30 12:30:23.410 [tomcat-handler-53] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: pedro.lopez
2025-11-30 12:30:23.410 [tomcat-handler-53] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: pedro.lopez (expires: Sun Nov 30 13:30:23 CET 2025)
2025-11-30 12:30:23.410 [tomcat-handler-53] INFO  e.t.v.controller.AuthController - User authenticated successfully: pedro.lopez (role: Administrador)
2025-11-30 12:30:31.183 [tomcat-handler-54] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:30:31.185 [tomcat-handler-54] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: pedro.lopez
2025-11-30 12:30:31.185 [tomcat-handler-54] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'pedro.lopez' authenticated successfully with role 'Administrador (admin)'
2025-11-30 12:30:31.187 [tomcat-handler-54] INFO  e.t.v.controller.AuthController - User logged out: pedro.lopez from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:30:41.294 [tomcat-handler-55] INFO  e.t.v.controller.AuthController - Login attempt for user: lucia.garcia from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:30:41.294 [tomcat-handler-55] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: lucia.garcia
2025-11-30 12:30:41.420 [tomcat-handler-55] WARN  es.tfg.votacion.service.AuthService - Authentication failed: user is inactive: lucia.garcia
2025-11-30 12:30:41.421 [tomcat-handler-55] WARN  e.t.v.controller.AuthController - Authentication failed for user: lucia.garcia
2025-11-30 12:31:13.798 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-30 12:31:13.807 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-30 12:31:13.813 [SpringApplicationShutdownHook] INFO  e.tfg.votacion.service.FabricService - Closing Fabric Gateway connection
2025-11-30 12:31:13.818 [SpringApplicationShutdownHook] INFO  e.t.votacion.service.StorageService - Shutting down Storage Service
2025-11-30 12:31:13.819 [SpringApplicationShutdownHook] DEBUG e.t.votacion.service.StorageService - Master key cleared from memory
2025-11-30 12:31:28.098 [main] INFO  es.tfg.votacion.Application - Starting Application using Java 21.0.9 with PID 1277440 (/home/ehuetadr/TFG/VotacionBC/backend-spring/target/classes started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-30 12:31:28.101 [main] DEBUG es.tfg.votacion.Application - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-30 12:31:28.102 [main] INFO  es.tfg.votacion.Application - No active profile set, falling back to 1 default profile: "default"
2025-11-30 12:31:29.363 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-30 12:31:29.379 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-30 12:31:29.380 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-30 12:31:29.445 [main] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring embedded WebApplicationContext
2025-11-30 12:31:29.446 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1282 ms
2025-11-30 12:31:29.541 [main] INFO  es.tfg.votacion.service.AuthService - Initializing Authentication Service (Mock Mode)
2025-11-30 12:31:29.541 [main] DEBUG es.tfg.votacion.service.AuthService - Loading mock users from: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-30 12:31:29.598 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: juan.perez (role: Votante (voter), active: true)
2025-11-30 12:31:29.598 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: maria.gonzalez (role: Votante (voter), active: true)
2025-11-30 12:31:29.598 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: admin (role: Administrador (admin), active: true)
2025-11-30 12:31:29.599 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: auditor (role: Auditor (auditor), active: true)
2025-11-30 12:31:29.599 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: carlos.martin (role: Votante (voter), active: true)
2025-11-30 12:31:29.599 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: ana.rodriguez (role: Votante (voter), active: true)
2025-11-30 12:31:29.600 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: pedro.lopez (role: Administrador (admin), active: true)
2025-11-30 12:31:29.611 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: lucia.garcia (role: Votante (voter), active: false)
2025-11-30 12:31:29.611 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: test.user (role: Votante (voter), active: true)
2025-11-30 12:31:29.611 [main] INFO  es.tfg.votacion.service.AuthService - Loaded 9 mock users from /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-30 12:31:29.627 [main] DEBUG es.tfg.votacion.service.AuthService - JWT signing key initialized with HS256 algorithm
2025-11-30 12:31:29.628 [main] INFO  es.tfg.votacion.service.AuthService - JWT signing key initialized successfully
2025-11-30 12:31:29.628 [main] DEBUG es.tfg.votacion.service.AuthService - JWT issuer: votacion-blockchain-poc
2025-11-30 12:31:29.628 [main] DEBUG es.tfg.votacion.service.AuthService - JWT audience: voting-system
2025-11-30 12:31:29.628 [main] DEBUG es.tfg.votacion.service.AuthService - JWT expiration: 3600 seconds
2025-11-30 12:31:29.629 [main] DEBUG es.tfg.votacion.service.AuthService - Allowed roles: [voter, admin, auditor]
2025-11-30 12:31:29.629 [main] WARN  es.tfg.votacion.service.AuthService - Running in MOCK authentication mode - not suitable for production!
2025-11-30 12:31:29.793 [main] DEBUG e.t.v.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-30 12:31:30.005 [main] INFO  e.t.votacion.service.StorageService - Initializing Storage Service with AES-GCM encryption
2025-11-30 12:31:30.006 [main] DEBUG e.t.votacion.service.StorageService - Loading encryption key from keystore: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/keystore/keystore.json
2025-11-30 12:31:30.015 [main] DEBUG e.t.votacion.service.StorageService - Keystore loaded - algorithm: AES/GCM/NoPadding, key length: 256 bits
2025-11-30 12:31:30.016 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded and validated successfully
2025-11-30 12:31:30.016 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded successfully from keystore
2025-11-30 12:31:30.016 [main] INFO  e.t.votacion.service.StorageService - Storage directory initialized: /home/ehuetadr/TFG/VotacionBC/backend-spring/data/storage
2025-11-30 12:31:30.033 [main] DEBUG e.t.votacion.service.StorageService - Encryption algorithm: AES/GCM/NoPadding
2025-11-30 12:31:30.033 [main] DEBUG e.t.votacion.service.StorageService - Key length: 256 bits
2025-11-30 12:31:30.033 [main] DEBUG e.t.votacion.service.StorageService - IV length: 12 bytes
2025-11-30 12:31:30.034 [main] DEBUG e.t.votacion.service.StorageService - Tag length: 128 bits
2025-11-30 12:31:30.034 [main] INFO  e.t.votacion.service.StorageService - Automatic cleanup enabled - retention: 30 days
2025-11-30 12:31:30.109 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-30 12:31:30.109 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-30 12:31:30.113 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /home/ehuetadr/TFG/VotacionBC/fabric/test-network/organizations/peerOrganizations/org1.example.com/connection-org1.json
2025-11-30 12:31:30.113 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /home/ehuetadr/TFG/VotacionBC/backend-spring/wallet
2025-11-30 12:31:30.113 [main] DEBUG e.tfg.votacion.service.FabricService - User: appUser
2025-11-30 12:31:30.113 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: electionchannel
2025-11-30 12:31:30.113 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: electioncc
2025-11-30 12:31:31.767 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Fabric network
2025-11-30 12:31:31.767 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-30 12:31:31.769 [main] INFO  e.t.votacion.service.ElectionService - Initializing ElectionService
2025-11-30 12:31:31.879 [main] INFO  e.t.votacion.service.ElectionService - Loaded 4 elections from disk
2025-11-30 12:31:31.957 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: bcc5d76b-a2d0-45be-8e9a-b5affb5eb358

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-30 12:31:31.968 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-30 12:31:31.556 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring Spring Security with JWT authentication
2025-11-30 12:31:31.558 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-30 12:31:31.624 [main] INFO  e.tfg.votacion.config.SecurityConfig - Spring Security configured successfully
2025-11-30 12:31:32.341 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-11-30 12:31:32.361 [main] INFO  es.tfg.votacion.Application - Started Application in 4.82 seconds (process running for 6.242)
2025-11-30 12:31:52.152 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-30 12:31:52.178 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-30 12:31:52.183 [SpringApplicationShutdownHook] INFO  e.tfg.votacion.service.FabricService - Closing Fabric Gateway connection
2025-11-30 12:31:52.199 [SpringApplicationShutdownHook] INFO  e.t.votacion.service.StorageService - Shutting down Storage Service
2025-11-30 12:31:52.200 [SpringApplicationShutdownHook] DEBUG e.t.votacion.service.StorageService - Master key cleared from memory
2025-11-30 12:31:57.367 [main] INFO  es.tfg.votacion.Application - Starting Application using Java 21.0.9 with PID 1277984 (/home/ehuetadr/TFG/VotacionBC/backend-spring/target/classes started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-30 12:31:57.368 [main] DEBUG es.tfg.votacion.Application - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-30 12:31:57.369 [main] INFO  es.tfg.votacion.Application - No active profile set, falling back to 1 default profile: "default"
2025-11-30 12:31:58.737 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-30 12:31:58.752 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-30 12:31:58.752 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-30 12:31:58.808 [main] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring embedded WebApplicationContext
2025-11-30 12:31:58.809 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1385 ms
2025-11-30 12:31:58.863 [main] INFO  es.tfg.votacion.service.AuthService - Initializing Authentication Service (Mock Mode)
2025-11-30 12:31:58.864 [main] DEBUG es.tfg.votacion.service.AuthService - Loading mock users from: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-30 12:31:58.883 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: juan.perez (role: Votante (voter), active: true)
2025-11-30 12:31:58.884 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: maria.gonzalez (role: Votante (voter), active: true)
2025-11-30 12:31:58.884 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: admin (role: Administrador (admin), active: true)
2025-11-30 12:31:58.884 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: auditor (role: Auditor (auditor), active: true)
2025-11-30 12:31:58.885 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: carlos.martin (role: Votante (voter), active: true)
2025-11-30 12:31:58.885 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: ana.rodriguez (role: Votante (voter), active: true)
2025-11-30 12:31:58.885 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: pedro.lopez (role: Administrador (admin), active: true)
2025-11-30 12:31:58.885 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: lucia.garcia (role: Votante (voter), active: false)
2025-11-30 12:31:58.886 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: test.user (role: Votante (voter), active: true)
2025-11-30 12:31:58.886 [main] INFO  es.tfg.votacion.service.AuthService - Loaded 9 mock users from /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-30 12:31:58.889 [main] DEBUG es.tfg.votacion.service.AuthService - JWT signing key initialized with HS256 algorithm
2025-11-30 12:31:58.889 [main] INFO  es.tfg.votacion.service.AuthService - JWT signing key initialized successfully
2025-11-30 12:31:58.889 [main] DEBUG es.tfg.votacion.service.AuthService - JWT issuer: votacion-blockchain-poc
2025-11-30 12:31:58.889 [main] DEBUG es.tfg.votacion.service.AuthService - JWT audience: voting-system
2025-11-30 12:31:58.890 [main] DEBUG es.tfg.votacion.service.AuthService - JWT expiration: 3600 seconds
2025-11-30 12:31:58.890 [main] DEBUG es.tfg.votacion.service.AuthService - Allowed roles: [voter, admin, auditor]
2025-11-30 12:31:58.890 [main] WARN  es.tfg.votacion.service.AuthService - Running in MOCK authentication mode - not suitable for production!
2025-11-30 12:31:58.934 [main] DEBUG e.t.v.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-30 12:31:58.996 [main] INFO  e.t.votacion.service.StorageService - Initializing Storage Service with AES-GCM encryption
2025-11-30 12:31:58.997 [main] DEBUG e.t.votacion.service.StorageService - Loading encryption key from keystore: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/keystore/keystore.json
2025-11-30 12:31:59.001 [main] DEBUG e.t.votacion.service.StorageService - Keystore loaded - algorithm: AES/GCM/NoPadding, key length: 256 bits
2025-11-30 12:31:59.002 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded and validated successfully
2025-11-30 12:31:59.003 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded successfully from keystore
2025-11-30 12:31:59.003 [main] INFO  e.t.votacion.service.StorageService - Storage directory initialized: /home/ehuetadr/TFG/VotacionBC/backend-spring/data/storage
2025-11-30 12:31:59.003 [main] DEBUG e.t.votacion.service.StorageService - Encryption algorithm: AES/GCM/NoPadding
2025-11-30 12:31:59.004 [main] DEBUG e.t.votacion.service.StorageService - Key length: 256 bits
2025-11-30 12:31:59.004 [main] DEBUG e.t.votacion.service.StorageService - IV length: 12 bytes
2025-11-30 12:31:59.004 [main] DEBUG e.t.votacion.service.StorageService - Tag length: 128 bits
2025-11-30 12:31:59.004 [main] INFO  e.t.votacion.service.StorageService - Automatic cleanup enabled - retention: 30 days
2025-11-30 12:31:59.023 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-30 12:31:59.023 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-30 12:31:59.023 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /home/ehuetadr/TFG/VotacionBC/fabric/test-network/organizations/peerOrganizations/org1.example.com/connection-org1.json
2025-11-30 12:31:59.023 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /home/ehuetadr/TFG/VotacionBC/backend-spring/wallet
2025-11-30 12:31:59.023 [main] DEBUG e.tfg.votacion.service.FabricService - User: appUser
2025-11-30 12:31:59.023 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: electionchannel
2025-11-30 12:31:59.024 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: electioncc
2025-11-30 12:31:59.938 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Fabric network
2025-11-30 12:31:59.939 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-30 12:31:59.940 [main] INFO  e.t.votacion.service.ElectionService - Initializing ElectionService
2025-11-30 12:32:00.052 [main] INFO  e.t.votacion.service.ElectionService - Loaded 4 elections from disk
2025-11-30 12:32:00.480 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 8cfed878-03fe-4e5a-8055-ebd0b5c9d7ed

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-30 12:32:00.488 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-30 12:32:00.538 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring Spring Security with JWT authentication
2025-11-30 12:32:00.539 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-30 12:32:00.576 [main] INFO  e.tfg.votacion.config.SecurityConfig - Spring Security configured successfully
2025-11-30 12:32:00.927 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-11-30 12:32:00.945 [main] INFO  es.tfg.votacion.Application - Started Application in 4.171 seconds (process running for 4.471)
2025-11-30 12:33:31.366 [tomcat-handler-0] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-30 12:33:31.366 [tomcat-handler-0] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-30 12:33:31.367 [tomcat-handler-0] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-11-30 12:33:31.522 [tomcat-handler-0] INFO  e.t.v.controller.AuthController - Login attempt for user: juan.perez from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:33:31.523 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: juan.perez
2025-11-30 12:33:31.624 [tomcat-handler-0] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: juan.perez (role: Votante (voter))
2025-11-30 12:33:31.625 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: juan.perez
2025-11-30 12:33:31.729 [tomcat-handler-0] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: juan.perez (expires: Sun Nov 30 13:33:31 CET 2025)
2025-11-30 12:33:31.731 [tomcat-handler-0] INFO  e.t.v.controller.AuthController - User authenticated successfully: juan.perez (role: Votante)
2025-11-30 12:33:31.830 [tomcat-handler-1] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:33:31.889 [tomcat-handler-1] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 12:33:31.890 [tomcat-handler-1] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:33:31.893 [tomcat-handler-1] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:33:31.893 [tomcat-handler-1] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:33:31.894 [tomcat-handler-1] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 12:33:31.898 [tomcat-handler-1] INFO  e.t.v.controller.ElectionController - Checking vote status for user juan.perez in election election-001: hasVoted=false
2025-11-30 12:33:31.900 [tomcat-handler-1] INFO  e.t.v.controller.ElectionController - Checking vote status for user juan.perez in election election-f9e4da2a: hasVoted=true
2025-11-30 12:33:31.901 [tomcat-handler-1] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 12:33:41.145 [tomcat-handler-2] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:33:41.147 [tomcat-handler-2] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-30 12:33:41.147 [tomcat-handler-2] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:33:41.149 [tomcat-handler-2] INFO  e.t.v.controller.AuthController - User logged out: juan.perez from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:34:43.579 [tomcat-handler-4] INFO  e.t.v.controller.AuthController - Login attempt for user: maria.gonzalez from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:34:43.579 [tomcat-handler-4] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: maria.gonzalez
2025-11-30 12:34:43.687 [tomcat-handler-4] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: maria.gonzalez (role: Votante (voter))
2025-11-30 12:34:43.688 [tomcat-handler-4] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: maria.gonzalez
2025-11-30 12:34:43.689 [tomcat-handler-4] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: maria.gonzalez (expires: Sun Nov 30 13:34:43 CET 2025)
2025-11-30 12:34:43.689 [tomcat-handler-4] INFO  e.t.v.controller.AuthController - User authenticated successfully: maria.gonzalez (role: Votante)
2025-11-30 12:34:43.755 [tomcat-handler-5] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:34:43.758 [tomcat-handler-5] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:34:43.758 [tomcat-handler-5] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:34:43.760 [tomcat-handler-5] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:34:43.760 [tomcat-handler-5] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:34:43.762 [tomcat-handler-5] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:34:43.762 [tomcat-handler-5] INFO  e.t.v.controller.ElectionController - Checking vote status for user maria.gonzalez in election election-001: hasVoted=false
2025-11-30 12:34:43.762 [tomcat-handler-5] INFO  e.t.v.controller.ElectionController - Checking vote status for user maria.gonzalez in election election-f9e4da2a: hasVoted=false
2025-11-30 12:34:43.762 [tomcat-handler-5] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 12:34:52.917 [tomcat-handler-6] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:34:52.918 [tomcat-handler-6] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:34:52.919 [tomcat-handler-6] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:34:52.922 [tomcat-handler-6] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 12:34:52.922 [tomcat-handler-6] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:34:52.924 [tomcat-handler-6] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:35:01.275 [tomcat-handler-7] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:35:01.277 [tomcat-handler-7] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:35:01.277 [tomcat-handler-7] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:35:01.280 [tomcat-handler-7] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:35:01.280 [tomcat-handler-7] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:35:01.292 [tomcat-handler-7] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:35:01.292 [tomcat-handler-7] INFO  e.t.v.controller.ElectionController - Checking vote status for user maria.gonzalez in election election-001: hasVoted=false
2025-11-30 12:35:01.292 [tomcat-handler-7] INFO  e.t.v.controller.ElectionController - Checking vote status for user maria.gonzalez in election election-f9e4da2a: hasVoted=false
2025-11-30 12:35:01.293 [tomcat-handler-7] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 12:36:48.864 [tomcat-handler-9] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:36:48.866 [tomcat-handler-9] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:36:48.867 [tomcat-handler-9] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:36:48.869 [tomcat-handler-9] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:36:48.869 [tomcat-handler-9] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:36:48.881 [tomcat-handler-9] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:36:48.881 [tomcat-handler-9] INFO  e.t.v.controller.ElectionController - Checking vote status for user maria.gonzalez in election election-001: hasVoted=false
2025-11-30 12:36:48.882 [tomcat-handler-9] INFO  e.t.v.controller.ElectionController - Checking vote status for user maria.gonzalez in election election-f9e4da2a: hasVoted=false
2025-11-30 12:36:48.882 [tomcat-handler-9] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 12:36:56.921 [tomcat-handler-10] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:36:56.937 [tomcat-handler-10] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:36:56.938 [tomcat-handler-10] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:36:56.985 [tomcat-handler-10] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:36:56.986 [tomcat-handler-10] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:36:56.987 [tomcat-handler-10] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:36:56.988 [tomcat-handler-10] INFO  e.t.v.controller.ElectionController - Checking vote status for user maria.gonzalez in election election-001: hasVoted=false
2025-11-30 12:36:56.988 [tomcat-handler-10] INFO  e.t.v.controller.ElectionController - Checking vote status for user maria.gonzalez in election election-f9e4da2a: hasVoted=false
2025-11-30 12:36:56.988 [tomcat-handler-10] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 12:37:00.955 [tomcat-handler-11] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:37:00.956 [tomcat-handler-11] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:37:00.957 [tomcat-handler-11] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:37:00.959 [tomcat-handler-11] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 12:37:00.959 [tomcat-handler-11] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:37:00.961 [tomcat-handler-11] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:37:03.961 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:37:03.963 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:37:03.964 [tomcat-handler-12] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:37:03.966 [tomcat-handler-12] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 12:37:03.967 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:37:03.979 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:37:10.925 [tomcat-handler-13] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:37:10.927 [tomcat-handler-13] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:37:10.932 [tomcat-handler-13] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:37:10.945 [tomcat-handler-13] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 12:37:10.946 [tomcat-handler-13] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:37:10.948 [tomcat-handler-13] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:37:20.104 [tomcat-handler-14] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:37:20.105 [tomcat-handler-14] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:37:20.107 [tomcat-handler-14] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:37:20.109 [tomcat-handler-14] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 12:37:20.109 [tomcat-handler-14] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:37:20.111 [tomcat-handler-14] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:37:32.793 [tomcat-handler-15] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:37:32.795 [tomcat-handler-15] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:37:32.809 [tomcat-handler-15] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:37:32.811 [tomcat-handler-15] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 12:37:32.812 [tomcat-handler-15] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:37:32.814 [tomcat-handler-15] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:37:52.865 [tomcat-handler-17] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:37:52.867 [tomcat-handler-17] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:37:52.867 [tomcat-handler-17] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:37:52.881 [tomcat-handler-17] INFO  e.t.v.controller.ElectionController - Vote submission for election: election-f9e4da2a
2025-11-30 12:37:52.882 [tomcat-handler-17] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:37:52.883 [tomcat-handler-17] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:37:52.886 [tomcat-handler-17] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: election-f9e4da2a (146 bytes)
2025-11-30 12:37:52.887 [tomcat-handler-17] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 146 bytes
2025-11-30 12:37:52.888 [tomcat-handler-17] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 174 bytes (IV: 12, encrypted: 162)
2025-11-30 12:37:52.888 [tomcat-handler-17] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 174 bytes
2025-11-30 12:37:52.889 [tomcat-handler-17] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-election-f9e4da2a-1764502672886-0604c7b9.enc
2025-11-30 12:37:52.889 [tomcat-handler-17] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 9190eb80934d6722ec8c3f0366f4d1680a0bc5e22d280989adcf1b6330a84b00
2025-11-30 12:37:52.889 [tomcat-handler-17] INFO  e.t.v.controller.ElectionController - Vote encrypted and stored: blobId=BLOB-election-f9e4da2a-1764502672886-0604c7b9
2025-11-30 12:37:52.889 [tomcat-handler-17] INFO  e.tfg.votacion.service.FabricService - Emitting vote commitment to blockchain - Election: election-f9e4da2a, Commitment: gr07CpbVukXS/aw3OTvbQzDje5Mr4cN2p5pkqtAztCw=
2025-11-30 12:37:54.152 [tomcat-handler-17] ERROR e.tfg.votacion.service.FabricService - Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-11-30 12:37:54.152 [tomcat-handler-17] WARN  e.tfg.votacion.service.FabricService - Attempt 1/3 for emitVote failed, retrying in 1000ms: Failed to submit vote transaction
2025-11-30 12:37:55.174 [tomcat-handler-17] ERROR e.tfg.votacion.service.FabricService - Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-11-30 12:37:55.175 [tomcat-handler-17] WARN  e.tfg.votacion.service.FabricService - Attempt 2/3 for emitVote failed, retrying in 2000ms: Failed to submit vote transaction
2025-11-30 12:37:57.196 [tomcat-handler-17] ERROR e.tfg.votacion.service.FabricService - Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-11-30 12:37:57.197 [tomcat-handler-17] ERROR e.tfg.votacion.service.FabricService - Operation emitVote failed after 3 attempts: Failed to submit vote transaction
2025-11-30 12:37:57.198 [tomcat-handler-17] ERROR e.t.v.controller.ElectionController - Error submitting vote
java.lang.RuntimeException: Operation failed after retries
	at es.tfg.votacion.service.FabricService.executeWithRetry(FabricService.java:442)
	at es.tfg.votacion.service.FabricService.emitVote(FabricService.java:206)
	at es.tfg.votacion.controller.ElectionController.emitVote(ElectionController.java:366)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at es.tfg.votacion.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:329)
Caused by: java.lang.RuntimeException: Failed to submit vote transaction
	at es.tfg.votacion.service.FabricService.lambda$6(FabricService.java:218)
	at es.tfg.votacion.service.FabricService.executeWithRetry(FabricService.java:428)
	... 106 common frames omitted
Caused by: org.hyperledger.fabric.client.EndorseException: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
	at org.hyperledger.fabric.client.GatewayClient.endorse(GatewayClient.java:73)
	at org.hyperledger.fabric.client.ProposalImpl.endorse(ProposalImpl.java:74)
	at org.hyperledger.fabric.client.Proposal.endorse(Proposal.java:65)
	at org.hyperledger.fabric.client.ContractImpl.submitTransaction(ContractImpl.java:47)
	at es.tfg.votacion.service.FabricService.lambda$6(FabricService.java:208)
	... 107 common frames omitted
Caused by: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
	at io.grpc.stub.ClientCalls.toStatusRuntimeException(ClientCalls.java:268)
	at io.grpc.stub.ClientCalls.getUnchecked(ClientCalls.java:249)
	at io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:167)
	at org.hyperledger.fabric.protos.gateway.GatewayGrpc$GatewayBlockingStub.endorse(GatewayGrpc.java:455)
	at org.hyperledger.fabric.client.GatewayClient.endorse(GatewayClient.java:71)
	... 111 common frames omitted
2025-11-30 12:40:06.043 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-30 12:40:06.045 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-30 12:40:06.053 [SpringApplicationShutdownHook] INFO  e.tfg.votacion.service.FabricService - Closing Fabric Gateway connection
2025-11-30 12:40:06.074 [SpringApplicationShutdownHook] INFO  e.t.votacion.service.StorageService - Shutting down Storage Service
2025-11-30 12:40:06.074 [SpringApplicationShutdownHook] DEBUG e.t.votacion.service.StorageService - Master key cleared from memory
2025-11-30 12:40:12.451 [main] INFO  es.tfg.votacion.Application - Starting Application using Java 21.0.9 with PID 1283022 (/home/ehuetadr/TFG/VotacionBC/backend-spring/target/classes started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-30 12:40:12.453 [main] DEBUG es.tfg.votacion.Application - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-30 12:40:12.454 [main] INFO  es.tfg.votacion.Application - No active profile set, falling back to 1 default profile: "default"
2025-11-30 12:40:14.439 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-30 12:40:14.456 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-30 12:40:14.457 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-30 12:40:14.514 [main] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring embedded WebApplicationContext
2025-11-30 12:40:14.515 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2018 ms
2025-11-30 12:40:14.569 [main] INFO  es.tfg.votacion.service.AuthService - Initializing Authentication Service (Mock Mode)
2025-11-30 12:40:14.569 [main] DEBUG es.tfg.votacion.service.AuthService - Loading mock users from: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-30 12:40:14.588 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: juan.perez (role: Votante (voter), active: true)
2025-11-30 12:40:14.589 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: maria.gonzalez (role: Votante (voter), active: true)
2025-11-30 12:40:14.590 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: admin (role: Administrador (admin), active: true)
2025-11-30 12:40:14.591 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: auditor (role: Auditor (auditor), active: true)
2025-11-30 12:40:14.592 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: carlos.martin (role: Votante (voter), active: true)
2025-11-30 12:40:14.592 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: ana.rodriguez (role: Votante (voter), active: true)
2025-11-30 12:40:14.593 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: pedro.lopez (role: Administrador (admin), active: true)
2025-11-30 12:40:14.593 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: lucia.garcia (role: Votante (voter), active: false)
2025-11-30 12:40:14.593 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: test.user (role: Votante (voter), active: true)
2025-11-30 12:40:14.593 [main] INFO  es.tfg.votacion.service.AuthService - Loaded 9 mock users from /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-30 12:40:14.597 [main] DEBUG es.tfg.votacion.service.AuthService - JWT signing key initialized with HS256 algorithm
2025-11-30 12:40:14.597 [main] INFO  es.tfg.votacion.service.AuthService - JWT signing key initialized successfully
2025-11-30 12:40:14.597 [main] DEBUG es.tfg.votacion.service.AuthService - JWT issuer: votacion-blockchain-poc
2025-11-30 12:40:14.597 [main] DEBUG es.tfg.votacion.service.AuthService - JWT audience: voting-system
2025-11-30 12:40:14.598 [main] DEBUG es.tfg.votacion.service.AuthService - JWT expiration: 3600 seconds
2025-11-30 12:40:14.598 [main] DEBUG es.tfg.votacion.service.AuthService - Allowed roles: [voter, admin, auditor]
2025-11-30 12:40:14.598 [main] WARN  es.tfg.votacion.service.AuthService - Running in MOCK authentication mode - not suitable for production!
2025-11-30 12:40:14.641 [main] DEBUG e.t.v.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-30 12:40:14.704 [main] INFO  e.t.votacion.service.StorageService - Initializing Storage Service with AES-GCM encryption
2025-11-30 12:40:14.705 [main] DEBUG e.t.votacion.service.StorageService - Loading encryption key from keystore: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/keystore/keystore.json
2025-11-30 12:40:14.709 [main] DEBUG e.t.votacion.service.StorageService - Keystore loaded - algorithm: AES/GCM/NoPadding, key length: 256 bits
2025-11-30 12:40:14.710 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded and validated successfully
2025-11-30 12:40:14.711 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded successfully from keystore
2025-11-30 12:40:14.712 [main] INFO  e.t.votacion.service.StorageService - Storage directory initialized: /home/ehuetadr/TFG/VotacionBC/backend-spring/data/storage
2025-11-30 12:40:14.712 [main] DEBUG e.t.votacion.service.StorageService - Encryption algorithm: AES/GCM/NoPadding
2025-11-30 12:40:14.712 [main] DEBUG e.t.votacion.service.StorageService - Key length: 256 bits
2025-11-30 12:40:14.712 [main] DEBUG e.t.votacion.service.StorageService - IV length: 12 bytes
2025-11-30 12:40:14.712 [main] DEBUG e.t.votacion.service.StorageService - Tag length: 128 bits
2025-11-30 12:40:14.712 [main] INFO  e.t.votacion.service.StorageService - Automatic cleanup enabled - retention: 30 days
2025-11-30 12:40:14.733 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-30 12:40:14.734 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-30 12:40:14.734 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /home/ehuetadr/TFG/VotacionBC/fabric/test-network/organizations/peerOrganizations/org1.example.com/connection-org1.json
2025-11-30 12:40:14.735 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /home/ehuetadr/TFG/VotacionBC/backend-spring/wallet
2025-11-30 12:40:14.735 [main] DEBUG e.tfg.votacion.service.FabricService - User: appUser
2025-11-30 12:40:14.735 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: electionchannel
2025-11-30 12:40:14.735 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: electioncc
2025-11-30 12:40:15.888 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Fabric network
2025-11-30 12:40:15.889 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-30 12:40:15.890 [main] INFO  e.t.votacion.service.ElectionService - Initializing ElectionService
2025-11-30 12:40:15.994 [main] INFO  e.t.votacion.service.ElectionService - Loaded 4 elections from disk
2025-11-30 12:40:15.579 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 7c248c5e-f0b6-4010-8dfb-c062c928cf24

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-30 12:40:15.591 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-30 12:40:15.646 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring Spring Security with JWT authentication
2025-11-30 12:40:15.648 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-30 12:40:15.686 [main] INFO  e.tfg.votacion.config.SecurityConfig - Spring Security configured successfully
2025-11-30 12:40:16.082 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-11-30 12:40:16.091 [main] INFO  es.tfg.votacion.Application - Started Application in 4.294 seconds (process running for 5.534)
2025-11-30 12:40:45.577 [tomcat-handler-0] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-30 12:40:45.579 [tomcat-handler-0] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-30 12:40:45.581 [tomcat-handler-0] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-11-30 12:40:45.692 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:40:45.835 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:40:45.838 [tomcat-handler-0] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:40:45.875 [tomcat-handler-0] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 12:40:45.876 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:40:45.877 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:40:53.030 [tomcat-handler-1] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:40:53.031 [tomcat-handler-1] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:40:53.032 [tomcat-handler-1] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:40:53.143 [tomcat-handler-1] INFO  e.t.v.controller.ElectionController - Vote submission for election: election-f9e4da2a
2025-11-30 12:40:53.143 [tomcat-handler-1] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:40:53.146 [tomcat-handler-1] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:40:53.154 [tomcat-handler-1] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: election-f9e4da2a (146 bytes)
2025-11-30 12:40:53.155 [tomcat-handler-1] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 146 bytes
2025-11-30 12:40:53.159 [tomcat-handler-1] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 174 bytes (IV: 12, encrypted: 162)
2025-11-30 12:40:53.159 [tomcat-handler-1] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 174 bytes
2025-11-30 12:40:53.160 [tomcat-handler-1] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-election-f9e4da2a-1764502853154-48aecfcd.enc
2025-11-30 12:40:53.161 [tomcat-handler-1] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: eadb3760530c6cf32b6ba84b50f7707cae97ea1074cfaf887fd3d7e82e5c5b7f
2025-11-30 12:40:53.171 [tomcat-handler-1] INFO  e.t.v.controller.ElectionController - Vote encrypted and stored: blobId=BLOB-election-f9e4da2a-1764502853154-48aecfcd
2025-11-30 12:40:53.173 [tomcat-handler-1] INFO  e.tfg.votacion.service.FabricService - Emitting vote commitment to blockchain - Election: election-f9e4da2a, Commitment: A62W2nHNTJjMLTskWryHJSbvDGLPkpBvzopFhfTAVn4=
2025-11-30 12:40:54.002 [tomcat-handler-1] ERROR e.tfg.votacion.service.FabricService - Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-11-30 12:40:54.003 [tomcat-handler-1] WARN  e.tfg.votacion.service.FabricService - Attempt 1/3 for emitVote failed, retrying in 1000ms: Failed to submit vote transaction
2025-11-30 12:40:55.028 [tomcat-handler-1] ERROR e.tfg.votacion.service.FabricService - Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-11-30 12:40:55.028 [tomcat-handler-1] WARN  e.tfg.votacion.service.FabricService - Attempt 2/3 for emitVote failed, retrying in 2000ms: Failed to submit vote transaction
2025-11-30 12:40:57.046 [tomcat-handler-1] ERROR e.tfg.votacion.service.FabricService - Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-11-30 12:40:57.047 [tomcat-handler-1] ERROR e.tfg.votacion.service.FabricService - Operation emitVote failed after 3 attempts: Failed to submit vote transaction
2025-11-30 12:40:57.047 [tomcat-handler-1] ERROR e.t.v.controller.ElectionController - Error submitting vote
java.lang.RuntimeException: Operation failed after retries: Failed to submit vote transaction
	at es.tfg.votacion.service.FabricService.executeWithRetry(FabricService.java:467)
	at es.tfg.votacion.service.FabricService.emitVote(FabricService.java:207)
	at es.tfg.votacion.controller.ElectionController.emitVote(ElectionController.java:366)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at es.tfg.votacion.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:329)
Caused by: java.lang.RuntimeException: Failed to submit vote transaction
	at es.tfg.votacion.service.FabricService.lambda$6(FabricService.java:219)
	at es.tfg.votacion.service.FabricService.executeWithRetry(FabricService.java:429)
	... 106 common frames omitted
Caused by: org.hyperledger.fabric.client.EndorseException: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
	at org.hyperledger.fabric.client.GatewayClient.endorse(GatewayClient.java:73)
	at org.hyperledger.fabric.client.ProposalImpl.endorse(ProposalImpl.java:74)
	at org.hyperledger.fabric.client.Proposal.endorse(Proposal.java:65)
	at org.hyperledger.fabric.client.ContractImpl.submitTransaction(ContractImpl.java:47)
	at es.tfg.votacion.service.FabricService.lambda$6(FabricService.java:209)
	... 107 common frames omitted
Caused by: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
	at io.grpc.stub.ClientCalls.toStatusRuntimeException(ClientCalls.java:268)
	at io.grpc.stub.ClientCalls.getUnchecked(ClientCalls.java:249)
	at io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:167)
	at org.hyperledger.fabric.protos.gateway.GatewayGrpc$GatewayBlockingStub.endorse(GatewayGrpc.java:455)
	at org.hyperledger.fabric.client.GatewayClient.endorse(GatewayClient.java:71)
	... 111 common frames omitted
2025-11-30 12:56:30.214 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-30 12:56:30.217 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-30 12:56:30.221 [SpringApplicationShutdownHook] INFO  e.tfg.votacion.service.FabricService - Closing Fabric Gateway connection
2025-11-30 12:56:30.239 [SpringApplicationShutdownHook] INFO  e.t.votacion.service.StorageService - Shutting down Storage Service
2025-11-30 12:56:30.240 [SpringApplicationShutdownHook] DEBUG e.t.votacion.service.StorageService - Master key cleared from memory
2025-11-30 12:57:11.784 [main] INFO  es.tfg.votacion.Application - Starting Application using Java 21.0.9 with PID 1291431 (/home/ehuetadr/TFG/VotacionBC/backend-spring/target/classes started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-30 12:57:11.785 [main] DEBUG es.tfg.votacion.Application - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-30 12:57:11.787 [main] INFO  es.tfg.votacion.Application - No active profile set, falling back to 1 default profile: "default"
2025-11-30 12:57:13.206 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-30 12:57:13.221 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-30 12:57:13.222 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-30 12:57:13.310 [main] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring embedded WebApplicationContext
2025-11-30 12:57:13.313 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1415 ms
2025-11-30 12:57:13.379 [main] INFO  es.tfg.votacion.service.AuthService - Initializing Authentication Service (Mock Mode)
2025-11-30 12:57:13.380 [main] DEBUG es.tfg.votacion.service.AuthService - Loading mock users from: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-30 12:57:13.403 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: juan.perez (role: Votante (voter), active: true)
2025-11-30 12:57:13.403 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: maria.gonzalez (role: Votante (voter), active: true)
2025-11-30 12:57:13.404 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: admin (role: Administrador (admin), active: true)
2025-11-30 12:57:13.404 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: auditor (role: Auditor (auditor), active: true)
2025-11-30 12:57:13.405 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: carlos.martin (role: Votante (voter), active: true)
2025-11-30 12:57:13.406 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: ana.rodriguez (role: Votante (voter), active: true)
2025-11-30 12:57:13.406 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: pedro.lopez (role: Administrador (admin), active: true)
2025-11-30 12:57:13.406 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: lucia.garcia (role: Votante (voter), active: false)
2025-11-30 12:57:13.406 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: test.user (role: Votante (voter), active: true)
2025-11-30 12:57:13.406 [main] INFO  es.tfg.votacion.service.AuthService - Loaded 9 mock users from /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-30 12:57:13.409 [main] DEBUG es.tfg.votacion.service.AuthService - JWT signing key initialized with HS256 algorithm
2025-11-30 12:57:13.411 [main] INFO  es.tfg.votacion.service.AuthService - JWT signing key initialized successfully
2025-11-30 12:57:13.419 [main] DEBUG es.tfg.votacion.service.AuthService - JWT issuer: votacion-blockchain-poc
2025-11-30 12:57:13.419 [main] DEBUG es.tfg.votacion.service.AuthService - JWT audience: voting-system
2025-11-30 12:57:13.419 [main] DEBUG es.tfg.votacion.service.AuthService - JWT expiration: 3600 seconds
2025-11-30 12:57:13.419 [main] DEBUG es.tfg.votacion.service.AuthService - Allowed roles: [voter, admin, auditor]
2025-11-30 12:57:13.420 [main] WARN  es.tfg.votacion.service.AuthService - Running in MOCK authentication mode - not suitable for production!
2025-11-30 12:57:13.504 [main] DEBUG e.t.v.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-30 12:57:13.670 [main] INFO  e.t.votacion.service.StorageService - Initializing Storage Service with AES-GCM encryption
2025-11-30 12:57:13.671 [main] DEBUG e.t.votacion.service.StorageService - Loading encryption key from keystore: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/keystore/keystore.json
2025-11-30 12:57:13.687 [main] DEBUG e.t.votacion.service.StorageService - Keystore loaded - algorithm: AES/GCM/NoPadding, key length: 256 bits
2025-11-30 12:57:13.687 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded and validated successfully
2025-11-30 12:57:13.688 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded successfully from keystore
2025-11-30 12:57:13.700 [main] INFO  e.t.votacion.service.StorageService - Storage directory initialized: /home/ehuetadr/TFG/VotacionBC/backend-spring/data/storage
2025-11-30 12:57:13.700 [main] DEBUG e.t.votacion.service.StorageService - Encryption algorithm: AES/GCM/NoPadding
2025-11-30 12:57:13.700 [main] DEBUG e.t.votacion.service.StorageService - Key length: 256 bits
2025-11-30 12:57:13.700 [main] DEBUG e.t.votacion.service.StorageService - IV length: 12 bytes
2025-11-30 12:57:13.700 [main] DEBUG e.t.votacion.service.StorageService - Tag length: 128 bits
2025-11-30 12:57:13.700 [main] INFO  e.t.votacion.service.StorageService - Automatic cleanup enabled - retention: 30 days
2025-11-30 12:57:13.789 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-30 12:57:13.790 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-30 12:57:13.790 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /home/ehuetadr/TFG/VotacionBC/fabric/test-network/organizations/peerOrganizations/org1.example.com/connection-org1.json
2025-11-30 12:57:13.790 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /home/ehuetadr/TFG/VotacionBC/backend-spring/wallet
2025-11-30 12:57:13.790 [main] DEBUG e.tfg.votacion.service.FabricService - User: appUser
2025-11-30 12:57:13.790 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: electionchannel
2025-11-30 12:57:13.790 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: electioncc
2025-11-30 12:57:13.723 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Fabric network
2025-11-30 12:57:13.724 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-30 12:57:13.725 [main] INFO  e.t.votacion.service.ElectionService - Initializing ElectionService
2025-11-30 12:57:13.818 [main] INFO  e.t.votacion.service.ElectionService - Loaded 4 elections from disk
2025-11-30 12:57:14.282 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: ae194595-7244-4c1d-b94b-2a9a1ba50aac

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-30 12:57:14.289 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-30 12:57:14.333 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring Spring Security with JWT authentication
2025-11-30 12:57:14.335 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-30 12:57:14.370 [main] INFO  e.tfg.votacion.config.SecurityConfig - Spring Security configured successfully
2025-11-30 12:57:14.757 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-11-30 12:57:14.771 [main] INFO  es.tfg.votacion.Application - Started Application in 3.606 seconds (process running for 4.871)
2025-11-30 12:57:48.396 [tomcat-handler-0] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-30 12:57:48.400 [tomcat-handler-0] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-30 12:57:48.404 [tomcat-handler-0] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-11-30 12:57:48.477 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:57:48.606 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:57:48.608 [tomcat-handler-0] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:57:48.648 [tomcat-handler-0] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 12:57:48.649 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:57:48.651 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:58:01.320 [tomcat-handler-1] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:58:01.321 [tomcat-handler-1] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:58:01.322 [tomcat-handler-1] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:58:01.422 [tomcat-handler-1] INFO  e.t.v.controller.ElectionController - Vote submission for election: election-f9e4da2a
2025-11-30 12:58:01.423 [tomcat-handler-1] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 12:58:01.424 [tomcat-handler-1] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:58:01.430 [tomcat-handler-1] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: election-f9e4da2a (146 bytes)
2025-11-30 12:58:01.431 [tomcat-handler-1] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 146 bytes
2025-11-30 12:58:01.434 [tomcat-handler-1] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 174 bytes (IV: 12, encrypted: 162)
2025-11-30 12:58:01.436 [tomcat-handler-1] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 174 bytes
2025-11-30 12:58:01.438 [tomcat-handler-1] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-election-f9e4da2a-1764503881430-8645c2e7.enc
2025-11-30 12:58:01.438 [tomcat-handler-1] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 2a967ba4ce2ed4de0eeaf21183bc67da1b8095189010d66ca4d4073c224cd3a9
2025-11-30 12:58:01.438 [tomcat-handler-1] INFO  e.t.v.controller.ElectionController - Vote encrypted and stored: blobId=BLOB-election-f9e4da2a-1764503881430-8645c2e7
2025-11-30 12:58:01.439 [tomcat-handler-1] INFO  e.tfg.votacion.service.FabricService - Emitting vote commitment to blockchain - Election: election-f9e4da2a, Commitment: vp0nDVYIXr1eN8Bc6oY6rMCw3UbETFzYoLlEEDlf9So=
2025-11-30 12:58:02.215 [tomcat-handler-1] ERROR e.tfg.votacion.service.FabricService - Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-11-30 12:58:02.216 [tomcat-handler-1] WARN  e.tfg.votacion.service.FabricService - Attempt 1/3 for emitVote failed, retrying in 1000ms: Failed to submit vote transaction
2025-11-30 12:58:03.236 [tomcat-handler-1] ERROR e.tfg.votacion.service.FabricService - Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-11-30 12:58:03.236 [tomcat-handler-1] WARN  e.tfg.votacion.service.FabricService - Attempt 2/3 for emitVote failed, retrying in 2000ms: Failed to submit vote transaction
2025-11-30 12:58:05.253 [tomcat-handler-1] ERROR e.tfg.votacion.service.FabricService - Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-11-30 12:58:05.253 [tomcat-handler-1] ERROR e.tfg.votacion.service.FabricService - Operation emitVote failed after 3 attempts: Failed to submit vote transaction
2025-11-30 12:58:05.253 [tomcat-handler-1] ERROR e.t.v.controller.ElectionController - Error submitting vote
java.lang.RuntimeException: Operation failed after retries: Failed to submit vote transaction
	at es.tfg.votacion.service.FabricService.executeWithRetry(FabricService.java:467)
	at es.tfg.votacion.service.FabricService.emitVote(FabricService.java:207)
	at es.tfg.votacion.controller.ElectionController.emitVote(ElectionController.java:366)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at es.tfg.votacion.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:329)
Caused by: java.lang.RuntimeException: Failed to submit vote transaction
	at es.tfg.votacion.service.FabricService.lambda$6(FabricService.java:219)
	at es.tfg.votacion.service.FabricService.executeWithRetry(FabricService.java:429)
	... 106 common frames omitted
Caused by: org.hyperledger.fabric.client.EndorseException: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
	at org.hyperledger.fabric.client.GatewayClient.endorse(GatewayClient.java:73)
	at org.hyperledger.fabric.client.ProposalImpl.endorse(ProposalImpl.java:74)
	at org.hyperledger.fabric.client.Proposal.endorse(Proposal.java:65)
	at org.hyperledger.fabric.client.ContractImpl.submitTransaction(ContractImpl.java:47)
	at es.tfg.votacion.service.FabricService.lambda$6(FabricService.java:209)
	... 107 common frames omitted
Caused by: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
	at io.grpc.stub.ClientCalls.toStatusRuntimeException(ClientCalls.java:268)
	at io.grpc.stub.ClientCalls.getUnchecked(ClientCalls.java:249)
	at io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:167)
	at org.hyperledger.fabric.protos.gateway.GatewayGrpc$GatewayBlockingStub.endorse(GatewayGrpc.java:455)
	at org.hyperledger.fabric.client.GatewayClient.endorse(GatewayClient.java:71)
	... 111 common frames omitted
2025-11-30 12:59:11.834 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-30 12:59:11.837 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-30 12:59:11.842 [SpringApplicationShutdownHook] INFO  e.tfg.votacion.service.FabricService - Closing Fabric Gateway connection
2025-11-30 12:59:11.854 [SpringApplicationShutdownHook] INFO  e.t.votacion.service.StorageService - Shutting down Storage Service
2025-11-30 12:59:11.854 [SpringApplicationShutdownHook] DEBUG e.t.votacion.service.StorageService - Master key cleared from memory
2025-11-30 13:00:09.700 [main] INFO  es.tfg.votacion.Application - Starting Application using Java 21.0.9 with PID 1293338 (/home/ehuetadr/TFG/VotacionBC/backend-spring/target/classes started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-30 13:00:09.702 [main] DEBUG es.tfg.votacion.Application - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-30 13:00:09.703 [main] INFO  es.tfg.votacion.Application - No active profile set, falling back to 1 default profile: "default"
2025-11-30 13:00:11.035 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-30 13:00:11.053 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-30 13:00:11.054 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-30 13:00:11.120 [main] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring embedded WebApplicationContext
2025-11-30 13:00:11.121 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1372 ms
2025-11-30 13:00:11.177 [main] INFO  es.tfg.votacion.service.AuthService - Initializing Authentication Service (Mock Mode)
2025-11-30 13:00:11.177 [main] DEBUG es.tfg.votacion.service.AuthService - Loading mock users from: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-30 13:00:11.196 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: juan.perez (role: Votante (voter), active: true)
2025-11-30 13:00:11.197 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: maria.gonzalez (role: Votante (voter), active: true)
2025-11-30 13:00:11.198 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: admin (role: Administrador (admin), active: true)
2025-11-30 13:00:11.199 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: auditor (role: Auditor (auditor), active: true)
2025-11-30 13:00:11.199 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: carlos.martin (role: Votante (voter), active: true)
2025-11-30 13:00:11.199 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: ana.rodriguez (role: Votante (voter), active: true)
2025-11-30 13:00:11.200 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: pedro.lopez (role: Administrador (admin), active: true)
2025-11-30 13:00:11.200 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: lucia.garcia (role: Votante (voter), active: false)
2025-11-30 13:00:11.200 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: test.user (role: Votante (voter), active: true)
2025-11-30 13:00:11.201 [main] INFO  es.tfg.votacion.service.AuthService - Loaded 9 mock users from /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-30 13:00:11.206 [main] DEBUG es.tfg.votacion.service.AuthService - JWT signing key initialized with HS256 algorithm
2025-11-30 13:00:11.206 [main] INFO  es.tfg.votacion.service.AuthService - JWT signing key initialized successfully
2025-11-30 13:00:11.206 [main] DEBUG es.tfg.votacion.service.AuthService - JWT issuer: votacion-blockchain-poc
2025-11-30 13:00:11.206 [main] DEBUG es.tfg.votacion.service.AuthService - JWT audience: voting-system
2025-11-30 13:00:11.207 [main] DEBUG es.tfg.votacion.service.AuthService - JWT expiration: 3600 seconds
2025-11-30 13:00:11.207 [main] DEBUG es.tfg.votacion.service.AuthService - Allowed roles: [voter, admin, auditor]
2025-11-30 13:00:11.207 [main] WARN  es.tfg.votacion.service.AuthService - Running in MOCK authentication mode - not suitable for production!
2025-11-30 13:00:11.262 [main] DEBUG e.t.v.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-30 13:00:11.376 [main] INFO  e.t.votacion.service.StorageService - Initializing Storage Service with AES-GCM encryption
2025-11-30 13:00:11.377 [main] DEBUG e.t.votacion.service.StorageService - Loading encryption key from keystore: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/keystore/keystore.json
2025-11-30 13:00:11.382 [main] DEBUG e.t.votacion.service.StorageService - Keystore loaded - algorithm: AES/GCM/NoPadding, key length: 256 bits
2025-11-30 13:00:11.385 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded and validated successfully
2025-11-30 13:00:11.386 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded successfully from keystore
2025-11-30 13:00:11.386 [main] INFO  e.t.votacion.service.StorageService - Storage directory initialized: /home/ehuetadr/TFG/VotacionBC/backend-spring/data/storage
2025-11-30 13:00:11.387 [main] DEBUG e.t.votacion.service.StorageService - Encryption algorithm: AES/GCM/NoPadding
2025-11-30 13:00:11.388 [main] DEBUG e.t.votacion.service.StorageService - Key length: 256 bits
2025-11-30 13:00:11.388 [main] DEBUG e.t.votacion.service.StorageService - IV length: 12 bytes
2025-11-30 13:00:11.388 [main] DEBUG e.t.votacion.service.StorageService - Tag length: 128 bits
2025-11-30 13:00:11.388 [main] INFO  e.t.votacion.service.StorageService - Automatic cleanup enabled - retention: 30 days
2025-11-30 13:00:11.416 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-30 13:00:11.416 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-30 13:00:11.417 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /home/ehuetadr/TFG/VotacionBC/fabric/test-network/organizations/peerOrganizations/org1.example.com/connection-org1.json
2025-11-30 13:00:11.417 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /home/ehuetadr/TFG/VotacionBC/backend-spring/wallet
2025-11-30 13:00:11.417 [main] DEBUG e.tfg.votacion.service.FabricService - User: appUser
2025-11-30 13:00:11.417 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: electionchannel
2025-11-30 13:00:11.417 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: electioncc
2025-11-30 13:00:12.254 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Fabric network
2025-11-30 13:00:12.255 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-30 13:00:12.256 [main] INFO  e.t.votacion.service.ElectionService - Initializing ElectionService
2025-11-30 13:00:12.359 [main] INFO  e.t.votacion.service.ElectionService - Loaded 4 elections from disk
2025-11-30 13:00:12.787 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: f1c49061-ccf1-458b-bdee-125552a62b12

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-30 13:00:12.795 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-30 13:00:12.903 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring Spring Security with JWT authentication
2025-11-30 13:00:12.904 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-30 13:00:13.017 [main] INFO  e.tfg.votacion.config.SecurityConfig - Spring Security configured successfully
2025-11-30 13:00:13.450 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-11-30 13:00:13.460 [main] INFO  es.tfg.votacion.Application - Started Application in 4.434 seconds (process running for 4.894)
2025-11-30 13:00:28.581 [tomcat-handler-0] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-30 13:00:28.582 [tomcat-handler-0] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-30 13:00:28.584 [tomcat-handler-0] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-11-30 13:00:28.647 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:00:28.787 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 13:00:28.791 [tomcat-handler-0] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:00:28.834 [tomcat-handler-0] INFO  e.t.v.controller.AuthController - User logged out: maria.gonzalez from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:00:36.457 [tomcat-handler-1] INFO  e.t.v.controller.AuthController - Login attempt for user: maria.gonzalez from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:00:36.458 [tomcat-handler-1] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: maria.gonzalez
2025-11-30 13:00:36.571 [tomcat-handler-1] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: maria.gonzalez (role: Votante (voter))
2025-11-30 13:00:36.571 [tomcat-handler-1] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: maria.gonzalez
2025-11-30 13:00:36.604 [tomcat-handler-1] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: maria.gonzalez (expires: Sun Nov 30 14:00:36 CET 2025)
2025-11-30 13:00:36.606 [tomcat-handler-1] INFO  e.t.v.controller.AuthController - User authenticated successfully: maria.gonzalez (role: Votante)
2025-11-30 13:00:36.704 [tomcat-handler-2] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:00:36.706 [tomcat-handler-2] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 13:00:36.706 [tomcat-handler-2] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:00:36.709 [tomcat-handler-2] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:00:36.709 [tomcat-handler-2] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:00:36.711 [tomcat-handler-2] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 13:00:36.722 [tomcat-handler-2] INFO  e.t.v.controller.ElectionController - Checking vote status for user maria.gonzalez in election election-001: hasVoted=false
2025-11-30 13:00:36.723 [tomcat-handler-2] INFO  e.t.v.controller.ElectionController - Checking vote status for user maria.gonzalez in election election-f9e4da2a: hasVoted=false
2025-11-30 13:00:36.724 [tomcat-handler-2] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 13:00:50.669 [tomcat-handler-3] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:00:50.671 [tomcat-handler-3] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 13:00:50.672 [tomcat-handler-3] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:00:50.676 [tomcat-handler-3] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 13:00:50.677 [tomcat-handler-3] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:00:50.678 [tomcat-handler-3] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 13:00:57.279 [tomcat-handler-4] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:00:57.281 [tomcat-handler-4] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 13:00:57.281 [tomcat-handler-4] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:00:57.295 [tomcat-handler-4] INFO  e.t.v.controller.ElectionController - Vote submission for election: election-f9e4da2a
2025-11-30 13:00:57.296 [tomcat-handler-4] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:00:57.297 [tomcat-handler-4] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 13:00:57.299 [tomcat-handler-4] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: election-f9e4da2a (146 bytes)
2025-11-30 13:00:57.299 [tomcat-handler-4] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 146 bytes
2025-11-30 13:00:57.303 [tomcat-handler-4] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 174 bytes (IV: 12, encrypted: 162)
2025-11-30 13:00:57.306 [tomcat-handler-4] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 174 bytes
2025-11-30 13:00:57.313 [tomcat-handler-4] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-election-f9e4da2a-1764504057299-a6e015b4.enc
2025-11-30 13:00:57.314 [tomcat-handler-4] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: c44a8867a86a4519f72ac10014c9db2de9e47478d98b8b178a203d09920d6275
2025-11-30 13:00:57.314 [tomcat-handler-4] INFO  e.t.v.controller.ElectionController - Vote encrypted and stored: blobId=BLOB-election-f9e4da2a-1764504057299-a6e015b4
2025-11-30 13:00:57.314 [tomcat-handler-4] INFO  e.tfg.votacion.service.FabricService - Emitting vote commitment to blockchain - Election: election-f9e4da2a, Commitment: MNZmLQpIZARq6MrA2knYwN7FCWq8qolaOwu49FMVN1M=
2025-11-30 13:00:58.175 [tomcat-handler-4] ERROR e.tfg.votacion.service.FabricService - Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-11-30 13:00:58.237 [tomcat-handler-4] ERROR e.tfg.votacion.service.FabricService - EndorseException details: chaincode response 500, User x509::CN=User1@org1.example.com, OU=client, L=San Francisco, ST=California, C=US::CN=ca.org1.example.com, O=org1.example.com, L=San Francisco, ST=California, C=US has already voted in election election-f9e4da2a; 
2025-11-30 13:00:58.238 [tomcat-handler-4] ERROR e.tfg.votacion.service.FabricService - Non-retriable error in emitVote: chaincode response 500, User x509::CN=User1@org1.example.com, OU=client, L=San Francisco, ST=California, C=US::CN=ca.org1.example.com, O=org1.example.com, L=San Francisco, ST=California, C=US has already voted in election election-f9e4da2a; 
2025-11-30 13:00:58.238 [tomcat-handler-4] WARN  e.t.v.controller.ElectionController - User maria.gonzalez already voted in election election-f9e4da2a on blockchain. Syncing local state.
2025-11-30 13:00:58.239 [tomcat-handler-4] INFO  e.t.votacion.service.ElectionService - Vote registered: electionId=election-f9e4da2a, userId=user_maria.gonzalez_002, optionId=opt-1
2025-11-30 13:00:58.285 [tomcat-handler-4] INFO  e.t.votacion.service.ElectionService - Data saved to disk
2025-11-30 13:01:00.424 [tomcat-handler-5] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:01:00.426 [tomcat-handler-5] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 13:01:00.427 [tomcat-handler-5] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:01:00.441 [tomcat-handler-5] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 13:01:00.441 [tomcat-handler-5] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:01:00.442 [tomcat-handler-5] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 13:01:05.271 [tomcat-handler-6] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:01:05.272 [tomcat-handler-6] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 13:01:05.272 [tomcat-handler-6] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:01:05.274 [tomcat-handler-6] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:01:05.274 [tomcat-handler-6] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:01:05.275 [tomcat-handler-6] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 13:01:05.275 [tomcat-handler-6] INFO  e.t.v.controller.ElectionController - Checking vote status for user maria.gonzalez in election election-001: hasVoted=false
2025-11-30 13:01:05.276 [tomcat-handler-6] INFO  e.t.v.controller.ElectionController - Checking vote status for user maria.gonzalez in election election-f9e4da2a: hasVoted=true
2025-11-30 13:01:05.276 [tomcat-handler-6] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 13:01:08.958 [tomcat-handler-7] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:01:08.960 [tomcat-handler-7] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 13:01:08.961 [tomcat-handler-7] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:01:08.967 [tomcat-handler-7] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 13:01:08.967 [tomcat-handler-7] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:01:08.969 [tomcat-handler-7] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 13:01:16.564 [tomcat-handler-8] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:01:16.565 [tomcat-handler-8] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-30 13:01:16.566 [tomcat-handler-8] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:01:16.567 [tomcat-handler-8] INFO  e.t.v.controller.AuthController - User logged out: maria.gonzalez from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:01:31.832 [tomcat-handler-9] INFO  e.t.v.controller.AuthController - Login attempt for user: carlos.martin from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:01:31.832 [tomcat-handler-9] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: carlos.martin
2025-11-30 13:01:31.949 [tomcat-handler-9] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: carlos.martin (role: Votante (voter))
2025-11-30 13:01:31.949 [tomcat-handler-9] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: carlos.martin
2025-11-30 13:01:31.952 [tomcat-handler-9] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: carlos.martin (expires: Sun Nov 30 14:01:31 CET 2025)
2025-11-30 13:01:31.953 [tomcat-handler-9] INFO  e.t.v.controller.AuthController - User authenticated successfully: carlos.martin (role: Votante)
2025-11-30 13:01:32.032 [tomcat-handler-10] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:01:32.034 [tomcat-handler-10] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: carlos.martin
2025-11-30 13:01:32.035 [tomcat-handler-10] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'carlos.martin' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:01:32.041 [tomcat-handler-10] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:01:32.042 [tomcat-handler-10] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:01:32.043 [tomcat-handler-10] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: carlos.martin
2025-11-30 13:01:32.044 [tomcat-handler-10] INFO  e.t.v.controller.ElectionController - Checking vote status for user carlos.martin in election election-001: hasVoted=false
2025-11-30 13:01:32.044 [tomcat-handler-10] INFO  e.t.v.controller.ElectionController - Checking vote status for user carlos.martin in election election-f9e4da2a: hasVoted=false
2025-11-30 13:01:32.044 [tomcat-handler-10] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 13:01:37.139 [tomcat-handler-11] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:01:37.141 [tomcat-handler-11] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: carlos.martin
2025-11-30 13:01:37.141 [tomcat-handler-11] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'carlos.martin' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:01:37.143 [tomcat-handler-11] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 13:01:37.144 [tomcat-handler-11] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:01:37.151 [tomcat-handler-11] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: carlos.martin
2025-11-30 13:01:42.089 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:01:42.090 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: carlos.martin
2025-11-30 13:01:42.091 [tomcat-handler-12] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'carlos.martin' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:01:42.096 [tomcat-handler-12] INFO  e.t.v.controller.ElectionController - Vote submission for election: election-f9e4da2a
2025-11-30 13:01:42.096 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:01:42.098 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: carlos.martin
2025-11-30 13:01:42.099 [tomcat-handler-12] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: election-f9e4da2a (145 bytes)
2025-11-30 13:01:42.100 [tomcat-handler-12] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 145 bytes
2025-11-30 13:01:42.100 [tomcat-handler-12] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 173 bytes (IV: 12, encrypted: 161)
2025-11-30 13:01:42.102 [tomcat-handler-12] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 173 bytes
2025-11-30 13:01:42.104 [tomcat-handler-12] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-election-f9e4da2a-1764504102099-314c79b2.enc
2025-11-30 13:01:42.105 [tomcat-handler-12] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 52d10cafd51b43f6d9f856285cb1bc14d1402e538bb92728d60c1f952bf70fad
2025-11-30 13:01:42.105 [tomcat-handler-12] INFO  e.t.v.controller.ElectionController - Vote encrypted and stored: blobId=BLOB-election-f9e4da2a-1764504102099-314c79b2
2025-11-30 13:01:42.106 [tomcat-handler-12] INFO  e.tfg.votacion.service.FabricService - Emitting vote commitment to blockchain - Election: election-f9e4da2a, Commitment: YQh5LWeQSjjSYnL3xDRzrEbXkrp5OP+x6i+y7OmkX+k=
2025-11-30 13:01:42.144 [tomcat-handler-12] ERROR e.tfg.votacion.service.FabricService - Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-11-30 13:01:42.145 [tomcat-handler-12] ERROR e.tfg.votacion.service.FabricService - EndorseException details: chaincode response 500, User x509::CN=User1@org1.example.com, OU=client, L=San Francisco, ST=California, C=US::CN=ca.org1.example.com, O=org1.example.com, L=San Francisco, ST=California, C=US has already voted in election election-f9e4da2a; 
2025-11-30 13:01:42.145 [tomcat-handler-12] ERROR e.tfg.votacion.service.FabricService - Non-retriable error in emitVote: chaincode response 500, User x509::CN=User1@org1.example.com, OU=client, L=San Francisco, ST=California, C=US::CN=ca.org1.example.com, O=org1.example.com, L=San Francisco, ST=California, C=US has already voted in election election-f9e4da2a; 
2025-11-30 13:01:42.145 [tomcat-handler-12] WARN  e.t.v.controller.ElectionController - User carlos.martin already voted in election election-f9e4da2a on blockchain. Syncing local state.
2025-11-30 13:01:42.145 [tomcat-handler-12] INFO  e.t.votacion.service.ElectionService - Vote registered: electionId=election-f9e4da2a, userId=user_carlos.martin_005, optionId=opt-2
2025-11-30 13:01:42.146 [tomcat-handler-12] INFO  e.t.votacion.service.ElectionService - Data saved to disk
2025-11-30 13:01:44.236 [tomcat-handler-13] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:01:44.237 [tomcat-handler-13] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: carlos.martin
2025-11-30 13:01:44.237 [tomcat-handler-13] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'carlos.martin' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:01:44.239 [tomcat-handler-13] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 13:01:44.239 [tomcat-handler-13] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:01:44.240 [tomcat-handler-13] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: carlos.martin
2025-11-30 13:02:00.960 [tomcat-handler-14] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:02:00.961 [tomcat-handler-14] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: carlos.martin
2025-11-30 13:02:00.961 [tomcat-handler-14] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'carlos.martin' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:02:00.963 [tomcat-handler-14] INFO  e.t.v.controller.AuthController - User logged out: carlos.martin from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:03:02.724 [tomcat-handler-16] INFO  e.t.v.controller.AuthController - Login attempt for user: ana.rodriguez from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:03:02.725 [tomcat-handler-16] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: ana.rodriguez
2025-11-30 13:03:02.838 [tomcat-handler-16] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: ana.rodriguez (role: Votante (voter))
2025-11-30 13:03:02.839 [tomcat-handler-16] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: ana.rodriguez
2025-11-30 13:03:02.840 [tomcat-handler-16] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: ana.rodriguez (expires: Sun Nov 30 14:03:02 CET 2025)
2025-11-30 13:03:02.840 [tomcat-handler-16] INFO  e.t.v.controller.AuthController - User authenticated successfully: ana.rodriguez (role: Votante)
2025-11-30 13:03:02.925 [tomcat-handler-17] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:03:02.927 [tomcat-handler-17] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: ana.rodriguez
2025-11-30 13:03:02.927 [tomcat-handler-17] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'ana.rodriguez' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:03:02.928 [tomcat-handler-17] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:03:02.928 [tomcat-handler-17] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:03:02.929 [tomcat-handler-17] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: ana.rodriguez
2025-11-30 13:03:02.930 [tomcat-handler-17] INFO  e.t.v.controller.ElectionController - Checking vote status for user ana.rodriguez in election election-001: hasVoted=false
2025-11-30 13:03:02.930 [tomcat-handler-17] INFO  e.t.v.controller.ElectionController - Checking vote status for user ana.rodriguez in election election-f9e4da2a: hasVoted=false
2025-11-30 13:03:02.931 [tomcat-handler-17] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 13:03:16.235 [tomcat-handler-18] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:03:16.236 [tomcat-handler-18] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: ana.rodriguez
2025-11-30 13:03:16.237 [tomcat-handler-18] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'ana.rodriguez' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:03:16.239 [tomcat-handler-18] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 13:03:16.239 [tomcat-handler-18] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:03:16.240 [tomcat-handler-18] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: ana.rodriguez
2025-11-30 13:03:21.646 [tomcat-handler-19] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:03:21.647 [tomcat-handler-19] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: ana.rodriguez
2025-11-30 13:03:21.647 [tomcat-handler-19] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'ana.rodriguez' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:03:21.650 [tomcat-handler-19] INFO  e.t.v.controller.ElectionController - Vote submission for election: election-f9e4da2a
2025-11-30 13:03:21.650 [tomcat-handler-19] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:03:21.656 [tomcat-handler-19] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: ana.rodriguez
2025-11-30 13:03:21.661 [tomcat-handler-19] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: election-f9e4da2a (145 bytes)
2025-11-30 13:03:21.661 [tomcat-handler-19] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 145 bytes
2025-11-30 13:03:21.662 [tomcat-handler-19] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 173 bytes (IV: 12, encrypted: 161)
2025-11-30 13:03:21.662 [tomcat-handler-19] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 173 bytes
2025-11-30 13:03:21.663 [tomcat-handler-19] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-election-f9e4da2a-1764504201661-2c805168.enc
2025-11-30 13:03:21.663 [tomcat-handler-19] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 0d664409ffdd20747526605288cf54ec1aaac79a73e1aa6c6fc9aa2714ccfb59
2025-11-30 13:03:21.663 [tomcat-handler-19] INFO  e.t.v.controller.ElectionController - Vote encrypted and stored: blobId=BLOB-election-f9e4da2a-1764504201661-2c805168
2025-11-30 13:03:21.663 [tomcat-handler-19] INFO  e.tfg.votacion.service.FabricService - Emitting vote commitment to blockchain - Election: election-f9e4da2a, Commitment: AzFz/oCoYEIrV6WNBGQpu7TwsAvPYtH2+pPXnrG6bcE=
2025-11-30 13:03:21.693 [tomcat-handler-19] ERROR e.tfg.votacion.service.FabricService - Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-11-30 13:03:21.698 [tomcat-handler-19] ERROR e.tfg.votacion.service.FabricService - EndorseException details: chaincode response 500, User x509::CN=User1@org1.example.com, OU=client, L=San Francisco, ST=California, C=US::CN=ca.org1.example.com, O=org1.example.com, L=San Francisco, ST=California, C=US has already voted in election election-f9e4da2a; 
2025-11-30 13:03:21.698 [tomcat-handler-19] ERROR e.tfg.votacion.service.FabricService - Non-retriable error in emitVote: chaincode response 500, User x509::CN=User1@org1.example.com, OU=client, L=San Francisco, ST=California, C=US::CN=ca.org1.example.com, O=org1.example.com, L=San Francisco, ST=California, C=US has already voted in election election-f9e4da2a; 
2025-11-30 13:03:21.699 [tomcat-handler-19] WARN  e.t.v.controller.ElectionController - User ana.rodriguez already voted in election election-f9e4da2a on blockchain. Syncing local state.
2025-11-30 13:03:21.699 [tomcat-handler-19] INFO  e.t.votacion.service.ElectionService - Vote registered: electionId=election-f9e4da2a, userId=user_ana.rodriguez_006, optionId=opt-1
2025-11-30 13:03:21.700 [tomcat-handler-19] INFO  e.t.votacion.service.ElectionService - Data saved to disk
2025-11-30 13:03:23.832 [tomcat-handler-20] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:03:23.833 [tomcat-handler-20] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: ana.rodriguez
2025-11-30 13:03:23.834 [tomcat-handler-20] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'ana.rodriguez' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:03:23.835 [tomcat-handler-20] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 13:03:23.836 [tomcat-handler-20] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:03:23.837 [tomcat-handler-20] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: ana.rodriguez
2025-11-30 13:05:24.589 [tomcat-handler-22] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:05:24.591 [tomcat-handler-22] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: ana.rodriguez
2025-11-30 13:05:24.591 [tomcat-handler-22] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'ana.rodriguez' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:05:24.592 [tomcat-handler-22] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:05:24.593 [tomcat-handler-22] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:05:24.594 [tomcat-handler-22] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: ana.rodriguez
2025-11-30 13:05:24.594 [tomcat-handler-22] INFO  e.t.v.controller.ElectionController - Checking vote status for user ana.rodriguez in election election-001: hasVoted=false
2025-11-30 13:05:24.595 [tomcat-handler-22] INFO  e.t.v.controller.ElectionController - Checking vote status for user ana.rodriguez in election election-f9e4da2a: hasVoted=true
2025-11-30 13:05:24.595 [tomcat-handler-22] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 13:06:19.352 [tomcat-handler-23] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:06:19.354 [tomcat-handler-23] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: ana.rodriguez
2025-11-30 13:06:19.354 [tomcat-handler-23] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'ana.rodriguez' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:06:19.356 [tomcat-handler-23] INFO  e.t.v.controller.AuthController - User logged out: ana.rodriguez from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:06:37.384 [tomcat-handler-24] INFO  e.t.v.controller.AuthController - Login attempt for user: admin from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:06:37.384 [tomcat-handler-24] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: admin
2025-11-30 13:06:37.495 [tomcat-handler-24] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: admin (role: Administrador (admin))
2025-11-30 13:06:37.495 [tomcat-handler-24] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: admin
2025-11-30 13:06:37.496 [tomcat-handler-24] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: admin (expires: Sun Nov 30 14:06:37 CET 2025)
2025-11-30 13:06:37.496 [tomcat-handler-24] INFO  e.t.v.controller.AuthController - User authenticated successfully: admin (role: Administrador)
2025-11-30 13:06:46.829 [tomcat-handler-25] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:06:46.831 [tomcat-handler-25] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:06:46.832 [tomcat-handler-25] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:06:46.833 [tomcat-handler-25] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:06:46.833 [tomcat-handler-25] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:06:46.835 [tomcat-handler-25] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:06:46.835 [tomcat-handler-25] INFO  e.t.v.controller.ElectionController - Checking vote status for user admin in election election-001: hasVoted=false
2025-11-30 13:06:46.835 [tomcat-handler-25] INFO  e.t.v.controller.ElectionController - Checking vote status for user admin in election election-f9e4da2a: hasVoted=false
2025-11-30 13:06:46.836 [tomcat-handler-25] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 13:06:56.525 [tomcat-handler-26] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:06:56.528 [tomcat-handler-26] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:06:56.529 [tomcat-handler-26] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:06:56.530 [tomcat-handler-26] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:06:56.530 [tomcat-handler-26] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:06:56.531 [tomcat-handler-26] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:06:56.532 [tomcat-handler-26] INFO  e.t.v.controller.ElectionController - Checking vote status for user admin in election election-001: hasVoted=false
2025-11-30 13:06:56.532 [tomcat-handler-26] INFO  e.t.v.controller.ElectionController - Checking vote status for user admin in election election-f9e4da2a: hasVoted=false
2025-11-30 13:06:56.532 [tomcat-handler-26] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 13:07:04.605 [tomcat-handler-27] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:07:04.606 [tomcat-handler-27] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:07:04.606 [tomcat-handler-27] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:07:04.608 [tomcat-handler-27] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:07:04.608 [tomcat-handler-27] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:07:04.609 [tomcat-handler-27] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:07:04.610 [tomcat-handler-27] INFO  e.t.v.controller.ElectionController - Checking vote status for user admin in election election-001: hasVoted=false
2025-11-30 13:07:04.610 [tomcat-handler-27] INFO  e.t.v.controller.ElectionController - Checking vote status for user admin in election election-f9e4da2a: hasVoted=false
2025-11-30 13:07:04.610 [tomcat-handler-27] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 13:07:11.998 [tomcat-handler-28] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:07:11.999 [tomcat-handler-28] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:07:11.999 [tomcat-handler-28] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:07:12.001 [tomcat-handler-28] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 13:07:12.001 [tomcat-handler-28] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:07:12.002 [tomcat-handler-28] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:07:20.508 [tomcat-handler-29] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:07:20.510 [tomcat-handler-29] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:07:20.510 [tomcat-handler-29] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:07:20.511 [tomcat-handler-29] ERROR e.t.v.config.JwtAccessDeniedHandler - Access denied to: /api/v1/elections/election-f9e4da2a/vote - Access Denied
2025-11-30 13:07:24.626 [tomcat-handler-30] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:07:24.627 [tomcat-handler-30] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:07:24.627 [tomcat-handler-30] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:07:24.629 [tomcat-handler-30] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:07:24.629 [tomcat-handler-30] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:07:24.630 [tomcat-handler-30] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:07:24.630 [tomcat-handler-30] INFO  e.t.v.controller.ElectionController - Checking vote status for user admin in election election-001: hasVoted=false
2025-11-30 13:07:24.630 [tomcat-handler-30] INFO  e.t.v.controller.ElectionController - Checking vote status for user admin in election election-f9e4da2a: hasVoted=false
2025-11-30 13:07:24.630 [tomcat-handler-30] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 13:07:26.052 [tomcat-handler-31] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:07:26.054 [tomcat-handler-31] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:07:26.054 [tomcat-handler-31] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:07:26.056 [tomcat-handler-31] INFO  e.t.v.controller.AuthController - User logged out: admin from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:07:40.088 [tomcat-handler-32] INFO  e.t.v.controller.AuthController - Login attempt for user: pedro.lopez from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:07:40.089 [tomcat-handler-32] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: pedro.lopez
2025-11-30 13:07:40.217 [tomcat-handler-32] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: pedro.lopez (role: Administrador (admin))
2025-11-30 13:07:40.217 [tomcat-handler-32] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: pedro.lopez
2025-11-30 13:07:40.218 [tomcat-handler-32] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: pedro.lopez (expires: Sun Nov 30 14:07:40 CET 2025)
2025-11-30 13:07:40.218 [tomcat-handler-32] INFO  e.t.v.controller.AuthController - User authenticated successfully: pedro.lopez (role: Administrador)
2025-11-30 13:07:48.308 [tomcat-handler-33] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:07:48.309 [tomcat-handler-33] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: pedro.lopez
2025-11-30 13:07:48.309 [tomcat-handler-33] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'pedro.lopez' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:07:48.311 [tomcat-handler-33] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:07:48.311 [tomcat-handler-33] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:07:48.312 [tomcat-handler-33] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: pedro.lopez
2025-11-30 13:07:48.312 [tomcat-handler-33] INFO  e.t.v.controller.ElectionController - Checking vote status for user pedro.lopez in election election-001: hasVoted=false
2025-11-30 13:07:48.312 [tomcat-handler-33] INFO  e.t.v.controller.ElectionController - Checking vote status for user pedro.lopez in election election-f9e4da2a: hasVoted=false
2025-11-30 13:07:48.313 [tomcat-handler-33] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 13:07:51.801 [tomcat-handler-34] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:07:51.803 [tomcat-handler-34] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: pedro.lopez
2025-11-30 13:07:51.803 [tomcat-handler-34] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'pedro.lopez' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:07:51.804 [tomcat-handler-34] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 13:07:51.805 [tomcat-handler-34] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:07:51.806 [tomcat-handler-34] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: pedro.lopez
2025-11-30 13:07:55.942 [tomcat-handler-35] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:07:55.943 [tomcat-handler-35] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: pedro.lopez
2025-11-30 13:07:55.944 [tomcat-handler-35] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'pedro.lopez' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:07:55.945 [tomcat-handler-35] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:07:55.945 [tomcat-handler-35] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:07:55.946 [tomcat-handler-35] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: pedro.lopez
2025-11-30 13:07:55.946 [tomcat-handler-35] INFO  e.t.v.controller.ElectionController - Checking vote status for user pedro.lopez in election election-001: hasVoted=false
2025-11-30 13:07:55.946 [tomcat-handler-35] INFO  e.t.v.controller.ElectionController - Checking vote status for user pedro.lopez in election election-f9e4da2a: hasVoted=false
2025-11-30 13:07:55.946 [tomcat-handler-35] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 13:07:58.282 [tomcat-handler-36] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:07:58.284 [tomcat-handler-36] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: pedro.lopez
2025-11-30 13:07:58.284 [tomcat-handler-36] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'pedro.lopez' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:07:58.285 [tomcat-handler-36] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:07:58.286 [tomcat-handler-36] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:07:58.288 [tomcat-handler-36] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: pedro.lopez
2025-11-30 13:07:58.289 [tomcat-handler-36] INFO  e.t.v.controller.ElectionController - Checking vote status for user pedro.lopez in election election-001: hasVoted=false
2025-11-30 13:07:58.289 [tomcat-handler-36] INFO  e.t.v.controller.ElectionController - Checking vote status for user pedro.lopez in election election-f9e4da2a: hasVoted=false
2025-11-30 13:07:58.289 [tomcat-handler-36] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 13:08:01.284 [tomcat-handler-37] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:08:01.285 [tomcat-handler-37] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: pedro.lopez
2025-11-30 13:08:01.286 [tomcat-handler-37] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'pedro.lopez' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:08:01.287 [tomcat-handler-37] INFO  e.t.v.controller.AuthController - User logged out: pedro.lopez from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:08:15.689 [tomcat-handler-38] INFO  e.t.v.controller.AuthController - Login attempt for user: lucia.garcia from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:08:15.689 [tomcat-handler-38] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: lucia.garcia
2025-11-30 13:08:15.810 [tomcat-handler-38] WARN  es.tfg.votacion.service.AuthService - Authentication failed: user is inactive: lucia.garcia
2025-11-30 13:08:15.811 [tomcat-handler-38] WARN  e.t.v.controller.AuthController - Authentication failed for user: lucia.garcia
2025-11-30 13:08:50.546 [tomcat-handler-39] INFO  e.t.v.controller.AuthController - Login attempt for user: test.user from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:08:50.546 [tomcat-handler-39] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-30 13:08:50.682 [tomcat-handler-39] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: test.user (role: Votante (voter))
2025-11-30 13:08:50.683 [tomcat-handler-39] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: test.user
2025-11-30 13:08:50.683 [tomcat-handler-39] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: test.user (expires: Sun Nov 30 14:08:50 CET 2025)
2025-11-30 13:08:50.684 [tomcat-handler-39] INFO  e.t.v.controller.AuthController - User authenticated successfully: test.user (role: Votante)
2025-11-30 13:08:50.766 [tomcat-handler-40] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:08:50.767 [tomcat-handler-40] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:08:50.768 [tomcat-handler-40] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'test.user' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:08:50.769 [tomcat-handler-40] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:08:50.769 [tomcat-handler-40] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:08:50.770 [tomcat-handler-40] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:08:50.770 [tomcat-handler-40] INFO  e.t.v.controller.ElectionController - Checking vote status for user test.user in election election-001: hasVoted=false
2025-11-30 13:08:50.770 [tomcat-handler-40] INFO  e.t.v.controller.ElectionController - Checking vote status for user test.user in election election-f9e4da2a: hasVoted=false
2025-11-30 13:08:50.770 [tomcat-handler-40] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 13:08:53.488 [tomcat-handler-41] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:08:53.490 [tomcat-handler-41] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:08:53.491 [tomcat-handler-41] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'test.user' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:08:53.493 [tomcat-handler-41] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 13:08:53.493 [tomcat-handler-41] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:08:53.494 [tomcat-handler-41] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:08:59.883 [tomcat-handler-42] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:08:59.884 [tomcat-handler-42] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:08:59.885 [tomcat-handler-42] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'test.user' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:08:59.887 [tomcat-handler-42] INFO  e.t.v.controller.ElectionController - Vote submission for election: election-f9e4da2a
2025-11-30 13:08:59.887 [tomcat-handler-42] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:08:59.888 [tomcat-handler-42] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:08:59.889 [tomcat-handler-42] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: election-f9e4da2a (136 bytes)
2025-11-30 13:08:59.889 [tomcat-handler-42] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 136 bytes
2025-11-30 13:08:59.890 [tomcat-handler-42] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 164 bytes (IV: 12, encrypted: 152)
2025-11-30 13:08:59.890 [tomcat-handler-42] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 164 bytes
2025-11-30 13:08:59.891 [tomcat-handler-42] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-election-f9e4da2a-1764504539889-121f395f.enc
2025-11-30 13:08:59.891 [tomcat-handler-42] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 9db7a704eb0b538246ae9f18925d903eb43fc1a887ac21ef959290b195d7cd30
2025-11-30 13:08:59.891 [tomcat-handler-42] INFO  e.t.v.controller.ElectionController - Vote encrypted and stored: blobId=BLOB-election-f9e4da2a-1764504539889-121f395f
2025-11-30 13:08:59.891 [tomcat-handler-42] INFO  e.tfg.votacion.service.FabricService - Emitting vote commitment to blockchain - Election: election-f9e4da2a, Commitment: ElGqEYp9jwqW3c/v5AyOBPptfS0WybgQq930KWcq1uI=
2025-11-30 13:08:59.916 [tomcat-handler-42] ERROR e.tfg.votacion.service.FabricService - Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-11-30 13:08:59.916 [tomcat-handler-42] ERROR e.tfg.votacion.service.FabricService - EndorseException details: chaincode response 500, User x509::CN=User1@org1.example.com, OU=client, L=San Francisco, ST=California, C=US::CN=ca.org1.example.com, O=org1.example.com, L=San Francisco, ST=California, C=US has already voted in election election-f9e4da2a; 
2025-11-30 13:08:59.916 [tomcat-handler-42] ERROR e.tfg.votacion.service.FabricService - Non-retriable error in emitVote: chaincode response 500, User x509::CN=User1@org1.example.com, OU=client, L=San Francisco, ST=California, C=US::CN=ca.org1.example.com, O=org1.example.com, L=San Francisco, ST=California, C=US has already voted in election election-f9e4da2a; 
2025-11-30 13:08:59.917 [tomcat-handler-42] WARN  e.t.v.controller.ElectionController - User test.user already voted in election election-f9e4da2a on blockchain. Syncing local state.
2025-11-30 13:08:59.917 [tomcat-handler-42] INFO  e.t.votacion.service.ElectionService - Vote registered: electionId=election-f9e4da2a, userId=user_test_009, optionId=opt-3
2025-11-30 13:08:59.918 [tomcat-handler-42] INFO  e.t.votacion.service.ElectionService - Data saved to disk
2025-11-30 13:09:02.030 [tomcat-handler-43] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:09:02.032 [tomcat-handler-43] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:09:02.032 [tomcat-handler-43] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'test.user' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:09:02.033 [tomcat-handler-43] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 13:09:02.033 [tomcat-handler-43] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:09:02.034 [tomcat-handler-43] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:09:37.053 [tomcat-handler-44] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:09:37.055 [tomcat-handler-44] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:09:37.055 [tomcat-handler-44] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'test.user' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:09:37.056 [tomcat-handler-44] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:09:37.056 [tomcat-handler-44] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:09:37.057 [tomcat-handler-44] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:09:37.057 [tomcat-handler-44] INFO  e.t.v.controller.ElectionController - Checking vote status for user test.user in election election-001: hasVoted=false
2025-11-30 13:09:37.058 [tomcat-handler-44] INFO  e.t.v.controller.ElectionController - Checking vote status for user test.user in election election-f9e4da2a: hasVoted=true
2025-11-30 13:09:37.058 [tomcat-handler-44] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 13:09:40.251 [tomcat-handler-45] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:09:40.252 [tomcat-handler-45] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:09:40.253 [tomcat-handler-45] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'test.user' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:09:40.254 [tomcat-handler-45] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 13:09:40.254 [tomcat-handler-45] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:09:40.255 [tomcat-handler-45] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:09:42.419 [tomcat-handler-46] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:09:42.421 [tomcat-handler-46] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:09:42.422 [tomcat-handler-46] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'test.user' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:09:42.423 [tomcat-handler-46] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:09:42.423 [tomcat-handler-46] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:09:42.424 [tomcat-handler-46] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:09:42.424 [tomcat-handler-46] INFO  e.t.v.controller.ElectionController - Checking vote status for user test.user in election election-001: hasVoted=false
2025-11-30 13:09:42.424 [tomcat-handler-46] INFO  e.t.v.controller.ElectionController - Checking vote status for user test.user in election election-f9e4da2a: hasVoted=true
2025-11-30 13:09:42.424 [tomcat-handler-46] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 13:09:44.556 [tomcat-handler-47] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:09:44.557 [tomcat-handler-47] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:09:44.557 [tomcat-handler-47] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'test.user' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:09:44.559 [tomcat-handler-47] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:09:44.559 [tomcat-handler-47] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:09:44.560 [tomcat-handler-47] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:09:44.560 [tomcat-handler-47] INFO  e.t.v.controller.ElectionController - Checking vote status for user test.user in election election-001: hasVoted=false
2025-11-30 13:09:44.560 [tomcat-handler-47] INFO  e.t.v.controller.ElectionController - Checking vote status for user test.user in election election-f9e4da2a: hasVoted=true
2025-11-30 13:09:44.560 [tomcat-handler-47] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 13:10:54.600 [tomcat-handler-49] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:10:54.603 [tomcat-handler-49] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:10:54.603 [tomcat-handler-49] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'test.user' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:10:54.606 [tomcat-handler-49] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 13:10:54.606 [tomcat-handler-49] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:10:54.610 [tomcat-handler-49] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:11:01.049 [tomcat-handler-50] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:11:01.050 [tomcat-handler-50] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:11:01.051 [tomcat-handler-50] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'test.user' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:11:01.052 [tomcat-handler-50] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 13:11:01.052 [tomcat-handler-50] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:11:01.054 [tomcat-handler-50] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:11:04.728 [tomcat-handler-51] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:11:04.730 [tomcat-handler-51] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:11:04.730 [tomcat-handler-51] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'test.user' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:11:04.731 [tomcat-handler-51] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 13:11:04.731 [tomcat-handler-51] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:11:04.732 [tomcat-handler-51] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:11:06.260 [tomcat-handler-52] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:11:06.262 [tomcat-handler-52] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:11:06.262 [tomcat-handler-52] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'test.user' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:11:06.263 [tomcat-handler-52] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:11:06.263 [tomcat-handler-52] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:11:06.264 [tomcat-handler-52] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:11:06.265 [tomcat-handler-52] INFO  e.t.v.controller.ElectionController - Checking vote status for user test.user in election election-001: hasVoted=false
2025-11-30 13:11:06.265 [tomcat-handler-52] INFO  e.t.v.controller.ElectionController - Checking vote status for user test.user in election election-f9e4da2a: hasVoted=true
2025-11-30 13:11:06.265 [tomcat-handler-52] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 13:11:07.979 [tomcat-handler-53] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:11:07.980 [tomcat-handler-53] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:11:07.980 [tomcat-handler-53] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'test.user' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:11:07.981 [tomcat-handler-53] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:11:07.981 [tomcat-handler-53] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:11:07.982 [tomcat-handler-53] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:11:07.982 [tomcat-handler-53] INFO  e.t.v.controller.ElectionController - Checking vote status for user test.user in election election-001: hasVoted=false
2025-11-30 13:11:07.983 [tomcat-handler-53] INFO  e.t.v.controller.ElectionController - Checking vote status for user test.user in election election-f9e4da2a: hasVoted=true
2025-11-30 13:11:07.983 [tomcat-handler-53] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 13:11:12.663 [tomcat-handler-55] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:11:12.664 [tomcat-handler-55] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:11:12.665 [tomcat-handler-55] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'test.user' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:11:12.666 [tomcat-handler-55] INFO  e.t.v.controller.ElectionController - Fetching election: election-001
2025-11-30 13:11:12.666 [tomcat-handler-55] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:11:12.667 [tomcat-handler-55] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:11:16.793 [tomcat-handler-57] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:11:16.794 [tomcat-handler-57] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:11:16.794 [tomcat-handler-57] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'test.user' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:11:16.797 [tomcat-handler-57] INFO  e.t.v.controller.ElectionController - Vote submission for election: election-001
2025-11-30 13:11:16.797 [tomcat-handler-57] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:11:16.798 [tomcat-handler-57] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:11:16.798 [tomcat-handler-57] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: election-001 (130 bytes)
2025-11-30 13:11:16.798 [tomcat-handler-57] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 130 bytes
2025-11-30 13:11:16.799 [tomcat-handler-57] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 158 bytes (IV: 12, encrypted: 146)
2025-11-30 13:11:16.799 [tomcat-handler-57] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 158 bytes
2025-11-30 13:11:16.800 [tomcat-handler-57] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-election-001-1764504676798-1c222097.enc
2025-11-30 13:11:16.800 [tomcat-handler-57] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: f7a8b83c0cab05f97eaddf716a77da0b1088a9ac32f928efc574578b10bc017b
2025-11-30 13:11:16.800 [tomcat-handler-57] INFO  e.t.v.controller.ElectionController - Vote encrypted and stored: blobId=BLOB-election-001-1764504676798-1c222097
2025-11-30 13:11:16.800 [tomcat-handler-57] INFO  e.tfg.votacion.service.FabricService - Emitting vote commitment to blockchain - Election: election-001, Commitment: 1q83UIqOtravr08t3Imn4MWyJnijgvZb3uO/KVOCUb0=
2025-11-30 13:11:17.279 [tomcat-handler-57] ERROR e.tfg.votacion.service.FabricService - Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-11-30 13:11:17.280 [tomcat-handler-57] ERROR e.tfg.votacion.service.FabricService - EndorseException details: chaincode response 500, Election election-001 does not exist; 
2025-11-30 13:11:17.280 [tomcat-handler-57] ERROR e.tfg.votacion.service.FabricService - Non-retriable error in emitVote: chaincode response 500, Election election-001 does not exist; 
2025-11-30 13:11:17.280 [tomcat-handler-57] ERROR e.t.v.controller.ElectionController - Error submitting vote
java.lang.RuntimeException: chaincode response 500, Election election-001 does not exist; 
	at es.tfg.votacion.service.FabricService.executeWithRetry(FabricService.java:468)
	at es.tfg.votacion.service.FabricService.emitVote(FabricService.java:207)
	at es.tfg.votacion.controller.ElectionController.emitVote(ElectionController.java:366)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at es.tfg.votacion.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:329)
Caused by: org.hyperledger.fabric.client.EndorseException: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
	at org.hyperledger.fabric.client.GatewayClient.endorse(GatewayClient.java:73)
	at org.hyperledger.fabric.client.ProposalImpl.endorse(ProposalImpl.java:74)
	at org.hyperledger.fabric.client.Proposal.endorse(Proposal.java:65)
	at org.hyperledger.fabric.client.ContractImpl.submitTransaction(ContractImpl.java:47)
	at es.tfg.votacion.service.FabricService.lambda$6(FabricService.java:209)
	at es.tfg.votacion.service.FabricService.executeWithRetry(FabricService.java:429)
	... 106 common frames omitted
Caused by: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
	at io.grpc.stub.ClientCalls.toStatusRuntimeException(ClientCalls.java:268)
	at io.grpc.stub.ClientCalls.getUnchecked(ClientCalls.java:249)
	at io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:167)
	at org.hyperledger.fabric.protos.gateway.GatewayGrpc$GatewayBlockingStub.endorse(GatewayGrpc.java:455)
	at org.hyperledger.fabric.client.GatewayClient.endorse(GatewayClient.java:71)
	... 111 common frames omitted
2025-11-30 13:11:22.509 [tomcat-handler-58] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:11:22.511 [tomcat-handler-58] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:11:22.511 [tomcat-handler-58] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'test.user' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:11:22.513 [tomcat-handler-58] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:11:22.513 [tomcat-handler-58] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:11:22.514 [tomcat-handler-58] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:11:22.514 [tomcat-handler-58] INFO  e.t.v.controller.ElectionController - Checking vote status for user test.user in election election-001: hasVoted=false
2025-11-30 13:11:22.514 [tomcat-handler-58] INFO  e.t.v.controller.ElectionController - Checking vote status for user test.user in election election-f9e4da2a: hasVoted=true
2025-11-30 13:11:22.514 [tomcat-handler-58] INFO  e.t.v.controller.ElectionController - Returning 2 active elections
2025-11-30 13:12:08.864 [tomcat-handler-59] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:12:08.865 [tomcat-handler-59] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-30 13:12:08.865 [tomcat-handler-59] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'test.user' authenticated successfully with role 'Votante (voter)'
2025-11-30 13:12:08.867 [tomcat-handler-59] INFO  e.t.v.controller.AuthController - User logged out: test.user from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:12:43.128 [tomcat-handler-60] INFO  e.t.v.controller.AuthController - Login attempt for user: admin from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:12:43.129 [tomcat-handler-60] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: admin
2025-11-30 13:12:43.239 [tomcat-handler-60] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: admin (role: Administrador (admin))
2025-11-30 13:12:43.239 [tomcat-handler-60] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: admin
2025-11-30 13:12:43.240 [tomcat-handler-60] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: admin (expires: Sun Nov 30 14:12:43 CET 2025)
2025-11-30 13:12:43.240 [tomcat-handler-60] INFO  e.t.v.controller.AuthController - User authenticated successfully: admin (role: Administrador)
2025-11-30 13:18:36.110 [tomcat-handler-63] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:18:36.111 [tomcat-handler-63] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:18:36.112 [tomcat-handler-63] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:18:36.113 [tomcat-handler-63] INFO  e.t.v.controller.ElectionController - Fetching election: all
2025-11-30 13:18:36.113 [tomcat-handler-63] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:18:36.114 [tomcat-handler-63] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:18:38.932 [tomcat-handler-64] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:18:38.933 [tomcat-handler-64] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:18:38.933 [tomcat-handler-64] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:18:38.934 [tomcat-handler-64] INFO  e.t.v.controller.ElectionController - Fetching election: all
2025-11-30 13:18:38.934 [tomcat-handler-64] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:18:38.935 [tomcat-handler-64] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:18:50.189 [tomcat-handler-65] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:18:50.190 [tomcat-handler-65] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:18:50.191 [tomcat-handler-65] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:18:50.192 [tomcat-handler-65] INFO  e.t.v.controller.ElectionController - Fetching election: all
2025-11-30 13:18:50.192 [tomcat-handler-65] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:18:50.193 [tomcat-handler-65] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:20:05.525 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-30 13:20:05.528 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-30 13:20:05.531 [SpringApplicationShutdownHook] INFO  e.tfg.votacion.service.FabricService - Closing Fabric Gateway connection
2025-11-30 13:20:05.546 [SpringApplicationShutdownHook] INFO  e.t.votacion.service.StorageService - Shutting down Storage Service
2025-11-30 13:20:05.546 [SpringApplicationShutdownHook] DEBUG e.t.votacion.service.StorageService - Master key cleared from memory
2025-11-30 13:20:53.608 [main] INFO  es.tfg.votacion.Application - Starting Application using Java 21.0.9 with PID 1304441 (/home/ehuetadr/TFG/VotacionBC/backend-spring/target/classes started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-30 13:20:53.636 [main] DEBUG es.tfg.votacion.Application - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-30 13:20:53.637 [main] INFO  es.tfg.votacion.Application - No active profile set, falling back to 1 default profile: "default"
2025-11-30 13:20:55.209 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-30 13:20:55.229 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-30 13:20:55.229 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-30 13:20:55.315 [main] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring embedded WebApplicationContext
2025-11-30 13:20:55.316 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1574 ms
2025-11-30 13:20:55.393 [main] INFO  es.tfg.votacion.service.AuthService - Initializing Authentication Service (Mock Mode)
2025-11-30 13:20:55.394 [main] DEBUG es.tfg.votacion.service.AuthService - Loading mock users from: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-30 13:20:55.441 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: juan.perez (role: Votante (voter), active: true)
2025-11-30 13:20:55.442 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: maria.gonzalez (role: Votante (voter), active: true)
2025-11-30 13:20:55.443 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: admin (role: Administrador (admin), active: true)
2025-11-30 13:20:55.444 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: auditor (role: Auditor (auditor), active: true)
2025-11-30 13:20:55.444 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: carlos.martin (role: Votante (voter), active: true)
2025-11-30 13:20:55.445 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: ana.rodriguez (role: Votante (voter), active: true)
2025-11-30 13:20:55.446 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: pedro.lopez (role: Administrador (admin), active: true)
2025-11-30 13:20:55.446 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: lucia.garcia (role: Votante (voter), active: false)
2025-11-30 13:20:55.447 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: test.user (role: Votante (voter), active: true)
2025-11-30 13:20:55.447 [main] INFO  es.tfg.votacion.service.AuthService - Loaded 9 mock users from /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-30 13:20:55.459 [main] DEBUG es.tfg.votacion.service.AuthService - JWT signing key initialized with HS256 algorithm
2025-11-30 13:20:55.460 [main] INFO  es.tfg.votacion.service.AuthService - JWT signing key initialized successfully
2025-11-30 13:20:55.461 [main] DEBUG es.tfg.votacion.service.AuthService - JWT issuer: votacion-blockchain-poc
2025-11-30 13:20:55.461 [main] DEBUG es.tfg.votacion.service.AuthService - JWT audience: voting-system
2025-11-30 13:20:55.462 [main] DEBUG es.tfg.votacion.service.AuthService - JWT expiration: 3600 seconds
2025-11-30 13:20:55.462 [main] DEBUG es.tfg.votacion.service.AuthService - Allowed roles: [voter, admin, auditor]
2025-11-30 13:20:55.463 [main] WARN  es.tfg.votacion.service.AuthService - Running in MOCK authentication mode - not suitable for production!
2025-11-30 13:20:55.520 [main] DEBUG e.t.v.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-30 13:20:55.588 [main] INFO  e.t.votacion.service.StorageService - Initializing Storage Service with AES-GCM encryption
2025-11-30 13:20:55.588 [main] DEBUG e.t.votacion.service.StorageService - Loading encryption key from keystore: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/keystore/keystore.json
2025-11-30 13:20:55.595 [main] DEBUG e.t.votacion.service.StorageService - Keystore loaded - algorithm: AES/GCM/NoPadding, key length: 256 bits
2025-11-30 13:20:55.596 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded and validated successfully
2025-11-30 13:20:55.597 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded successfully from keystore
2025-11-30 13:20:55.597 [main] INFO  e.t.votacion.service.StorageService - Storage directory initialized: /home/ehuetadr/TFG/VotacionBC/backend-spring/data/storage
2025-11-30 13:20:55.598 [main] DEBUG e.t.votacion.service.StorageService - Encryption algorithm: AES/GCM/NoPadding
2025-11-30 13:20:55.598 [main] DEBUG e.t.votacion.service.StorageService - Key length: 256 bits
2025-11-30 13:20:55.598 [main] DEBUG e.t.votacion.service.StorageService - IV length: 12 bytes
2025-11-30 13:20:55.598 [main] DEBUG e.t.votacion.service.StorageService - Tag length: 128 bits
2025-11-30 13:20:55.598 [main] INFO  e.t.votacion.service.StorageService - Automatic cleanup enabled - retention: 30 days
2025-11-30 13:20:55.620 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-30 13:20:55.620 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-30 13:20:55.620 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /home/ehuetadr/TFG/VotacionBC/fabric/test-network/organizations/peerOrganizations/org1.example.com/connection-org1.json
2025-11-30 13:20:55.620 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /home/ehuetadr/TFG/VotacionBC/backend-spring/wallet
2025-11-30 13:20:55.620 [main] DEBUG e.tfg.votacion.service.FabricService - User: appUser
2025-11-30 13:20:55.621 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: electionchannel
2025-11-30 13:20:55.621 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: electioncc
2025-11-30 13:20:57.201 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Fabric network
2025-11-30 13:20:57.202 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-30 13:20:57.203 [main] INFO  e.t.votacion.service.ElectionService - Initializing ElectionService
2025-11-30 13:20:57.318 [main] INFO  e.t.votacion.service.ElectionService - Loaded 4 elections from disk
2025-11-30 13:20:56.869 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 92a124bb-707b-4cea-880a-34da9f5f262b

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-30 13:20:56.881 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-30 13:20:56.946 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring Spring Security with JWT authentication
2025-11-30 13:20:56.947 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-30 13:20:56.988 [main] INFO  e.tfg.votacion.config.SecurityConfig - Spring Security configured successfully
2025-11-30 13:20:57.446 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-11-30 13:20:57.455 [main] INFO  es.tfg.votacion.Application - Started Application in 4.687 seconds (process running for 6.451)
2025-11-30 13:21:05.155 [tomcat-handler-0] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-30 13:21:05.156 [tomcat-handler-0] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-30 13:21:05.157 [tomcat-handler-0] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-11-30 13:21:05.213 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:21:05.330 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:21:05.335 [tomcat-handler-0] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:21:05.378 [tomcat-handler-0] INFO  e.t.v.controller.ElectionController - Fetching all elections (ADMIN) from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:21:05.378 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:21:05.380 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:21:05.381 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-11-30 13:21:05.382 [tomcat-handler-0] INFO  e.t.v.controller.ElectionController - Returning 4 elections
2025-11-30 13:22:01.957 [tomcat-handler-1] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:22:01.960 [tomcat-handler-1] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:22:01.961 [tomcat-handler-1] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:22:01.972 [tomcat-handler-1] INFO  e.t.v.controller.ElectionController - Fetching all elections (ADMIN) from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:22:01.972 [tomcat-handler-1] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:22:01.975 [tomcat-handler-1] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:22:01.976 [tomcat-handler-1] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-11-30 13:22:01.976 [tomcat-handler-1] INFO  e.t.v.controller.ElectionController - Returning 4 elections
2025-11-30 13:24:48.708 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-30 13:24:48.712 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-30 13:24:48.715 [SpringApplicationShutdownHook] INFO  e.tfg.votacion.service.FabricService - Closing Fabric Gateway connection
2025-11-30 13:24:48.725 [SpringApplicationShutdownHook] INFO  e.t.votacion.service.StorageService - Shutting down Storage Service
2025-11-30 13:24:48.726 [SpringApplicationShutdownHook] DEBUG e.t.votacion.service.StorageService - Master key cleared from memory
2025-11-30 13:27:26.391 [main] INFO  es.tfg.votacion.Application - Starting Application using Java 21.0.9 with PID 1308274 (/home/ehuetadr/TFG/VotacionBC/backend-spring/target/classes started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-30 13:27:26.393 [main] DEBUG es.tfg.votacion.Application - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-30 13:27:26.394 [main] INFO  es.tfg.votacion.Application - No active profile set, falling back to 1 default profile: "default"
2025-11-30 13:27:27.832 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-30 13:27:27.846 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-30 13:27:27.847 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-30 13:27:27.905 [main] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring embedded WebApplicationContext
2025-11-30 13:27:27.906 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1435 ms
2025-11-30 13:27:27.962 [main] INFO  es.tfg.votacion.service.AuthService - Initializing Authentication Service (Mock Mode)
2025-11-30 13:27:27.962 [main] DEBUG es.tfg.votacion.service.AuthService - Loading mock users from: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-30 13:27:27.981 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: juan.perez (role: Votante (voter), active: true)
2025-11-30 13:27:27.982 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: maria.gonzalez (role: Votante (voter), active: true)
2025-11-30 13:27:27.982 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: admin (role: Administrador (admin), active: true)
2025-11-30 13:27:27.982 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: auditor (role: Auditor (auditor), active: true)
2025-11-30 13:27:27.983 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: carlos.martin (role: Votante (voter), active: true)
2025-11-30 13:27:27.983 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: ana.rodriguez (role: Votante (voter), active: true)
2025-11-30 13:27:27.984 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: pedro.lopez (role: Administrador (admin), active: true)
2025-11-30 13:27:27.984 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: lucia.garcia (role: Votante (voter), active: false)
2025-11-30 13:27:27.984 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: test.user (role: Votante (voter), active: true)
2025-11-30 13:27:27.985 [main] INFO  es.tfg.votacion.service.AuthService - Loaded 9 mock users from /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-30 13:27:27.989 [main] DEBUG es.tfg.votacion.service.AuthService - JWT signing key initialized with HS256 algorithm
2025-11-30 13:27:27.990 [main] INFO  es.tfg.votacion.service.AuthService - JWT signing key initialized successfully
2025-11-30 13:27:27.996 [main] DEBUG es.tfg.votacion.service.AuthService - JWT issuer: votacion-blockchain-poc
2025-11-30 13:27:27.996 [main] DEBUG es.tfg.votacion.service.AuthService - JWT audience: voting-system
2025-11-30 13:27:27.996 [main] DEBUG es.tfg.votacion.service.AuthService - JWT expiration: 3600 seconds
2025-11-30 13:27:27.996 [main] DEBUG es.tfg.votacion.service.AuthService - Allowed roles: [voter, admin, auditor]
2025-11-30 13:27:27.996 [main] WARN  es.tfg.votacion.service.AuthService - Running in MOCK authentication mode - not suitable for production!
2025-11-30 13:27:28.040 [main] DEBUG e.t.v.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-30 13:27:28.100 [main] INFO  e.t.votacion.service.StorageService - Initializing Storage Service with AES-GCM encryption
2025-11-30 13:27:28.101 [main] DEBUG e.t.votacion.service.StorageService - Loading encryption key from keystore: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/keystore/keystore.json
2025-11-30 13:27:28.106 [main] DEBUG e.t.votacion.service.StorageService - Keystore loaded - algorithm: AES/GCM/NoPadding, key length: 256 bits
2025-11-30 13:27:28.107 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded and validated successfully
2025-11-30 13:27:28.107 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded successfully from keystore
2025-11-30 13:27:28.108 [main] INFO  e.t.votacion.service.StorageService - Storage directory initialized: /home/ehuetadr/TFG/VotacionBC/backend-spring/data/storage
2025-11-30 13:27:28.108 [main] DEBUG e.t.votacion.service.StorageService - Encryption algorithm: AES/GCM/NoPadding
2025-11-30 13:27:28.108 [main] DEBUG e.t.votacion.service.StorageService - Key length: 256 bits
2025-11-30 13:27:28.109 [main] DEBUG e.t.votacion.service.StorageService - IV length: 12 bytes
2025-11-30 13:27:28.110 [main] DEBUG e.t.votacion.service.StorageService - Tag length: 128 bits
2025-11-30 13:27:28.110 [main] INFO  e.t.votacion.service.StorageService - Automatic cleanup enabled - retention: 30 days
2025-11-30 13:27:28.128 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-30 13:27:28.128 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-30 13:27:28.128 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /home/ehuetadr/TFG/VotacionBC/fabric/test-network/organizations/peerOrganizations/org1.example.com/connection-org1.json
2025-11-30 13:27:28.128 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /home/ehuetadr/TFG/VotacionBC/backend-spring/wallet
2025-11-30 13:27:28.128 [main] DEBUG e.tfg.votacion.service.FabricService - User: appUser
2025-11-30 13:27:28.128 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: electionchannel
2025-11-30 13:27:28.129 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: electioncc
2025-11-30 13:27:28.999 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Fabric network
2025-11-30 13:27:29.000 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-30 13:27:29.003 [main] INFO  e.t.votacion.service.ElectionService - Initializing ElectionService
2025-11-30 13:27:29.096 [main] INFO  e.t.votacion.service.ElectionService - Loaded 1 elections from disk
2025-11-30 13:27:29.532 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 40f339fa-c823-4779-960f-397a0e99823a

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-30 13:27:29.540 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-30 13:27:29.584 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring Spring Security with JWT authentication
2025-11-30 13:27:29.586 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-30 13:27:29.623 [main] INFO  e.tfg.votacion.config.SecurityConfig - Spring Security configured successfully
2025-11-30 13:27:30.010 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-11-30 13:27:30.020 [main] INFO  es.tfg.votacion.Application - Started Application in 4.381 seconds (process running for 4.733)
2025-11-30 13:28:12.816 [tomcat-handler-0] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-30 13:28:12.816 [tomcat-handler-0] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-30 13:28:12.818 [tomcat-handler-0] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-11-30 13:28:12.892 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:28:13.006 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:28:13.007 [tomcat-handler-0] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:28:13.038 [tomcat-handler-0] INFO  e.t.v.controller.ElectionController - Fetching all elections (ADMIN) from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:28:13.039 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:28:13.040 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:28:13.040 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-11-30 13:28:13.041 [tomcat-handler-0] INFO  e.t.v.controller.ElectionController - Returning 1 elections
2025-11-30 13:28:43.451 [tomcat-handler-2] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:28:43.453 [tomcat-handler-2] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:28:43.453 [tomcat-handler-2] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:28:43.455 [tomcat-handler-2] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:28:43.455 [tomcat-handler-2] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:28:43.457 [tomcat-handler-2] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:28:43.469 [tomcat-handler-2] INFO  e.t.v.controller.ElectionController - Checking vote status for user admin in election election-f9e4da2a: hasVoted=false
2025-11-30 13:28:43.469 [tomcat-handler-2] INFO  e.t.v.controller.ElectionController - Returning 1 active elections
2025-11-30 13:28:48.086 [tomcat-handler-3] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:28:48.088 [tomcat-handler-3] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:28:48.089 [tomcat-handler-3] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:28:48.092 [tomcat-handler-3] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:28:48.092 [tomcat-handler-3] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:28:48.094 [tomcat-handler-3] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:28:48.094 [tomcat-handler-3] INFO  e.t.v.controller.ElectionController - Checking vote status for user admin in election election-f9e4da2a: hasVoted=false
2025-11-30 13:28:48.094 [tomcat-handler-3] INFO  e.t.v.controller.ElectionController - Returning 1 active elections
2025-11-30 13:28:50.331 [tomcat-handler-4] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:28:50.333 [tomcat-handler-4] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:28:50.333 [tomcat-handler-4] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:28:50.335 [tomcat-handler-4] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:28:50.335 [tomcat-handler-4] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:28:50.336 [tomcat-handler-4] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:28:50.337 [tomcat-handler-4] INFO  e.t.v.controller.ElectionController - Checking vote status for user admin in election election-f9e4da2a: hasVoted=false
2025-11-30 13:28:50.337 [tomcat-handler-4] INFO  e.t.v.controller.ElectionController - Returning 1 active elections
2025-11-30 13:28:56.765 [tomcat-handler-6] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:28:56.766 [tomcat-handler-6] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:28:56.767 [tomcat-handler-6] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:28:56.770 [tomcat-handler-6] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 13:28:56.770 [tomcat-handler-6] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:28:56.772 [tomcat-handler-6] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:29:07.756 [tomcat-handler-7] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:29:07.758 [tomcat-handler-7] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:29:07.758 [tomcat-handler-7] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:29:07.759 [tomcat-handler-7] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:29:07.760 [tomcat-handler-7] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:29:07.761 [tomcat-handler-7] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:29:07.762 [tomcat-handler-7] INFO  e.t.v.controller.ElectionController - Checking vote status for user admin in election election-f9e4da2a: hasVoted=false
2025-11-30 13:29:07.762 [tomcat-handler-7] INFO  e.t.v.controller.ElectionController - Returning 1 active elections
2025-11-30 13:29:09.492 [tomcat-handler-8] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:29:09.493 [tomcat-handler-8] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:29:09.494 [tomcat-handler-8] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:29:09.495 [tomcat-handler-8] INFO  e.t.v.controller.ElectionController - Fetching all elections (ADMIN) from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:29:09.495 [tomcat-handler-8] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:29:09.497 [tomcat-handler-8] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:29:09.497 [tomcat-handler-8] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-11-30 13:29:09.498 [tomcat-handler-8] INFO  e.t.v.controller.ElectionController - Returning 1 elections
2025-11-30 13:30:33.456 [tomcat-handler-10] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:30:33.458 [tomcat-handler-10] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:30:33.459 [tomcat-handler-10] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:30:33.460 [tomcat-handler-10] INFO  e.t.v.controller.ElectionController - Fetching all elections (ADMIN) from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:30:33.461 [tomcat-handler-10] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:30:33.466 [tomcat-handler-10] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:30:33.466 [tomcat-handler-10] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-11-30 13:30:33.466 [tomcat-handler-10] INFO  e.t.v.controller.ElectionController - Returning 1 elections
2025-11-30 13:31:03.155 [tomcat-handler-11] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:31:03.156 [tomcat-handler-11] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:31:03.157 [tomcat-handler-11] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:31:03.158 [tomcat-handler-11] INFO  e.t.v.controller.ElectionController - Fetching all elections (ADMIN) from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:31:03.159 [tomcat-handler-11] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:31:03.160 [tomcat-handler-11] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:31:03.160 [tomcat-handler-11] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-11-30 13:31:03.160 [tomcat-handler-11] INFO  e.t.v.controller.ElectionController - Returning 1 elections
2025-11-30 13:31:13.988 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:31:13.989 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:31:13.989 [tomcat-handler-12] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:31:13.990 [tomcat-handler-12] INFO  e.t.v.controller.ElectionController - Fetching all elections (ADMIN) from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:31:13.990 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:31:13.991 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:31:13.992 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-11-30 13:31:13.992 [tomcat-handler-12] INFO  e.t.v.controller.ElectionController - Returning 1 elections
2025-11-30 13:34:28.808 [tomcat-handler-15] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:34:28.814 [tomcat-handler-15] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:34:28.814 [tomcat-handler-15] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:34:28.817 [tomcat-handler-15] INFO  e.t.v.controller.ElectionController - Closing election: election-f9e4da2a
2025-11-30 13:34:28.817 [tomcat-handler-15] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:34:28.819 [tomcat-handler-15] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:34:28.819 [tomcat-handler-15] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-11-30 13:34:28.819 [tomcat-handler-15] INFO  e.t.votacion.service.ElectionService - Closing election process started: election-f9e4da2a
2025-11-30 13:34:28.819 [tomcat-handler-15] INFO  e.tfg.votacion.service.FabricService - Closing election on blockchain: election-f9e4da2a
2025-11-30 13:34:31.121 [tomcat-handler-15] INFO  e.t.votacion.service.ElectionService - Election closed on blockchain: election-f9e4da2a
2025-11-30 13:34:31.122 [tomcat-handler-15] INFO  e.t.votacion.service.ElectionService - Starting vote recount (decryption) for election: election-f9e4da2a
2025-11-30 13:34:31.124 [tomcat-handler-15] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-election-f9e4da2a-1764493356191-eae01176
2025-11-30 13:34:31.127 [tomcat-handler-15] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 170 bytes
2025-11-30 13:34:31.128 [tomcat-handler-15] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 170 bytes
2025-11-30 13:34:31.131 [tomcat-handler-15] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 142 bytes
2025-11-30 13:34:31.131 [tomcat-handler-15] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-election-f9e4da2a-1764493356191-eae01176 (142 bytes)
2025-11-30 13:34:31.132 [tomcat-handler-15] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-election-f9e4da2a-1764504057299-a6e015b4
2025-11-30 13:34:31.136 [tomcat-handler-15] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 174 bytes
2025-11-30 13:34:31.136 [tomcat-handler-15] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 174 bytes
2025-11-30 13:34:31.137 [tomcat-handler-15] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 146 bytes
2025-11-30 13:34:31.137 [tomcat-handler-15] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-election-f9e4da2a-1764504057299-a6e015b4 (146 bytes)
2025-11-30 13:34:31.137 [tomcat-handler-15] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-election-f9e4da2a-1764494356177-4086e95a
2025-11-30 13:34:31.139 [tomcat-handler-15] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 170 bytes
2025-11-30 13:34:31.139 [tomcat-handler-15] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 170 bytes
2025-11-30 13:34:31.140 [tomcat-handler-15] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 142 bytes
2025-11-30 13:34:31.140 [tomcat-handler-15] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-election-f9e4da2a-1764494356177-4086e95a (142 bytes)
2025-11-30 13:34:31.140 [tomcat-handler-15] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-election-f9e4da2a-1764504201661-2c805168
2025-11-30 13:34:31.153 [tomcat-handler-15] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 173 bytes
2025-11-30 13:34:31.153 [tomcat-handler-15] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 173 bytes
2025-11-30 13:34:31.153 [tomcat-handler-15] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 145 bytes
2025-11-30 13:34:31.154 [tomcat-handler-15] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-election-f9e4da2a-1764504201661-2c805168 (145 bytes)
2025-11-30 13:34:31.154 [tomcat-handler-15] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-election-f9e4da2a-1764504102099-314c79b2
2025-11-30 13:34:31.155 [tomcat-handler-15] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 173 bytes
2025-11-30 13:34:31.155 [tomcat-handler-15] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 173 bytes
2025-11-30 13:34:31.155 [tomcat-handler-15] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 145 bytes
2025-11-30 13:34:31.155 [tomcat-handler-15] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-election-f9e4da2a-1764504102099-314c79b2 (145 bytes)
2025-11-30 13:34:31.155 [tomcat-handler-15] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-election-f9e4da2a-1764504539889-121f395f
2025-11-30 13:34:31.157 [tomcat-handler-15] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 164 bytes
2025-11-30 13:34:31.157 [tomcat-handler-15] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 164 bytes
2025-11-30 13:34:31.158 [tomcat-handler-15] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 136 bytes
2025-11-30 13:34:31.158 [tomcat-handler-15] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-election-f9e4da2a-1764504539889-121f395f (136 bytes)
2025-11-30 13:34:31.158 [tomcat-handler-15] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-election-f9e4da2a-1764502853154-48aecfcd
2025-11-30 13:34:31.160 [tomcat-handler-15] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 174 bytes
2025-11-30 13:34:31.160 [tomcat-handler-15] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 174 bytes
2025-11-30 13:34:31.161 [tomcat-handler-15] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 146 bytes
2025-11-30 13:34:31.161 [tomcat-handler-15] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-election-f9e4da2a-1764502853154-48aecfcd (146 bytes)
2025-11-30 13:34:31.161 [tomcat-handler-15] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-election-f9e4da2a-1764503881430-8645c2e7
2025-11-30 13:34:31.162 [tomcat-handler-15] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 174 bytes
2025-11-30 13:34:31.162 [tomcat-handler-15] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 174 bytes
2025-11-30 13:34:31.162 [tomcat-handler-15] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 146 bytes
2025-11-30 13:34:31.163 [tomcat-handler-15] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-election-f9e4da2a-1764503881430-8645c2e7 (146 bytes)
2025-11-30 13:34:31.163 [tomcat-handler-15] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-election-f9e4da2a-1764502672886-0604c7b9
2025-11-30 13:34:31.165 [tomcat-handler-15] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 174 bytes
2025-11-30 13:34:31.165 [tomcat-handler-15] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 174 bytes
2025-11-30 13:34:31.166 [tomcat-handler-15] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 146 bytes
2025-11-30 13:34:31.166 [tomcat-handler-15] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-election-f9e4da2a-1764502672886-0604c7b9 (146 bytes)
2025-11-30 13:34:31.166 [tomcat-handler-15] INFO  e.t.votacion.service.ElectionService - Recount finished. Decrypted 9 votes.
2025-11-30 13:34:31.166 [tomcat-handler-15] WARN  e.t.votacion.service.ElectionService - DISCREPANCY DETECTED! Incremental count: {opt-1=3, opt-2=1, opt-3=1}, Decrypted count: {opt-1=7, opt-2=1, opt-3=1}
2025-11-30 13:34:31.167 [tomcat-handler-15] INFO  e.t.votacion.service.ElectionService - Election status updated: election-f9e4da2a -> Cerrada (closed)
2025-11-30 13:34:31.196 [tomcat-handler-15] INFO  e.t.votacion.service.ElectionService - Data saved to disk
2025-11-30 13:34:31.197 [tomcat-handler-15] INFO  e.t.v.controller.ElectionController - Election closed: election-f9e4da2a by admin
2025-11-30 13:34:31.260 [tomcat-handler-16] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:34:31.261 [tomcat-handler-16] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:34:31.262 [tomcat-handler-16] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:34:31.263 [tomcat-handler-16] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:34:31.263 [tomcat-handler-16] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:34:31.264 [tomcat-handler-16] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:34:31.265 [tomcat-handler-16] INFO  e.t.v.controller.ElectionController - Returning 0 active elections
2025-11-30 13:34:31.287 [tomcat-handler-17] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:34:31.289 [tomcat-handler-17] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:34:31.289 [tomcat-handler-17] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:34:31.292 [tomcat-handler-17] INFO  e.t.v.controller.ElectionController - Fetching all elections (ADMIN) from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:34:31.293 [tomcat-handler-17] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:34:31.294 [tomcat-handler-17] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:34:31.294 [tomcat-handler-17] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-11-30 13:34:31.294 [tomcat-handler-17] INFO  e.t.v.controller.ElectionController - Returning 1 elections
2025-11-30 13:34:38.747 [tomcat-handler-18] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:34:38.748 [tomcat-handler-18] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:34:38.748 [tomcat-handler-18] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:34:38.750 [tomcat-handler-18] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:34:38.750 [tomcat-handler-18] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:34:38.751 [tomcat-handler-18] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:34:38.751 [tomcat-handler-18] INFO  e.t.v.controller.ElectionController - Returning 0 active elections
2025-11-30 13:34:39.998 [tomcat-handler-19] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:34:39.999 [tomcat-handler-19] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:34:39.999 [tomcat-handler-19] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:34:40.001 [tomcat-handler-19] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:34:40.001 [tomcat-handler-19] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:34:40.002 [tomcat-handler-19] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:34:40.002 [tomcat-handler-19] INFO  e.t.v.controller.ElectionController - Returning 0 active elections
2025-11-30 13:34:47.772 [tomcat-handler-20] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:34:47.774 [tomcat-handler-20] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:34:47.775 [tomcat-handler-20] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:34:47.776 [tomcat-handler-20] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:34:47.777 [tomcat-handler-20] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:34:47.778 [tomcat-handler-20] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:34:47.778 [tomcat-handler-20] INFO  e.t.v.controller.ElectionController - Returning 0 active elections
2025-11-30 13:34:48.573 [tomcat-handler-21] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:34:48.574 [tomcat-handler-21] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:34:48.575 [tomcat-handler-21] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:34:48.576 [tomcat-handler-21] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:34:48.576 [tomcat-handler-21] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:34:48.577 [tomcat-handler-21] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:34:48.577 [tomcat-handler-21] INFO  e.t.v.controller.ElectionController - Returning 0 active elections
2025-11-30 13:34:55.004 [tomcat-handler-22] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:34:55.005 [tomcat-handler-22] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:34:55.006 [tomcat-handler-22] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:34:55.007 [tomcat-handler-22] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:34:55.007 [tomcat-handler-22] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:34:55.008 [tomcat-handler-22] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:34:55.008 [tomcat-handler-22] INFO  e.t.v.controller.ElectionController - Returning 0 active elections
2025-11-30 13:36:24.550 [tomcat-handler-24] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:36:24.551 [tomcat-handler-24] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:36:24.551 [tomcat-handler-24] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:36:24.553 [tomcat-handler-24] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:36:24.553 [tomcat-handler-24] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:36:24.556 [tomcat-handler-24] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:36:24.557 [tomcat-handler-24] INFO  e.t.v.controller.ElectionController - Returning 0 active elections
2025-11-30 13:36:26.468 [tomcat-handler-25] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:36:26.469 [tomcat-handler-25] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:36:26.470 [tomcat-handler-25] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:36:26.471 [tomcat-handler-25] INFO  e.t.v.controller.ElectionController - Fetching all elections (ADMIN) from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:36:26.472 [tomcat-handler-25] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:36:26.473 [tomcat-handler-25] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:36:26.474 [tomcat-handler-25] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-11-30 13:36:26.474 [tomcat-handler-25] INFO  e.t.v.controller.ElectionController - Returning 1 elections
2025-11-30 13:38:08.543 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-30 13:38:08.554 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-30 13:38:08.559 [SpringApplicationShutdownHook] INFO  e.tfg.votacion.service.FabricService - Closing Fabric Gateway connection
2025-11-30 13:38:08.576 [SpringApplicationShutdownHook] INFO  e.t.votacion.service.StorageService - Shutting down Storage Service
2025-11-30 13:38:08.576 [SpringApplicationShutdownHook] DEBUG e.t.votacion.service.StorageService - Master key cleared from memory
2025-11-30 13:38:14.590 [main] INFO  es.tfg.votacion.Application - Starting Application using Java 21.0.9 with PID 1314148 (/home/ehuetadr/TFG/VotacionBC/backend-spring/target/classes started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-30 13:38:14.592 [main] DEBUG es.tfg.votacion.Application - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-30 13:38:14.593 [main] INFO  es.tfg.votacion.Application - No active profile set, falling back to 1 default profile: "default"
2025-11-30 13:38:16.533 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-30 13:38:16.548 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-30 13:38:16.549 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-30 13:38:16.602 [main] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring embedded WebApplicationContext
2025-11-30 13:38:16.602 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1963 ms
2025-11-30 13:38:16.657 [main] INFO  es.tfg.votacion.service.AuthService - Initializing Authentication Service (Mock Mode)
2025-11-30 13:38:16.658 [main] DEBUG es.tfg.votacion.service.AuthService - Loading mock users from: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-30 13:38:16.677 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: juan.perez (role: Votante (voter), active: true)
2025-11-30 13:38:16.677 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: maria.gonzalez (role: Votante (voter), active: true)
2025-11-30 13:38:16.678 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: admin (role: Administrador (admin), active: true)
2025-11-30 13:38:16.678 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: auditor (role: Auditor (auditor), active: true)
2025-11-30 13:38:16.678 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: carlos.martin (role: Votante (voter), active: true)
2025-11-30 13:38:16.678 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: ana.rodriguez (role: Votante (voter), active: true)
2025-11-30 13:38:16.679 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: pedro.lopez (role: Administrador (admin), active: true)
2025-11-30 13:38:16.680 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: lucia.garcia (role: Votante (voter), active: false)
2025-11-30 13:38:16.680 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: test.user (role: Votante (voter), active: true)
2025-11-30 13:38:16.680 [main] INFO  es.tfg.votacion.service.AuthService - Loaded 9 mock users from /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-30 13:38:16.685 [main] DEBUG es.tfg.votacion.service.AuthService - JWT signing key initialized with HS256 algorithm
2025-11-30 13:38:16.686 [main] INFO  es.tfg.votacion.service.AuthService - JWT signing key initialized successfully
2025-11-30 13:38:16.686 [main] DEBUG es.tfg.votacion.service.AuthService - JWT issuer: votacion-blockchain-poc
2025-11-30 13:38:16.686 [main] DEBUG es.tfg.votacion.service.AuthService - JWT audience: voting-system
2025-11-30 13:38:16.686 [main] DEBUG es.tfg.votacion.service.AuthService - JWT expiration: 3600 seconds
2025-11-30 13:38:16.686 [main] DEBUG es.tfg.votacion.service.AuthService - Allowed roles: [voter, admin, auditor]
2025-11-30 13:38:16.686 [main] WARN  es.tfg.votacion.service.AuthService - Running in MOCK authentication mode - not suitable for production!
2025-11-30 13:38:16.729 [main] DEBUG e.t.v.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-30 13:38:16.792 [main] INFO  e.t.votacion.service.StorageService - Initializing Storage Service with AES-GCM encryption
2025-11-30 13:38:16.793 [main] DEBUG e.t.votacion.service.StorageService - Loading encryption key from keystore: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/keystore/keystore.json
2025-11-30 13:38:16.797 [main] DEBUG e.t.votacion.service.StorageService - Keystore loaded - algorithm: AES/GCM/NoPadding, key length: 256 bits
2025-11-30 13:38:16.798 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded and validated successfully
2025-11-30 13:38:16.799 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded successfully from keystore
2025-11-30 13:38:16.799 [main] INFO  e.t.votacion.service.StorageService - Storage directory initialized: /home/ehuetadr/TFG/VotacionBC/backend-spring/data/storage
2025-11-30 13:38:16.800 [main] DEBUG e.t.votacion.service.StorageService - Encryption algorithm: AES/GCM/NoPadding
2025-11-30 13:38:16.800 [main] DEBUG e.t.votacion.service.StorageService - Key length: 256 bits
2025-11-30 13:38:16.800 [main] DEBUG e.t.votacion.service.StorageService - IV length: 12 bytes
2025-11-30 13:38:16.800 [main] DEBUG e.t.votacion.service.StorageService - Tag length: 128 bits
2025-11-30 13:38:16.800 [main] INFO  e.t.votacion.service.StorageService - Automatic cleanup enabled - retention: 30 days
2025-11-30 13:38:16.817 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-30 13:38:16.817 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-30 13:38:16.817 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /home/ehuetadr/TFG/VotacionBC/fabric/test-network/organizations/peerOrganizations/org1.example.com/connection-org1.json
2025-11-30 13:38:16.818 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /home/ehuetadr/TFG/VotacionBC/backend-spring/wallet
2025-11-30 13:38:16.818 [main] DEBUG e.tfg.votacion.service.FabricService - User: appUser
2025-11-30 13:38:16.818 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: electionchannel
2025-11-30 13:38:16.818 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: electioncc
2025-11-30 13:38:17.585 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Fabric network
2025-11-30 13:38:17.586 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-30 13:38:17.587 [main] INFO  e.t.votacion.service.ElectionService - Initializing ElectionService
2025-11-30 13:38:17.676 [main] INFO  e.t.votacion.service.ElectionService - Loaded 1 elections from disk
2025-11-30 13:38:18.127 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 08200733-a260-4f40-9e74-62b3529db961

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-30 13:38:18.136 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-30 13:38:18.181 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring Spring Security with JWT authentication
2025-11-30 13:38:18.182 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-30 13:38:18.218 [main] INFO  e.tfg.votacion.config.SecurityConfig - Spring Security configured successfully
2025-11-30 13:38:18.599 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-11-30 13:38:18.617 [main] INFO  es.tfg.votacion.Application - Started Application in 4.692 seconds (process running for 5.054)
2025-11-30 13:39:38.106 [tomcat-handler-0] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-30 13:39:38.107 [tomcat-handler-0] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-30 13:39:38.121 [tomcat-handler-0] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 13 ms
2025-11-30 13:39:38.270 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:39:38.453 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:39:38.455 [tomcat-handler-0] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:39:38.495 [tomcat-handler-0] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:39:38.496 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:39:38.497 [tomcat-handler-0] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:39:38.498 [tomcat-handler-0] INFO  e.t.v.controller.ElectionController - Checking vote status for user admin in election election-f9e4da2a: hasVoted=false
2025-11-30 13:39:38.504 [tomcat-handler-0] INFO  e.t.v.controller.ElectionController - Returning 1 active elections
2025-11-30 13:39:39.659 [tomcat-handler-1] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:39:39.662 [tomcat-handler-1] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:39:39.662 [tomcat-handler-1] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:39:39.664 [tomcat-handler-1] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:39:39.665 [tomcat-handler-1] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:39:39.668 [tomcat-handler-1] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:39:39.668 [tomcat-handler-1] INFO  e.t.v.controller.ElectionController - Checking vote status for user admin in election election-f9e4da2a: hasVoted=false
2025-11-30 13:39:39.668 [tomcat-handler-1] INFO  e.t.v.controller.ElectionController - Returning 1 active elections
2025-11-30 13:39:53.316 [tomcat-handler-2] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:39:53.318 [tomcat-handler-2] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:39:53.318 [tomcat-handler-2] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:39:53.322 [tomcat-handler-2] INFO  e.t.v.controller.ElectionController - Fetching election: election-f9e4da2a
2025-11-30 13:39:53.322 [tomcat-handler-2] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:39:53.324 [tomcat-handler-2] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:39:58.860 [tomcat-handler-3] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:39:58.862 [tomcat-handler-3] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:39:58.863 [tomcat-handler-3] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:39:58.864 [tomcat-handler-3] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:39:58.865 [tomcat-handler-3] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:39:58.866 [tomcat-handler-3] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:39:58.867 [tomcat-handler-3] INFO  e.t.v.controller.ElectionController - Checking vote status for user admin in election election-f9e4da2a: hasVoted=false
2025-11-30 13:39:58.867 [tomcat-handler-3] INFO  e.t.v.controller.ElectionController - Returning 1 active elections
2025-11-30 13:40:07.857 [tomcat-handler-4] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:40:07.859 [tomcat-handler-4] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:40:07.860 [tomcat-handler-4] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:40:07.861 [tomcat-handler-4] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:40:07.861 [tomcat-handler-4] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:40:07.863 [tomcat-handler-4] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:40:07.863 [tomcat-handler-4] INFO  e.t.v.controller.ElectionController - Checking vote status for user admin in election election-f9e4da2a: hasVoted=false
2025-11-30 13:40:07.863 [tomcat-handler-4] INFO  e.t.v.controller.ElectionController - Returning 1 active elections
2025-11-30 13:40:09.648 [tomcat-handler-5] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:40:09.650 [tomcat-handler-5] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:40:09.650 [tomcat-handler-5] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:40:09.652 [tomcat-handler-5] INFO  e.t.v.controller.ElectionController - Fetching all elections (ADMIN) from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:40:09.652 [tomcat-handler-5] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:40:09.654 [tomcat-handler-5] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:40:09.654 [tomcat-handler-5] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-11-30 13:40:09.655 [tomcat-handler-5] INFO  e.t.v.controller.ElectionController - Returning 1 elections
2025-11-30 13:43:57.735 [tomcat-handler-7] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:43:57.737 [tomcat-handler-7] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:43:57.738 [tomcat-handler-7] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:43:57.739 [tomcat-handler-7] INFO  e.t.v.controller.ElectionController - Fetching all elections (ADMIN) from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:43:57.739 [tomcat-handler-7] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:43:57.741 [tomcat-handler-7] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:43:57.741 [tomcat-handler-7] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-11-30 13:43:57.741 [tomcat-handler-7] INFO  e.t.v.controller.ElectionController - Returning 1 elections
2025-11-30 13:44:07.228 [tomcat-handler-8] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:44:07.230 [tomcat-handler-8] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:44:07.230 [tomcat-handler-8] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:44:07.232 [tomcat-handler-8] INFO  e.t.v.controller.ElectionController - Fetching all elections (ADMIN) from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:44:07.232 [tomcat-handler-8] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:44:07.234 [tomcat-handler-8] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:44:07.234 [tomcat-handler-8] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-11-30 13:44:07.234 [tomcat-handler-8] INFO  e.t.v.controller.ElectionController - Returning 1 elections
2025-11-30 13:44:12.002 [tomcat-handler-9] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:44:12.003 [tomcat-handler-9] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:44:12.003 [tomcat-handler-9] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:44:12.004 [tomcat-handler-9] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:44:12.005 [tomcat-handler-9] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:44:12.006 [tomcat-handler-9] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:44:12.007 [tomcat-handler-9] INFO  e.t.v.controller.ElectionController - Checking vote status for user admin in election election-f9e4da2a: hasVoted=false
2025-11-30 13:44:12.007 [tomcat-handler-9] INFO  e.t.v.controller.ElectionController - Returning 1 active elections
2025-11-30 13:44:13.651 [tomcat-handler-10] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:44:13.653 [tomcat-handler-10] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:44:13.653 [tomcat-handler-10] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:44:13.655 [tomcat-handler-10] INFO  e.t.v.controller.ElectionController - Fetching all elections (ADMIN) from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:44:13.655 [tomcat-handler-10] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:44:13.657 [tomcat-handler-10] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:44:13.657 [tomcat-handler-10] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-11-30 13:44:13.657 [tomcat-handler-10] INFO  e.t.v.controller.ElectionController - Returning 1 elections
2025-11-30 13:46:16.791 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:46:16.815 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:46:16.815 [tomcat-handler-12] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:46:16.823 [tomcat-handler-12] INFO  e.t.v.controller.ElectionController - Fetching all elections (ADMIN) from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:46:16.824 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:46:16.825 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:46:16.825 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-11-30 13:46:16.826 [tomcat-handler-12] INFO  e.t.v.controller.ElectionController - Returning 1 elections
2025-11-30 13:52:54.938 [tomcat-handler-14] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:52:54.940 [tomcat-handler-14] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:52:54.941 [tomcat-handler-14] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 13:52:54.942 [tomcat-handler-14] INFO  e.t.v.controller.ElectionController - Fetching all elections (ADMIN) from IP: 0:0:0:0:0:0:0:1
2025-11-30 13:52:54.942 [tomcat-handler-14] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 13:52:54.944 [tomcat-handler-14] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 13:52:54.944 [tomcat-handler-14] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-11-30 13:52:54.944 [tomcat-handler-14] INFO  e.t.v.controller.ElectionController - Returning 1 elections
2025-11-30 14:12:30.441 [tomcat-handler-16] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 14:12:30.443 [tomcat-handler-16] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 14:12:30.443 [tomcat-handler-16] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 14:12:30.445 [tomcat-handler-16] INFO  e.t.v.controller.ElectionController - Fetching all elections (ADMIN) from IP: 0:0:0:0:0:0:0:1
2025-11-30 14:12:30.446 [tomcat-handler-16] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 14:12:30.448 [tomcat-handler-16] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 14:12:30.448 [tomcat-handler-16] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-11-30 14:12:30.448 [tomcat-handler-16] INFO  e.t.v.controller.ElectionController - Returning 1 elections
2025-11-30 14:12:37.790 [tomcat-handler-17] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 14:12:37.792 [tomcat-handler-17] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 14:12:37.798 [tomcat-handler-17] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 14:12:37.808 [tomcat-handler-17] INFO  e.t.v.controller.ElectionController - Fetching all elections (ADMIN) from IP: 0:0:0:0:0:0:0:1
2025-11-30 14:12:37.809 [tomcat-handler-17] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 14:12:37.810 [tomcat-handler-17] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 14:12:37.811 [tomcat-handler-17] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-11-30 14:12:37.823 [tomcat-handler-17] INFO  e.t.v.controller.ElectionController - Returning 1 elections
2025-11-30 14:12:39.551 [tomcat-handler-19] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 14:12:39.553 [tomcat-handler-19] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 14:12:39.553 [tomcat-handler-19] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 14:12:39.555 [tomcat-handler-19] INFO  e.t.v.controller.ElectionController - Fetching results for election: election-f9e4da2a
2025-11-30 14:12:39.555 [tomcat-handler-19] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 14:12:39.556 [tomcat-handler-19] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 14:12:39.556 [tomcat-handler-19] DEBUG es.tfg.votacion.service.AuthService - User admin has role Administrador (admin)
2025-11-30 14:12:39.558 [tomcat-handler-19] INFO  e.t.v.controller.ElectionController - Results fetched for election: election-f9e4da2a by admin
2025-11-30 14:18:24.012 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-30 14:18:24.018 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-30 14:18:24.027 [SpringApplicationShutdownHook] INFO  e.tfg.votacion.service.FabricService - Closing Fabric Gateway connection
2025-11-30 14:18:24.034 [SpringApplicationShutdownHook] INFO  e.t.votacion.service.StorageService - Shutting down Storage Service
2025-11-30 14:18:24.034 [SpringApplicationShutdownHook] DEBUG e.t.votacion.service.StorageService - Master key cleared from memory
2025-11-30 14:18:30.685 [main] INFO  es.tfg.votacion.Application - Starting Application using Java 21.0.9 with PID 1334536 (/home/ehuetadr/TFG/VotacionBC/backend-spring/target/classes started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-30 14:18:30.688 [main] DEBUG es.tfg.votacion.Application - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-30 14:18:30.689 [main] INFO  es.tfg.votacion.Application - No active profile set, falling back to 1 default profile: "default"
2025-11-30 14:18:31.453 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-30 14:18:31.471 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-30 14:18:31.471 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-30 14:18:31.558 [main] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring embedded WebApplicationContext
2025-11-30 14:18:31.559 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 822 ms
2025-11-30 14:18:31.640 [main] INFO  es.tfg.votacion.service.AuthService - Initializing Authentication Service (Mock Mode)
2025-11-30 14:18:31.640 [main] DEBUG es.tfg.votacion.service.AuthService - Loading mock users from: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-30 14:18:31.674 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: juan.perez (role: Votante (voter), active: true)
2025-11-30 14:18:31.675 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: maria.gonzalez (role: Votante (voter), active: true)
2025-11-30 14:18:31.675 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: admin (role: Administrador (admin), active: true)
2025-11-30 14:18:31.676 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: auditor (role: Auditor (auditor), active: true)
2025-11-30 14:18:31.676 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: carlos.martin (role: Votante (voter), active: true)
2025-11-30 14:18:31.676 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: ana.rodriguez (role: Votante (voter), active: true)
2025-11-30 14:18:31.676 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: pedro.lopez (role: Administrador (admin), active: true)
2025-11-30 14:18:31.676 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: lucia.garcia (role: Votante (voter), active: false)
2025-11-30 14:18:31.677 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: test.user (role: Votante (voter), active: true)
2025-11-30 14:18:31.677 [main] INFO  es.tfg.votacion.service.AuthService - Loaded 9 mock users from /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-30 14:18:31.680 [main] DEBUG es.tfg.votacion.service.AuthService - JWT signing key initialized with HS256 algorithm
2025-11-30 14:18:31.681 [main] INFO  es.tfg.votacion.service.AuthService - JWT signing key initialized successfully
2025-11-30 14:18:31.681 [main] DEBUG es.tfg.votacion.service.AuthService - JWT issuer: votacion-blockchain-poc
2025-11-30 14:18:31.681 [main] DEBUG es.tfg.votacion.service.AuthService - JWT audience: voting-system
2025-11-30 14:18:31.681 [main] DEBUG es.tfg.votacion.service.AuthService - JWT expiration: 3600 seconds
2025-11-30 14:18:31.681 [main] DEBUG es.tfg.votacion.service.AuthService - Allowed roles: [voter, admin, auditor]
2025-11-30 14:18:31.681 [main] WARN  es.tfg.votacion.service.AuthService - Running in MOCK authentication mode - not suitable for production!
2025-11-30 14:18:31.747 [main] DEBUG e.t.v.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-11-30 14:18:31.848 [main] INFO  e.t.votacion.service.StorageService - Initializing Storage Service with AES-GCM encryption
2025-11-30 14:18:31.849 [main] DEBUG e.t.votacion.service.StorageService - Loading encryption key from keystore: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/keystore/keystore.json
2025-11-30 14:18:31.854 [main] DEBUG e.t.votacion.service.StorageService - Keystore loaded - algorithm: AES/GCM/NoPadding, key length: 256 bits
2025-11-30 14:18:31.856 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded and validated successfully
2025-11-30 14:18:31.856 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded successfully from keystore
2025-11-30 14:18:31.857 [main] INFO  e.t.votacion.service.StorageService - Storage directory initialized: /home/ehuetadr/TFG/VotacionBC/backend-spring/data/storage
2025-11-30 14:18:31.857 [main] DEBUG e.t.votacion.service.StorageService - Encryption algorithm: AES/GCM/NoPadding
2025-11-30 14:18:31.857 [main] DEBUG e.t.votacion.service.StorageService - Key length: 256 bits
2025-11-30 14:18:31.858 [main] DEBUG e.t.votacion.service.StorageService - IV length: 12 bytes
2025-11-30 14:18:31.859 [main] DEBUG e.t.votacion.service.StorageService - Tag length: 128 bits
2025-11-30 14:18:31.859 [main] INFO  e.t.votacion.service.StorageService - Automatic cleanup enabled - retention: 30 days
2025-11-30 14:18:31.889 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-30 14:18:31.890 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-30 14:18:31.890 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /home/ehuetadr/TFG/VotacionBC/fabric/test-network/organizations/peerOrganizations/org1.example.com/connection-org1.json
2025-11-30 14:18:31.890 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /home/ehuetadr/TFG/VotacionBC/backend-spring/wallet
2025-11-30 14:18:31.891 [main] DEBUG e.tfg.votacion.service.FabricService - User: appUser
2025-11-30 14:18:31.891 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: electionchannel
2025-11-30 14:18:31.891 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: electioncc
2025-11-30 14:18:32.684 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Fabric network
2025-11-30 14:18:32.685 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-30 14:18:32.686 [main] INFO  e.t.votacion.service.ElectionService - Initializing ElectionService
2025-11-30 14:18:32.790 [main] INFO  e.t.votacion.service.ElectionService - Loaded 1 elections from disk
2025-11-30 14:18:33.267 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: f078617a-1f1e-4bb6-8d06-254c1d74ac2e

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-30 14:18:33.275 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-30 14:18:33.328 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring Spring Security with JWT authentication
2025-11-30 14:18:33.330 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-30 14:18:33.376 [main] INFO  e.tfg.votacion.config.SecurityConfig - Spring Security configured successfully
2025-11-30 14:18:33.751 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-11-30 14:18:33.760 [main] INFO  es.tfg.votacion.Application - Started Application in 3.718 seconds (process running for 5.108)
2025-11-30 14:21:33.758 [tomcat-handler-0] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-30 14:21:33.759 [tomcat-handler-0] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-30 14:21:33.761 [tomcat-handler-0] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-11-30 14:21:33.835 [tomcat-handler-1] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 14:21:33.953 [tomcat-handler-1] WARN  es.tfg.votacion.service.AuthService - JWT validation failed: JWT expired 530952 milliseconds ago at 2025-11-30T13:12:43.000Z. Current time: 2025-11-30T13:21:33.952Z. Allowed clock skew: 0 milliseconds.
2025-11-30 14:21:33.954 [tomcat-handler-1] DEBUG e.t.v.config.JwtAuthenticationFilter - Invalid JWT token for request to: /api/v1/elections/all
2025-11-30 14:21:33.963 [tomcat-handler-1] ERROR e.t.v.c.JwtAuthenticationEntryPoint - Unauthorized access attempt to: /api/v1/elections/all - Full authentication is required to access this resource
2025-11-30 14:21:40.260 [tomcat-handler-2] INFO  e.t.v.controller.AuthController - Login attempt for user: admin from IP: 0:0:0:0:0:0:0:1
2025-11-30 14:21:40.260 [tomcat-handler-2] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: admin
2025-11-30 14:21:40.375 [tomcat-handler-2] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: admin (role: Administrador (admin))
2025-11-30 14:21:40.376 [tomcat-handler-2] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: admin
2025-11-30 14:21:40.404 [tomcat-handler-2] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: admin (expires: Sun Nov 30 15:21:40 CET 2025)
2025-11-30 14:21:40.405 [tomcat-handler-2] INFO  e.t.v.controller.AuthController - User authenticated successfully: admin (role: Administrador)
2025-11-30 14:21:40.493 [tomcat-handler-3] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 14:21:40.499 [tomcat-handler-3] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 14:21:40.504 [tomcat-handler-3] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 14:21:40.508 [tomcat-handler-3] INFO  e.t.v.controller.ElectionController - Fetching all elections (ADMIN) from IP: 0:0:0:0:0:0:0:1
2025-11-30 14:21:40.508 [tomcat-handler-3] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 14:21:40.509 [tomcat-handler-3] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 14:21:40.510 [tomcat-handler-3] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-11-30 14:21:40.511 [tomcat-handler-3] INFO  e.t.v.controller.ElectionController - Returning 1 elections
2025-11-30 14:21:42.653 [tomcat-handler-4] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 14:21:42.655 [tomcat-handler-4] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 14:21:42.655 [tomcat-handler-4] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 14:21:42.662 [tomcat-handler-4] INFO  e.t.v.controller.ElectionController - Fetching results for election: election-f9e4da2a
2025-11-30 14:21:42.662 [tomcat-handler-4] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 14:21:42.664 [tomcat-handler-4] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 14:21:42.665 [tomcat-handler-4] DEBUG es.tfg.votacion.service.AuthService - User admin has role Administrador (admin)
2025-11-30 14:21:42.670 [tomcat-handler-4] INFO  e.t.v.controller.ElectionController - Results fetched for election: election-f9e4da2a by admin
2025-11-30 14:21:51.244 [tomcat-handler-5] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 14:21:51.248 [tomcat-handler-5] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 14:21:51.249 [tomcat-handler-5] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 14:21:51.250 [tomcat-handler-5] INFO  e.t.v.controller.ElectionController - Fetching all elections (ADMIN) from IP: 0:0:0:0:0:0:0:1
2025-11-30 14:21:51.250 [tomcat-handler-5] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-30 14:21:51.252 [tomcat-handler-5] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-30 14:21:51.254 [tomcat-handler-5] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-11-30 14:21:51.255 [tomcat-handler-5] INFO  e.t.v.controller.ElectionController - Returning 1 elections
