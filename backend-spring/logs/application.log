2025-12-08 09:44:44.299 [main] INFO  es.tfg.votacion.Application - Starting Application using Java 21.0.9 with PID 562189 (/home/ehuetadr/TFG/VotacionBC/backend-spring/target/classes started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-12-08 09:44:44.301 [main] DEBUG es.tfg.votacion.Application - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-12-08 09:44:44.304 [main] INFO  es.tfg.votacion.Application - No active profile set, falling back to 1 default profile: "default"
2025-12-08 09:44:49.561 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-08 09:44:49.599 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-08 09:44:49.600 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-12-08 09:44:49.809 [main] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring embedded WebApplicationContext
2025-12-08 09:44:49.810 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 5028 ms
2025-12-08 09:44:50.108 [main] INFO  es.tfg.votacion.service.AuthService - Initializing Authentication Service (Mock Mode)
2025-12-08 09:44:50.108 [main] DEBUG es.tfg.votacion.service.AuthService - Loading mock users from: src/main/resources/mock/users.json
2025-12-08 09:44:50.166 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: juan.perez (role: Votante (voter), active: true)
2025-12-08 09:44:50.167 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: maria.gonzalez (role: Votante (voter), active: true)
2025-12-08 09:44:50.167 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: admin (role: Administrador (admin), active: true)
2025-12-08 09:44:50.167 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: auditor (role: Auditor (auditor), active: true)
2025-12-08 09:44:50.167 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: carlos.martin (role: Votante (voter), active: true)
2025-12-08 09:44:50.167 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: ana.rodriguez (role: Votante (voter), active: true)
2025-12-08 09:44:50.168 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: pedro.lopez (role: Administrador (admin), active: true)
2025-12-08 09:44:50.168 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: lucia.garcia (role: Votante (voter), active: false)
2025-12-08 09:44:50.168 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: test.user (role: Votante (voter), active: true)
2025-12-08 09:44:50.168 [main] INFO  es.tfg.votacion.service.AuthService - Loaded 9 mock users from src/main/resources/mock/users.json
2025-12-08 09:44:50.179 [main] DEBUG es.tfg.votacion.service.AuthService - JWT signing key initialized with HS256 algorithm
2025-12-08 09:44:50.180 [main] INFO  es.tfg.votacion.service.AuthService - JWT signing key initialized successfully
2025-12-08 09:44:50.180 [main] DEBUG es.tfg.votacion.service.AuthService - JWT issuer: votacion-blockchain-poc
2025-12-08 09:44:50.180 [main] DEBUG es.tfg.votacion.service.AuthService - JWT audience: voting-system
2025-12-08 09:44:50.180 [main] DEBUG es.tfg.votacion.service.AuthService - JWT expiration: 3600 seconds
2025-12-08 09:44:50.180 [main] DEBUG es.tfg.votacion.service.AuthService - Allowed roles: [voter, admin, auditor]
2025-12-08 09:44:50.180 [main] WARN  es.tfg.votacion.service.AuthService - Running in MOCK authentication mode - not suitable for production!
2025-12-08 09:44:50.371 [main] DEBUG e.t.v.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-12-08 09:44:50.627 [main] INFO  e.t.votacion.service.StorageService - Initializing Storage Service with AES-GCM encryption
2025-12-08 09:44:50.634 [main] DEBUG e.t.votacion.service.StorageService - Loading encryption key from keystore: src/main/resources/keystore/keystore.json
2025-12-08 09:44:50.655 [main] DEBUG e.t.votacion.service.StorageService - Keystore loaded - algorithm: AES/GCM/NoPadding, key length: 256 bits
2025-12-08 09:44:50.656 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded and validated successfully
2025-12-08 09:44:50.658 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded successfully from keystore
2025-12-08 09:44:50.660 [main] INFO  e.t.votacion.service.StorageService - Storage directory initialized: /home/ehuetadr/TFG/VotacionBC/backend-spring/data/storage
2025-12-08 09:44:50.663 [main] DEBUG e.t.votacion.service.StorageService - Encryption algorithm: AES/GCM/NoPadding
2025-12-08 09:44:50.664 [main] DEBUG e.t.votacion.service.StorageService - Key length: 256 bits
2025-12-08 09:44:50.664 [main] DEBUG e.t.votacion.service.StorageService - IV length: 12 bytes
2025-12-08 09:44:50.664 [main] DEBUG e.t.votacion.service.StorageService - Tag length: 128 bits
2025-12-08 09:44:50.664 [main] INFO  e.t.votacion.service.StorageService - Automatic cleanup enabled - retention: 30 days
2025-12-08 09:44:50.713 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-12-08 09:44:50.714 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-12-08 09:44:50.714 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: ../fabric/test-network/organizations/peerOrganizations/org1.example.com/connection-org1.json
2025-12-08 09:44:50.717 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: wallet
2025-12-08 09:44:50.718 [main] DEBUG e.tfg.votacion.service.FabricService - User: appUser
2025-12-08 09:44:50.723 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: electionchannel
2025-12-08 09:44:50.730 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: electioncc
2025-12-08 09:44:53.767 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Fabric network
2025-12-08 09:44:53.767 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-12-08 09:44:53.769 [main] INFO  e.t.votacion.service.ElectionService - Initializing ElectionService
2025-12-08 09:44:53.769 [main] INFO  e.t.votacion.service.ElectionService - No existing data found, creating mock elections
2025-12-08 09:44:53.770 [main] INFO  e.t.votacion.service.ElectionService - Mock elections creation disabled.
2025-12-08 09:44:53.887 [main] INFO  e.t.votacion.service.ElectionService - Data saved to disk
2025-12-08 09:44:55.210 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 9759f18d-ee78-4bbd-8d58-2608041bc0ce

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-12-08 09:44:55.227 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-12-08 09:44:55.376 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring Spring Security with JWT authentication
2025-12-08 09:44:55.379 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-12-08 09:44:55.468 [main] INFO  e.tfg.votacion.config.SecurityConfig - Spring Security configured successfully
2025-12-08 09:44:56.447 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/api/v1'
2025-12-08 09:44:56.469 [main] INFO  es.tfg.votacion.Application - Started Application in 13.893 seconds (process running for 15.142)
2025-12-08 10:03:42.418 [tomcat-handler-1] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-08 10:03:42.419 [tomcat-handler-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-08 10:03:42.421 [tomcat-handler-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-12-08 10:03:42.713 [tomcat-handler-2] INFO  e.t.v.controller.AuthController - Login attempt for user: admin from IP: 0:0:0:0:0:0:0:1
2025-12-08 10:03:42.713 [tomcat-handler-2] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: admin
2025-12-08 10:03:42.823 [tomcat-handler-2] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: admin (role: Administrador (admin))
2025-12-08 10:03:42.823 [tomcat-handler-2] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: admin
2025-12-08 10:03:42.965 [tomcat-handler-2] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: admin (expires: Mon Dec 08 11:03:42 CET 2025)
2025-12-08 10:03:42.967 [tomcat-handler-2] INFO  e.t.v.controller.AuthController - User authenticated successfully: admin (role: Administrador)
2025-12-08 10:03:43.192 [tomcat-handler-4] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 10:03:43.280 [tomcat-handler-4] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-12-08 10:03:43.281 [tomcat-handler-4] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-12-08 10:03:43.284 [tomcat-handler-4] INFO  e.t.v.controller.ElectionController - Fetching all elections (ADMIN) from IP: 0:0:0:0:0:0:0:1
2025-12-08 10:03:43.284 [tomcat-handler-4] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 10:03:43.285 [tomcat-handler-4] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-12-08 10:03:43.286 [tomcat-handler-4] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-12-08 10:03:43.288 [tomcat-handler-4] INFO  e.t.v.controller.ElectionController - Returning 0 elections
2025-12-08 12:02:40.458 [tomcat-handler-7] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 12:02:40.472 [tomcat-handler-7] WARN  es.tfg.votacion.service.AuthService - JWT validation failed: JWT expired 3538460 milliseconds ago at 2025-12-08T10:03:42.000Z. Current time: 2025-12-08T11:02:40.460Z. Allowed clock skew: 0 milliseconds.
2025-12-08 12:02:40.472 [tomcat-handler-7] DEBUG e.t.v.config.JwtAuthenticationFilter - Invalid JWT token for request to: /api/v1/elections
2025-12-08 12:02:40.474 [tomcat-handler-7] ERROR e.t.v.c.JwtAuthenticationEntryPoint - Unauthorized access attempt to: /api/v1/elections - Full authentication is required to access this resource
2025-12-08 12:02:48.989 [tomcat-handler-9] INFO  e.t.v.controller.AuthController - Login attempt for user: admin from IP: 0:0:0:0:0:0:0:1
2025-12-08 12:02:48.989 [tomcat-handler-9] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: admin
2025-12-08 12:02:49.092 [tomcat-handler-9] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: admin (role: Administrador (admin))
2025-12-08 12:02:49.092 [tomcat-handler-9] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: admin
2025-12-08 12:02:49.093 [tomcat-handler-9] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: admin (expires: Mon Dec 08 13:02:49 CET 2025)
2025-12-08 12:02:49.093 [tomcat-handler-9] INFO  e.t.v.controller.AuthController - User authenticated successfully: admin (role: Administrador)
2025-12-08 12:03:51.637 [tomcat-handler-11] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 12:03:51.638 [tomcat-handler-11] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-12-08 12:03:51.638 [tomcat-handler-11] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-12-08 12:03:51.723 [tomcat-handler-11] INFO  e.t.v.controller.ElectionController - Creating new election: Eleccion prueba 08/12/2025
2025-12-08 12:03:51.723 [tomcat-handler-11] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 12:03:51.724 [tomcat-handler-11] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-12-08 12:03:51.725 [tomcat-handler-11] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-12-08 12:03:51.725 [tomcat-handler-11] INFO  e.t.votacion.service.ElectionService - Election created: election-6dfd04a6
2025-12-08 12:03:51.726 [tomcat-handler-11] INFO  e.tfg.votacion.service.FabricService - Creating election on blockchain: election-6dfd04a6
2025-12-08 12:03:55.346 [tomcat-handler-11] INFO  e.tfg.votacion.service.FabricService - Election created successfully on blockchain: election-6dfd04a6
2025-12-08 12:03:55.347 [tomcat-handler-11] INFO  e.t.votacion.service.ElectionService - Election created on blockchain: election-6dfd04a6
2025-12-08 12:03:55.350 [tomcat-handler-11] INFO  e.t.votacion.service.ElectionService - Data saved to disk
2025-12-08 12:03:55.373 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 12:03:55.374 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-12-08 12:03:55.375 [tomcat-handler-12] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-12-08 12:03:55.377 [tomcat-handler-12] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-12-08 12:03:55.378 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 12:03:55.379 [tomcat-handler-12] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-12-08 12:03:55.380 [tomcat-handler-12] INFO  e.t.v.controller.ElectionController - Checking vote status for user admin in election election-6dfd04a6: hasVoted=false
2025-12-08 12:03:55.381 [tomcat-handler-12] INFO  e.t.v.controller.ElectionController - Returning 1 active elections
2025-12-08 12:03:56.957 [tomcat-handler-14] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 12:03:56.958 [tomcat-handler-14] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-12-08 12:03:56.959 [tomcat-handler-14] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-12-08 12:03:56.960 [tomcat-handler-14] INFO  e.t.v.controller.ElectionController - Fetching all elections (ADMIN) from IP: 0:0:0:0:0:0:0:1
2025-12-08 12:03:56.962 [tomcat-handler-14] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 12:03:56.964 [tomcat-handler-14] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-12-08 12:03:56.964 [tomcat-handler-14] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-12-08 12:03:56.965 [tomcat-handler-14] INFO  e.t.v.controller.ElectionController - Returning 1 elections
2025-12-08 12:04:40.346 [tomcat-handler-15] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 12:04:40.348 [tomcat-handler-15] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-12-08 12:04:40.348 [tomcat-handler-15] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-12-08 12:04:40.349 [tomcat-handler-15] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-12-08 12:04:40.349 [tomcat-handler-15] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 12:04:40.351 [tomcat-handler-15] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-12-08 12:04:40.351 [tomcat-handler-15] INFO  e.t.v.controller.ElectionController - Checking vote status for user admin in election election-6dfd04a6: hasVoted=false
2025-12-08 12:04:40.351 [tomcat-handler-15] INFO  e.t.v.controller.ElectionController - Returning 1 active elections
2025-12-08 12:04:48.415 [tomcat-handler-16] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 12:04:48.417 [tomcat-handler-16] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-12-08 12:04:48.418 [tomcat-handler-16] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-12-08 12:04:48.419 [tomcat-handler-16] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-12-08 12:04:48.419 [tomcat-handler-16] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 12:04:48.421 [tomcat-handler-16] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-12-08 12:04:48.421 [tomcat-handler-16] INFO  e.t.v.controller.ElectionController - Checking vote status for user admin in election election-6dfd04a6: hasVoted=false
2025-12-08 12:04:48.421 [tomcat-handler-16] INFO  e.t.v.controller.ElectionController - Returning 1 active elections
2025-12-08 12:05:47.830 [tomcat-handler-18] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 12:05:47.832 [tomcat-handler-18] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-12-08 12:05:47.833 [tomcat-handler-18] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-12-08 12:05:47.839 [tomcat-handler-18] INFO  e.t.v.controller.ElectionController - Fetching election: election-6dfd04a6
2025-12-08 12:05:47.840 [tomcat-handler-18] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 12:05:47.842 [tomcat-handler-18] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-12-08 12:05:51.365 [tomcat-handler-20] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 12:05:51.367 [tomcat-handler-20] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-12-08 12:05:51.368 [tomcat-handler-20] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-12-08 12:05:51.370 [tomcat-handler-20] ERROR e.t.v.config.JwtAccessDeniedHandler - Access denied to: /api/v1/elections/election-6dfd04a6/vote - Access Denied
2025-12-08 12:06:20.728 [tomcat-handler-22] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 12:06:20.730 [tomcat-handler-22] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-12-08 12:06:20.731 [tomcat-handler-22] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-12-08 12:06:20.734 [tomcat-handler-22] INFO  e.t.v.controller.AuthController - User logged out: admin from IP: 0:0:0:0:0:0:0:1
2025-12-08 12:06:25.030 [tomcat-handler-23] INFO  e.t.v.controller.AuthController - Login attempt for user: maria.gonzalez from IP: 0:0:0:0:0:0:0:1
2025-12-08 12:06:25.030 [tomcat-handler-23] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: maria.gonzalez
2025-12-08 12:06:25.146 [tomcat-handler-23] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: maria.gonzalez (role: Votante (voter))
2025-12-08 12:06:25.146 [tomcat-handler-23] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: maria.gonzalez
2025-12-08 12:06:25.147 [tomcat-handler-23] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: maria.gonzalez (expires: Mon Dec 08 13:06:25 CET 2025)
2025-12-08 12:06:25.147 [tomcat-handler-23] INFO  e.t.v.controller.AuthController - User authenticated successfully: maria.gonzalez (role: Votante)
2025-12-08 12:06:25.181 [tomcat-handler-24] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 12:06:25.182 [tomcat-handler-24] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-12-08 12:06:25.182 [tomcat-handler-24] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-12-08 12:06:25.183 [tomcat-handler-24] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-12-08 12:06:25.183 [tomcat-handler-24] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 12:06:25.193 [tomcat-handler-24] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-12-08 12:06:25.195 [tomcat-handler-24] INFO  e.t.v.controller.ElectionController - Checking vote status for user maria.gonzalez in election election-6dfd04a6: hasVoted=false
2025-12-08 12:06:25.195 [tomcat-handler-24] INFO  e.t.v.controller.ElectionController - Returning 1 active elections
2025-12-08 12:06:30.079 [tomcat-handler-25] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 12:06:30.088 [tomcat-handler-25] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-12-08 12:06:30.088 [tomcat-handler-25] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-12-08 12:06:30.089 [tomcat-handler-25] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-12-08 12:06:30.089 [tomcat-handler-25] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 12:06:30.090 [tomcat-handler-25] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-12-08 12:06:30.090 [tomcat-handler-25] INFO  e.t.v.controller.ElectionController - Checking vote status for user maria.gonzalez in election election-6dfd04a6: hasVoted=false
2025-12-08 12:06:30.091 [tomcat-handler-25] INFO  e.t.v.controller.ElectionController - Returning 1 active elections
2025-12-08 12:06:33.207 [tomcat-handler-26] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 12:06:33.208 [tomcat-handler-26] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-12-08 12:06:33.209 [tomcat-handler-26] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-12-08 12:06:33.210 [tomcat-handler-26] INFO  e.t.v.controller.ElectionController - Fetching election: election-6dfd04a6
2025-12-08 12:06:33.210 [tomcat-handler-26] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 12:06:33.211 [tomcat-handler-26] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-12-08 12:06:37.286 [tomcat-handler-27] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 12:06:37.287 [tomcat-handler-27] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-12-08 12:06:37.287 [tomcat-handler-27] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-12-08 12:06:37.294 [tomcat-handler-27] INFO  e.t.v.controller.ElectionController - Vote submission for election: election-6dfd04a6
2025-12-08 12:06:37.295 [tomcat-handler-27] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 12:06:37.297 [tomcat-handler-27] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-12-08 12:06:37.300 [tomcat-handler-27] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: election-6dfd04a6 (146 bytes)
2025-12-08 12:06:37.300 [tomcat-handler-27] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 146 bytes
2025-12-08 12:06:37.302 [tomcat-handler-27] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 174 bytes (IV: 12, encrypted: 162)
2025-12-08 12:06:37.302 [tomcat-handler-27] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 174 bytes
2025-12-08 12:06:37.303 [tomcat-handler-27] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-election-6dfd04a6-1765191997300-3506e9f8.enc
2025-12-08 12:06:37.303 [tomcat-handler-27] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: e24d447748f7ea3b28b28a08b196e53375f4b4e8c55fcd0335f668d3d3425730
2025-12-08 12:06:37.304 [tomcat-handler-27] INFO  e.t.v.controller.ElectionController - Vote encrypted and stored: blobId=BLOB-election-6dfd04a6-1765191997300-3506e9f8
2025-12-08 12:06:37.304 [tomcat-handler-27] INFO  e.tfg.votacion.service.FabricService - Emitting vote commitment to blockchain - Election: election-6dfd04a6, Commitment: d1frC6vYDtoc3FQMIGgSgERUE66rWYupehL4Blgkl/0=
2025-12-08 12:06:39.527 [tomcat-handler-27] INFO  e.tfg.votacion.service.FabricService - Vote emitted successfully. TX-ID: 2ed8f406fbb37206067595842043fe0d67eb34996ec7160b0643308662bac7e9
2025-12-08 12:06:39.528 [tomcat-handler-27] INFO  e.t.v.controller.ElectionController - Vote registered in blockchain: txId=2ed8f406fbb37206067595842043fe0d67eb34996ec7160b0643308662bac7e9
2025-12-08 12:06:39.529 [tomcat-handler-27] INFO  e.t.votacion.service.ElectionService - Vote registered: electionId=election-6dfd04a6, userId=user_maria.gonzalez_002, optionId=opt-1
2025-12-08 12:06:39.531 [tomcat-handler-27] INFO  e.t.votacion.service.ElectionService - Data saved to disk
2025-12-08 12:06:39.535 [tomcat-handler-27] INFO  e.t.v.controller.ElectionController - Vote processed successfully for user: maria.gonzalez in election: election-6dfd04a6
2025-12-08 12:06:41.688 [tomcat-handler-28] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 12:06:41.689 [tomcat-handler-28] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-12-08 12:06:41.690 [tomcat-handler-28] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-12-08 12:06:41.691 [tomcat-handler-28] INFO  e.t.v.controller.ElectionController - Fetching election: election-6dfd04a6
2025-12-08 12:06:41.691 [tomcat-handler-28] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 12:06:41.693 [tomcat-handler-28] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-12-08 13:46:22.249 [tomcat-handler-31] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:46:22.250 [tomcat-handler-31] WARN  es.tfg.votacion.service.AuthService - JWT validation failed: JWT expired 2397250 milliseconds ago at 2025-12-08T12:06:25.000Z. Current time: 2025-12-08T12:46:22.250Z. Allowed clock skew: 0 milliseconds.
2025-12-08 13:46:22.251 [tomcat-handler-31] DEBUG e.t.v.config.JwtAuthenticationFilter - Invalid JWT token for request to: /api/v1/auth/logout
2025-12-08 13:46:22.251 [tomcat-handler-31] ERROR e.t.v.c.JwtAuthenticationEntryPoint - Unauthorized access attempt to: /api/v1/auth/logout - Full authentication is required to access this resource
2025-12-08 13:46:29.845 [tomcat-handler-33] INFO  e.t.v.controller.AuthController - Login attempt for user: juan.perez from IP: 0:0:0:0:0:0:0:1
2025-12-08 13:46:29.846 [tomcat-handler-33] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: juan.perez
2025-12-08 13:46:29.951 [tomcat-handler-33] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: juan.perez (role: Votante (voter))
2025-12-08 13:46:29.951 [tomcat-handler-33] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: juan.perez
2025-12-08 13:46:29.951 [tomcat-handler-33] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: juan.perez (expires: Mon Dec 08 14:46:29 CET 2025)
2025-12-08 13:46:29.952 [tomcat-handler-33] INFO  e.t.v.controller.AuthController - User authenticated successfully: juan.perez (role: Votante)
2025-12-08 13:46:30.005 [tomcat-handler-35] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:46:30.006 [tomcat-handler-35] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-12-08 13:46:30.006 [tomcat-handler-35] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-12-08 13:46:30.007 [tomcat-handler-35] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-12-08 13:46:30.008 [tomcat-handler-35] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:46:30.009 [tomcat-handler-35] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-12-08 13:46:30.009 [tomcat-handler-35] INFO  e.t.v.controller.ElectionController - Checking vote status for user juan.perez in election election-6dfd04a6: hasVoted=false
2025-12-08 13:46:30.009 [tomcat-handler-35] INFO  e.t.v.controller.ElectionController - Returning 1 active elections
2025-12-08 13:46:33.132 [tomcat-handler-36] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:46:33.133 [tomcat-handler-36] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-12-08 13:46:33.133 [tomcat-handler-36] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-12-08 13:46:33.134 [tomcat-handler-36] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-12-08 13:46:33.135 [tomcat-handler-36] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:46:33.136 [tomcat-handler-36] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-12-08 13:46:33.136 [tomcat-handler-36] INFO  e.t.v.controller.ElectionController - Checking vote status for user juan.perez in election election-6dfd04a6: hasVoted=false
2025-12-08 13:46:33.136 [tomcat-handler-36] INFO  e.t.v.controller.ElectionController - Returning 1 active elections
2025-12-08 13:46:34.411 [tomcat-handler-38] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:46:34.412 [tomcat-handler-38] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-12-08 13:46:34.412 [tomcat-handler-38] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-12-08 13:46:34.415 [tomcat-handler-38] INFO  e.t.v.controller.ElectionController - Fetching election: election-6dfd04a6
2025-12-08 13:46:34.415 [tomcat-handler-38] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:46:34.417 [tomcat-handler-38] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-12-08 13:46:41.252 [tomcat-handler-40] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:46:41.254 [tomcat-handler-40] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-12-08 13:46:41.254 [tomcat-handler-40] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-12-08 13:46:41.258 [tomcat-handler-40] INFO  e.t.v.controller.ElectionController - Vote submission for election: election-6dfd04a6
2025-12-08 13:46:41.258 [tomcat-handler-40] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:46:41.259 [tomcat-handler-40] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-12-08 13:46:41.259 [tomcat-handler-40] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: election-6dfd04a6 (142 bytes)
2025-12-08 13:46:41.259 [tomcat-handler-40] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 142 bytes
2025-12-08 13:46:41.260 [tomcat-handler-40] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 170 bytes (IV: 12, encrypted: 158)
2025-12-08 13:46:41.260 [tomcat-handler-40] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 170 bytes
2025-12-08 13:46:41.261 [tomcat-handler-40] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-election-6dfd04a6-1765198001259-2c07af57.enc
2025-12-08 13:46:41.261 [tomcat-handler-40] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: eb9c0d59230adf35d9f5b02e1ede57575482fb4c7a59ed2e340b9e538ecaac9d
2025-12-08 13:46:41.261 [tomcat-handler-40] INFO  e.t.v.controller.ElectionController - Vote encrypted and stored: blobId=BLOB-election-6dfd04a6-1765198001259-2c07af57
2025-12-08 13:46:41.261 [tomcat-handler-40] INFO  e.tfg.votacion.service.FabricService - Emitting vote commitment to blockchain - Election: election-6dfd04a6, Commitment: 5+ZPq4ZdzS3EvvDtPB7xKBRdN/HhkGjk87c//uk2xlw=
2025-12-08 13:46:41.761 [tomcat-handler-40] ERROR e.tfg.votacion.service.FabricService - Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-12-08 13:46:41.802 [tomcat-handler-40] ERROR e.tfg.votacion.service.FabricService - EndorseException details: chaincode response 500, User x509::CN=User1@org1.example.com, OU=client, L=San Francisco, ST=California, C=US::CN=ca.org1.example.com, O=org1.example.com, L=San Francisco, ST=California, C=US has already voted in election election-6dfd04a6; 
2025-12-08 13:46:41.802 [tomcat-handler-40] ERROR e.tfg.votacion.service.FabricService - Non-retriable error in emitVote: chaincode response 500, User x509::CN=User1@org1.example.com, OU=client, L=San Francisco, ST=California, C=US::CN=ca.org1.example.com, O=org1.example.com, L=San Francisco, ST=California, C=US has already voted in election election-6dfd04a6; 
2025-12-08 13:46:41.803 [tomcat-handler-40] WARN  e.t.v.controller.ElectionController - User juan.perez already voted in election election-6dfd04a6 on blockchain. Syncing local state.
2025-12-08 13:46:41.805 [tomcat-handler-40] INFO  e.t.votacion.service.ElectionService - Vote registered: electionId=election-6dfd04a6, userId=user_juan.perez_001, optionId=opt-1
2025-12-08 13:46:41.808 [tomcat-handler-40] INFO  e.t.votacion.service.ElectionService - Data saved to disk
2025-12-08 13:46:43.939 [tomcat-handler-41] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:46:43.940 [tomcat-handler-41] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-12-08 13:46:43.940 [tomcat-handler-41] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-12-08 13:46:43.943 [tomcat-handler-41] INFO  e.t.v.controller.ElectionController - Fetching election: election-6dfd04a6
2025-12-08 13:46:43.943 [tomcat-handler-41] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:46:43.944 [tomcat-handler-41] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-12-08 13:47:11.612 [tomcat-handler-42] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:47:11.614 [tomcat-handler-42] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-12-08 13:47:11.614 [tomcat-handler-42] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-12-08 13:47:11.615 [tomcat-handler-42] INFO  e.t.v.controller.AuthController - User logged out: juan.perez from IP: 0:0:0:0:0:0:0:1
2025-12-08 13:47:17.124 [tomcat-handler-43] INFO  e.t.v.controller.AuthController - Login attempt for user: maria.gonzalez from IP: 0:0:0:0:0:0:0:1
2025-12-08 13:47:17.124 [tomcat-handler-43] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: maria.gonzalez
2025-12-08 13:47:17.240 [tomcat-handler-43] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: maria.gonzalez (role: Votante (voter))
2025-12-08 13:47:17.240 [tomcat-handler-43] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: maria.gonzalez
2025-12-08 13:47:17.241 [tomcat-handler-43] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: maria.gonzalez (expires: Mon Dec 08 14:47:17 CET 2025)
2025-12-08 13:47:17.241 [tomcat-handler-43] INFO  e.t.v.controller.AuthController - User authenticated successfully: maria.gonzalez (role: Votante)
2025-12-08 13:47:17.279 [tomcat-handler-44] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:47:17.280 [tomcat-handler-44] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-12-08 13:47:17.280 [tomcat-handler-44] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-12-08 13:47:17.281 [tomcat-handler-44] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-12-08 13:47:17.281 [tomcat-handler-44] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:47:17.283 [tomcat-handler-44] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-12-08 13:47:17.283 [tomcat-handler-44] INFO  e.t.v.controller.ElectionController - Checking vote status for user maria.gonzalez in election election-6dfd04a6: hasVoted=true
2025-12-08 13:47:17.283 [tomcat-handler-44] INFO  e.t.v.controller.ElectionController - Returning 1 active elections
2025-12-08 13:47:18.694 [tomcat-handler-45] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:47:18.695 [tomcat-handler-45] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-12-08 13:47:18.695 [tomcat-handler-45] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-12-08 13:47:18.696 [tomcat-handler-45] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-12-08 13:47:18.697 [tomcat-handler-45] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:47:18.697 [tomcat-handler-45] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-12-08 13:47:18.698 [tomcat-handler-45] INFO  e.t.v.controller.ElectionController - Checking vote status for user maria.gonzalez in election election-6dfd04a6: hasVoted=true
2025-12-08 13:47:18.698 [tomcat-handler-45] INFO  e.t.v.controller.ElectionController - Returning 1 active elections
2025-12-08 13:47:24.675 [tomcat-handler-46] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:47:24.675 [tomcat-handler-46] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-12-08 13:47:24.676 [tomcat-handler-46] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-12-08 13:47:24.677 [tomcat-handler-46] INFO  e.t.v.controller.AuthController - User logged out: maria.gonzalez from IP: 0:0:0:0:0:0:0:1
2025-12-08 13:47:29.302 [tomcat-handler-47] INFO  e.t.v.controller.AuthController - Login attempt for user: juan.perez from IP: 0:0:0:0:0:0:0:1
2025-12-08 13:47:29.302 [tomcat-handler-47] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: juan.perez
2025-12-08 13:47:29.407 [tomcat-handler-47] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: juan.perez (role: Votante (voter))
2025-12-08 13:47:29.407 [tomcat-handler-47] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: juan.perez
2025-12-08 13:47:29.408 [tomcat-handler-47] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: juan.perez (expires: Mon Dec 08 14:47:29 CET 2025)
2025-12-08 13:47:29.408 [tomcat-handler-47] INFO  e.t.v.controller.AuthController - User authenticated successfully: juan.perez (role: Votante)
2025-12-08 13:47:29.436 [tomcat-handler-48] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:47:29.437 [tomcat-handler-48] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-12-08 13:47:29.437 [tomcat-handler-48] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-12-08 13:47:29.438 [tomcat-handler-48] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-12-08 13:47:29.438 [tomcat-handler-48] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:47:29.439 [tomcat-handler-48] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-12-08 13:47:29.439 [tomcat-handler-48] INFO  e.t.v.controller.ElectionController - Checking vote status for user juan.perez in election election-6dfd04a6: hasVoted=true
2025-12-08 13:47:29.439 [tomcat-handler-48] INFO  e.t.v.controller.ElectionController - Returning 1 active elections
2025-12-08 13:47:34.651 [tomcat-handler-49] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:47:34.652 [tomcat-handler-49] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-12-08 13:47:34.653 [tomcat-handler-49] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-12-08 13:47:34.654 [tomcat-handler-49] INFO  e.t.v.controller.ElectionController - Fetching election: election-6dfd04a6
2025-12-08 13:47:34.654 [tomcat-handler-49] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:47:34.655 [tomcat-handler-49] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-12-08 13:47:55.319 [tomcat-handler-50] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:47:55.320 [tomcat-handler-50] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-12-08 13:47:55.320 [tomcat-handler-50] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-12-08 13:47:55.321 [tomcat-handler-50] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-12-08 13:47:55.321 [tomcat-handler-50] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:47:55.322 [tomcat-handler-50] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-12-08 13:47:55.322 [tomcat-handler-50] INFO  e.t.v.controller.ElectionController - Checking vote status for user juan.perez in election election-6dfd04a6: hasVoted=true
2025-12-08 13:47:55.322 [tomcat-handler-50] INFO  e.t.v.controller.ElectionController - Returning 1 active elections
2025-12-08 13:47:58.466 [tomcat-handler-51] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:47:58.467 [tomcat-handler-51] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-12-08 13:47:58.468 [tomcat-handler-51] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-12-08 13:47:58.469 [tomcat-handler-51] INFO  e.t.v.controller.AuthController - User logged out: juan.perez from IP: 0:0:0:0:0:0:0:1
2025-12-08 13:48:02.365 [tomcat-handler-52] INFO  e.t.v.controller.AuthController - Login attempt for user: maria.gonzalez from IP: 0:0:0:0:0:0:0:1
2025-12-08 13:48:02.365 [tomcat-handler-52] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: maria.gonzalez
2025-12-08 13:48:02.472 [tomcat-handler-52] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: maria.gonzalez (role: Votante (voter))
2025-12-08 13:48:02.473 [tomcat-handler-52] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: maria.gonzalez
2025-12-08 13:48:02.474 [tomcat-handler-52] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: maria.gonzalez (expires: Mon Dec 08 14:48:02 CET 2025)
2025-12-08 13:48:02.474 [tomcat-handler-52] INFO  e.t.v.controller.AuthController - User authenticated successfully: maria.gonzalez (role: Votante)
2025-12-08 13:48:02.510 [tomcat-handler-53] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:48:02.512 [tomcat-handler-53] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-12-08 13:48:02.513 [tomcat-handler-53] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-12-08 13:48:02.513 [tomcat-handler-53] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-12-08 13:48:02.514 [tomcat-handler-53] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:48:02.514 [tomcat-handler-53] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-12-08 13:48:02.515 [tomcat-handler-53] INFO  e.t.v.controller.ElectionController - Checking vote status for user maria.gonzalez in election election-6dfd04a6: hasVoted=true
2025-12-08 13:48:02.515 [tomcat-handler-53] INFO  e.t.v.controller.ElectionController - Returning 1 active elections
2025-12-08 13:48:04.054 [tomcat-handler-54] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:48:04.056 [tomcat-handler-54] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-12-08 13:48:04.056 [tomcat-handler-54] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-12-08 13:48:04.057 [tomcat-handler-54] INFO  e.t.v.controller.ElectionController - Fetching election: election-6dfd04a6
2025-12-08 13:48:04.057 [tomcat-handler-54] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:48:04.058 [tomcat-handler-54] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-12-08 13:48:16.310 [tomcat-handler-55] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:48:16.311 [tomcat-handler-55] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-12-08 13:48:16.311 [tomcat-handler-55] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-12-08 13:48:16.313 [tomcat-handler-55] INFO  e.t.v.controller.AuthController - User logged out: maria.gonzalez from IP: 0:0:0:0:0:0:0:1
2025-12-08 13:48:31.855 [tomcat-handler-56] INFO  e.t.v.controller.AuthController - Login attempt for user: carlos.martin from IP: 0:0:0:0:0:0:0:1
2025-12-08 13:48:31.855 [tomcat-handler-56] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: carlos.martin
2025-12-08 13:48:31.959 [tomcat-handler-56] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: carlos.martin (role: Votante (voter))
2025-12-08 13:48:31.959 [tomcat-handler-56] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: carlos.martin
2025-12-08 13:48:31.960 [tomcat-handler-56] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: carlos.martin (expires: Mon Dec 08 14:48:31 CET 2025)
2025-12-08 13:48:31.960 [tomcat-handler-56] INFO  e.t.v.controller.AuthController - User authenticated successfully: carlos.martin (role: Votante)
2025-12-08 13:48:32.014 [tomcat-handler-57] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:48:32.015 [tomcat-handler-57] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: carlos.martin
2025-12-08 13:48:32.016 [tomcat-handler-57] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'carlos.martin' authenticated successfully with role 'Votante (voter)'
2025-12-08 13:48:32.017 [tomcat-handler-57] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-12-08 13:48:32.017 [tomcat-handler-57] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:48:32.017 [tomcat-handler-57] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: carlos.martin
2025-12-08 13:48:32.018 [tomcat-handler-57] INFO  e.t.v.controller.ElectionController - Checking vote status for user carlos.martin in election election-6dfd04a6: hasVoted=false
2025-12-08 13:48:32.018 [tomcat-handler-57] INFO  e.t.v.controller.ElectionController - Returning 1 active elections
2025-12-08 13:48:33.558 [tomcat-handler-58] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:48:33.559 [tomcat-handler-58] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: carlos.martin
2025-12-08 13:48:33.560 [tomcat-handler-58] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'carlos.martin' authenticated successfully with role 'Votante (voter)'
2025-12-08 13:48:33.561 [tomcat-handler-58] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-12-08 13:48:33.561 [tomcat-handler-58] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:48:33.562 [tomcat-handler-58] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: carlos.martin
2025-12-08 13:48:33.562 [tomcat-handler-58] INFO  e.t.v.controller.ElectionController - Checking vote status for user carlos.martin in election election-6dfd04a6: hasVoted=false
2025-12-08 13:48:33.562 [tomcat-handler-58] INFO  e.t.v.controller.ElectionController - Returning 1 active elections
2025-12-08 13:48:34.831 [tomcat-handler-59] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:48:34.833 [tomcat-handler-59] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: carlos.martin
2025-12-08 13:48:34.833 [tomcat-handler-59] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'carlos.martin' authenticated successfully with role 'Votante (voter)'
2025-12-08 13:48:34.834 [tomcat-handler-59] INFO  e.t.v.controller.ElectionController - Fetching election: election-6dfd04a6
2025-12-08 13:48:34.834 [tomcat-handler-59] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:48:34.835 [tomcat-handler-59] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: carlos.martin
2025-12-08 13:48:41.392 [tomcat-handler-60] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:48:41.393 [tomcat-handler-60] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: carlos.martin
2025-12-08 13:48:41.393 [tomcat-handler-60] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'carlos.martin' authenticated successfully with role 'Votante (voter)'
2025-12-08 13:48:41.395 [tomcat-handler-60] INFO  e.t.v.controller.ElectionController - Vote submission for election: election-6dfd04a6
2025-12-08 13:48:41.395 [tomcat-handler-60] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:48:41.396 [tomcat-handler-60] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: carlos.martin
2025-12-08 13:48:41.397 [tomcat-handler-60] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: election-6dfd04a6 (145 bytes)
2025-12-08 13:48:41.397 [tomcat-handler-60] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 145 bytes
2025-12-08 13:48:41.398 [tomcat-handler-60] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 173 bytes (IV: 12, encrypted: 161)
2025-12-08 13:48:41.398 [tomcat-handler-60] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 173 bytes
2025-12-08 13:48:41.398 [tomcat-handler-60] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-election-6dfd04a6-1765198121397-da359dd8.enc
2025-12-08 13:48:41.398 [tomcat-handler-60] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 57219368660610592c4663a184b9b6232ed499d109da78e1607b64b7741dc549
2025-12-08 13:48:41.398 [tomcat-handler-60] INFO  e.t.v.controller.ElectionController - Vote encrypted and stored: blobId=BLOB-election-6dfd04a6-1765198121397-da359dd8
2025-12-08 13:48:41.399 [tomcat-handler-60] INFO  e.tfg.votacion.service.FabricService - Emitting vote commitment to blockchain - Election: election-6dfd04a6, Commitment: 3aQEAPxXgvG7EA3SJrb8MzYzb8hvna3/1iNv78OyNqA=
2025-12-08 13:48:41.425 [tomcat-handler-60] ERROR e.tfg.votacion.service.FabricService - Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-12-08 13:48:41.425 [tomcat-handler-60] ERROR e.tfg.votacion.service.FabricService - EndorseException details: chaincode response 500, User x509::CN=User1@org1.example.com, OU=client, L=San Francisco, ST=California, C=US::CN=ca.org1.example.com, O=org1.example.com, L=San Francisco, ST=California, C=US has already voted in election election-6dfd04a6; 
2025-12-08 13:48:41.425 [tomcat-handler-60] ERROR e.tfg.votacion.service.FabricService - Non-retriable error in emitVote: chaincode response 500, User x509::CN=User1@org1.example.com, OU=client, L=San Francisco, ST=California, C=US::CN=ca.org1.example.com, O=org1.example.com, L=San Francisco, ST=California, C=US has already voted in election election-6dfd04a6; 
2025-12-08 13:48:41.426 [tomcat-handler-60] WARN  e.t.v.controller.ElectionController - User carlos.martin already voted in election election-6dfd04a6 on blockchain. Syncing local state.
2025-12-08 13:48:41.426 [tomcat-handler-60] INFO  e.t.votacion.service.ElectionService - Vote registered: electionId=election-6dfd04a6, userId=user_carlos.martin_005, optionId=opt-3
2025-12-08 13:48:41.426 [tomcat-handler-60] INFO  e.t.votacion.service.ElectionService - Data saved to disk
2025-12-08 13:48:43.565 [tomcat-handler-61] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:48:43.566 [tomcat-handler-61] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: carlos.martin
2025-12-08 13:48:43.567 [tomcat-handler-61] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'carlos.martin' authenticated successfully with role 'Votante (voter)'
2025-12-08 13:48:43.568 [tomcat-handler-61] INFO  e.t.v.controller.ElectionController - Fetching election: election-6dfd04a6
2025-12-08 13:48:43.568 [tomcat-handler-61] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:48:43.570 [tomcat-handler-61] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: carlos.martin
2025-12-08 13:54:13.301 [tomcat-handler-63] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 13:54:13.303 [tomcat-handler-63] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: carlos.martin
2025-12-08 13:54:13.303 [tomcat-handler-63] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'carlos.martin' authenticated successfully with role 'Votante (voter)'
2025-12-08 13:54:13.306 [tomcat-handler-63] INFO  e.t.v.controller.AuthController - User logged out: carlos.martin from IP: 0:0:0:0:0:0:0:1
2025-12-08 13:57:32.788 [main] INFO  es.tfg.votacion.Application - Starting Application using Java 21.0.9 with PID 679283 (/home/ehuetadr/TFG/VotacionBC/backend-spring/target/classes started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-12-08 13:57:32.796 [main] DEBUG es.tfg.votacion.Application - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-12-08 13:57:32.797 [main] INFO  es.tfg.votacion.Application - No active profile set, falling back to 1 default profile: "default"
2025-12-08 13:57:35.908 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-12-08 13:57:35.973 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-12-08 13:57:35.976 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-12-08 13:57:36.244 [main] INFO  o.a.c.c.C.[.[localhost].[/api/v1] - Initializing Spring embedded WebApplicationContext
2025-12-08 13:57:36.247 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3373 ms
2025-12-08 13:57:36.385 [main] INFO  es.tfg.votacion.service.AuthService - Initializing Authentication Service (Mock Mode)
2025-12-08 13:57:36.386 [main] DEBUG es.tfg.votacion.service.AuthService - Loading mock users from: src/main/resources/mock/users.json
2025-12-08 13:57:36.411 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: juan.perez (role: Votante (voter), active: true)
2025-12-08 13:57:36.411 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: maria.gonzalez (role: Votante (voter), active: true)
2025-12-08 13:57:36.412 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: admin (role: Administrador (admin), active: true)
2025-12-08 13:57:36.412 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: auditor (role: Auditor (auditor), active: true)
2025-12-08 13:57:36.412 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: carlos.martin (role: Votante (voter), active: true)
2025-12-08 13:57:36.413 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: ana.rodriguez (role: Votante (voter), active: true)
2025-12-08 13:57:36.413 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: pedro.lopez (role: Administrador (admin), active: true)
2025-12-08 13:57:36.413 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: lucia.garcia (role: Votante (voter), active: false)
2025-12-08 13:57:36.413 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: test.user (role: Votante (voter), active: true)
2025-12-08 13:57:36.413 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: voter10 (role: Votante (voter), active: true)
2025-12-08 13:57:36.413 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: voter11 (role: Votante (voter), active: true)
2025-12-08 13:57:36.414 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: voter12 (role: Votante (voter), active: true)
2025-12-08 13:57:36.414 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: voter13 (role: Votante (voter), active: true)
2025-12-08 13:57:36.414 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: voter14 (role: Votante (voter), active: true)
2025-12-08 13:57:36.415 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: voter15 (role: Votante (voter), active: true)
2025-12-08 13:57:36.415 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: voter16 (role: Votante (voter), active: true)
2025-12-08 13:57:36.415 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: voter17 (role: Votante (voter), active: true)
2025-12-08 13:57:36.416 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: voter18 (role: Votante (voter), active: true)
2025-12-08 13:57:36.416 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: voter19 (role: Votante (voter), active: true)
2025-12-08 13:57:36.416 [main] INFO  es.tfg.votacion.service.AuthService - Loaded 19 mock users from src/main/resources/mock/users.json
2025-12-08 13:57:36.422 [main] DEBUG es.tfg.votacion.service.AuthService - JWT signing key initialized with HS256 algorithm
2025-12-08 13:57:36.423 [main] INFO  es.tfg.votacion.service.AuthService - JWT signing key initialized successfully
2025-12-08 13:57:36.423 [main] DEBUG es.tfg.votacion.service.AuthService - JWT issuer: votacion-blockchain-poc
2025-12-08 13:57:36.423 [main] DEBUG es.tfg.votacion.service.AuthService - JWT audience: voting-system
2025-12-08 13:57:36.423 [main] DEBUG es.tfg.votacion.service.AuthService - JWT expiration: 3600 seconds
2025-12-08 13:57:36.423 [main] DEBUG es.tfg.votacion.service.AuthService - Allowed roles: [voter, admin, auditor]
2025-12-08 13:57:36.423 [main] WARN  es.tfg.votacion.service.AuthService - Running in MOCK authentication mode - not suitable for production!
2025-12-08 13:57:36.467 [main] DEBUG e.t.v.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-12-08 13:57:36.531 [main] INFO  e.t.votacion.service.StorageService - Initializing Storage Service with AES-GCM encryption
2025-12-08 13:57:36.532 [main] DEBUG e.t.votacion.service.StorageService - Loading encryption key from keystore: src/main/resources/keystore/keystore.json
2025-12-08 13:57:36.536 [main] DEBUG e.t.votacion.service.StorageService - Keystore loaded - algorithm: AES/GCM/NoPadding, key length: 256 bits
2025-12-08 13:57:36.537 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded and validated successfully
2025-12-08 13:57:36.537 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded successfully from keystore
2025-12-08 13:57:36.538 [main] INFO  e.t.votacion.service.StorageService - Storage directory initialized: /home/ehuetadr/TFG/VotacionBC/backend-spring/data/storage
2025-12-08 13:57:36.539 [main] DEBUG e.t.votacion.service.StorageService - Encryption algorithm: AES/GCM/NoPadding
2025-12-08 13:57:36.539 [main] DEBUG e.t.votacion.service.StorageService - Key length: 256 bits
2025-12-08 13:57:36.539 [main] DEBUG e.t.votacion.service.StorageService - IV length: 12 bytes
2025-12-08 13:57:36.539 [main] DEBUG e.t.votacion.service.StorageService - Tag length: 128 bits
2025-12-08 13:57:36.539 [main] INFO  e.t.votacion.service.StorageService - Automatic cleanup enabled - retention: 30 days
2025-12-08 13:57:36.557 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-12-08 13:57:36.557 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-12-08 13:57:36.557 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: ../fabric/test-network/organizations/peerOrganizations/org1.example.com/connection-org1.json
2025-12-08 13:57:36.557 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: wallet
2025-12-08 13:57:36.558 [main] DEBUG e.tfg.votacion.service.FabricService - User: appUser
2025-12-08 13:57:36.558 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: electionchannel
2025-12-08 13:57:36.558 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: electioncc
2025-12-08 13:57:37.337 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Fabric network
2025-12-08 13:57:37.338 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-12-08 13:57:37.340 [main] INFO  e.t.votacion.service.ElectionService - Initializing ElectionService
2025-12-08 13:57:37.340 [main] INFO  e.t.votacion.service.ElectionService - No existing data found, creating mock elections
2025-12-08 13:57:37.340 [main] INFO  e.t.votacion.service.ElectionService - Mock elections creation disabled.
2025-12-08 13:57:37.397 [main] INFO  e.t.votacion.service.ElectionService - Data saved to disk
2025-12-08 13:57:38.807 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 724dc9c2-ea3c-44ba-a05e-3d34fd0599e1

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-12-08 13:57:38.817 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-12-08 13:57:38.968 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring Spring Security with JWT authentication
2025-12-08 13:57:38.970 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-12-08 13:57:39.011 [main] INFO  e.tfg.votacion.config.SecurityConfig - Spring Security configured successfully
2025-12-08 13:57:38.192 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2025-12-08 13:57:38.194 [main] INFO  e.tfg.votacion.service.FabricService - Closing Fabric Gateway connection
2025-12-08 13:57:38.204 [main] INFO  e.t.votacion.service.StorageService - Shutting down Storage Service
2025-12-08 13:57:38.205 [main] DEBUG e.t.votacion.service.StorageService - Master key cleared from memory
2025-12-08 13:57:38.230 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-12-08 13:57:38.279 [main] ERROR o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

2025-12-08 14:02:23.987 [tomcat-handler-66] INFO  e.t.v.controller.AuthController - Login attempt for user: admin from IP: 0:0:0:0:0:0:0:1
2025-12-08 14:02:23.987 [tomcat-handler-66] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: admin
2025-12-08 14:02:24.104 [tomcat-handler-66] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: admin (role: Administrador (admin))
2025-12-08 14:02:24.105 [tomcat-handler-66] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: admin
2025-12-08 14:02:24.105 [tomcat-handler-66] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: admin (expires: Mon Dec 08 15:02:24 CET 2025)
2025-12-08 14:02:24.106 [tomcat-handler-66] INFO  e.t.v.controller.AuthController - User authenticated successfully: admin (role: Administrador)
2025-12-08 14:02:24.311 [tomcat-handler-68] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 14:02:24.312 [tomcat-handler-68] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-12-08 14:02:24.313 [tomcat-handler-68] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-12-08 14:02:24.314 [tomcat-handler-68] INFO  e.t.v.controller.ElectionController - Fetching all elections (ADMIN) from IP: 0:0:0:0:0:0:0:1
2025-12-08 14:02:24.314 [tomcat-handler-68] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 14:02:24.315 [tomcat-handler-68] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-12-08 14:02:24.315 [tomcat-handler-68] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-12-08 14:02:24.315 [tomcat-handler-68] INFO  e.t.v.controller.ElectionController - Returning 1 elections
2025-12-08 14:02:39.369 [tomcat-handler-69] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 14:02:39.370 [tomcat-handler-69] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-12-08 14:02:39.370 [tomcat-handler-69] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-12-08 14:02:39.370 [tomcat-handler-69] INFO  e.t.v.controller.ElectionController - Fetching all elections (ADMIN) from IP: 0:0:0:0:0:0:0:1
2025-12-08 14:02:39.371 [tomcat-handler-69] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 14:02:39.372 [tomcat-handler-69] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-12-08 14:02:39.372 [tomcat-handler-69] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-12-08 14:02:39.372 [tomcat-handler-69] INFO  e.t.v.controller.ElectionController - Returning 1 elections
2025-12-08 14:03:15.242 [tomcat-handler-71] INFO  e.t.v.controller.AuthController - Login attempt for user: juan.perez from IP: 0:0:0:0:0:0:0:1
2025-12-08 14:03:15.243 [tomcat-handler-71] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: juan.perez
2025-12-08 14:03:15.368 [tomcat-handler-71] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: juan.perez (role: Votante (voter))
2025-12-08 14:03:15.368 [tomcat-handler-71] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: juan.perez
2025-12-08 14:03:15.369 [tomcat-handler-71] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: juan.perez (expires: Mon Dec 08 15:03:15 CET 2025)
2025-12-08 14:03:15.369 [tomcat-handler-71] INFO  e.t.v.controller.AuthController - User authenticated successfully: juan.perez (role: Votante)
2025-12-08 14:03:15.434 [tomcat-handler-73] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 14:03:15.435 [tomcat-handler-73] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-12-08 14:03:15.435 [tomcat-handler-73] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-12-08 14:03:15.436 [tomcat-handler-73] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-12-08 14:03:15.436 [tomcat-handler-73] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 14:03:15.437 [tomcat-handler-73] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-12-08 14:03:15.438 [tomcat-handler-73] INFO  e.t.v.controller.ElectionController - Checking vote status for user juan.perez in election election-6dfd04a6: hasVoted=true
2025-12-08 14:03:15.438 [tomcat-handler-73] INFO  e.t.v.controller.ElectionController - Returning 1 active elections
2025-12-08 14:18:12.193 [tomcat-handler-76] INFO  e.t.v.controller.AuthController - Login attempt for user: admin from IP: 0:0:0:0:0:0:0:1
2025-12-08 14:18:12.194 [tomcat-handler-76] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: admin
2025-12-08 14:18:12.304 [tomcat-handler-76] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: admin (role: Administrador (admin))
2025-12-08 14:18:12.304 [tomcat-handler-76] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: admin
2025-12-08 14:18:12.305 [tomcat-handler-76] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: admin (expires: Mon Dec 08 15:18:12 CET 2025)
2025-12-08 14:18:12.305 [tomcat-handler-76] INFO  e.t.v.controller.AuthController - User authenticated successfully: admin (role: Administrador)
2025-12-08 14:18:12.661 [tomcat-handler-78] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 14:18:12.662 [tomcat-handler-78] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-12-08 14:18:12.662 [tomcat-handler-78] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-12-08 14:18:12.666 [tomcat-handler-78] INFO  e.t.v.controller.ElectionController - Fetching all elections (ADMIN) from IP: 0:0:0:0:0:0:0:1
2025-12-08 14:18:12.666 [tomcat-handler-78] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 14:18:12.667 [tomcat-handler-78] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-12-08 14:18:12.667 [tomcat-handler-78] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-12-08 14:18:12.668 [tomcat-handler-78] INFO  e.t.v.controller.ElectionController - Returning 1 elections
2025-12-08 14:19:11.136 [tomcat-handler-79] INFO  e.t.v.controller.AuthController - Login attempt for user: admin from IP: 0:0:0:0:0:0:0:1
2025-12-08 14:19:11.137 [tomcat-handler-79] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: admin
2025-12-08 14:19:11.247 [tomcat-handler-79] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: admin (role: Administrador (admin))
2025-12-08 14:19:11.247 [tomcat-handler-79] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: admin
2025-12-08 14:19:11.249 [tomcat-handler-79] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: admin (expires: Mon Dec 08 15:19:11 CET 2025)
2025-12-08 14:19:11.250 [tomcat-handler-79] INFO  e.t.v.controller.AuthController - User authenticated successfully: admin (role: Administrador)
2025-12-08 14:19:11.413 [tomcat-handler-80] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 14:19:11.414 [tomcat-handler-80] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-12-08 14:19:11.415 [tomcat-handler-80] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-12-08 14:19:11.416 [tomcat-handler-80] INFO  e.t.v.controller.ElectionController - Fetching all elections (ADMIN) from IP: 0:0:0:0:0:0:0:1
2025-12-08 14:19:11.416 [tomcat-handler-80] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 14:19:11.416 [tomcat-handler-80] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-12-08 14:19:11.417 [tomcat-handler-80] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-12-08 14:19:11.417 [tomcat-handler-80] INFO  e.t.v.controller.ElectionController - Returning 1 elections
2025-12-08 14:19:15.061 [tomcat-handler-82] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 14:19:15.062 [tomcat-handler-82] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-12-08 14:19:15.062 [tomcat-handler-82] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-12-08 14:19:15.063 [tomcat-handler-82] INFO  e.t.v.controller.AuthController - User logged out: admin from IP: 0:0:0:0:0:0:0:1
2025-12-08 14:19:21.650 [tomcat-handler-83] INFO  e.t.v.controller.AuthController - Login attempt for user: juan.perez from IP: 0:0:0:0:0:0:0:1
2025-12-08 14:19:21.650 [tomcat-handler-83] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: juan.perez
2025-12-08 14:19:21.767 [tomcat-handler-83] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: juan.perez (role: Votante (voter))
2025-12-08 14:19:21.767 [tomcat-handler-83] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: juan.perez
2025-12-08 14:19:21.768 [tomcat-handler-83] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: juan.perez (expires: Mon Dec 08 15:19:21 CET 2025)
2025-12-08 14:19:21.768 [tomcat-handler-83] INFO  e.t.v.controller.AuthController - User authenticated successfully: juan.perez (role: Votante)
2025-12-08 14:19:21.836 [tomcat-handler-84] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 14:19:21.837 [tomcat-handler-84] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-12-08 14:19:21.837 [tomcat-handler-84] DEBUG e.t.v.config.JwtAuthenticationFilter - User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-12-08 14:19:21.838 [tomcat-handler-84] INFO  e.t.v.controller.ElectionController - Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-12-08 14:19:21.838 [tomcat-handler-84] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-12-08 14:19:21.839 [tomcat-handler-84] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-12-08 14:19:21.839 [tomcat-handler-84] INFO  e.t.v.controller.ElectionController - Checking vote status for user juan.perez in election election-6dfd04a6: hasVoted=true
2025-12-08 14:19:21.839 [tomcat-handler-84] INFO  e.t.v.controller.ElectionController - Returning 1 active elections
