2025-11-10 07:51:50.549 [main] INFO  e.t.v.c.ConfigurationPropertiesTest - Starting ConfigurationPropertiesTest using Java 21.0.8 with PID 1011308 (started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-10 07:51:50.568 [main] DEBUG e.t.v.c.ConfigurationPropertiesTest - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-10 07:51:50.569 [main] INFO  e.t.v.c.ConfigurationPropertiesTest - No active profile set, falling back to 1 default profile: "default"
2025-11-10 07:51:52.189 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-10 07:51:52.755 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 0ac26661-9640-40a7-b073-36b9dcb81bf4

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-10 07:51:52.771 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-10 07:51:53.018 [main] INFO  e.t.v.c.ConfigurationPropertiesTest - Started ConfigurationPropertiesTest in 2.982 seconds (process running for 4.35)
2025-11-10 18:40:02.292 [main] INFO  e.t.v.service.FabricServiceTest - Starting FabricServiceTest using Java 21.0.8 with PID 1291852 (started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-10 18:40:02.303 [main] DEBUG e.t.v.service.FabricServiceTest - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-10 18:40:02.306 [main] INFO  e.t.v.service.FabricServiceTest - No active profile set, falling back to 1 default profile: "default"
2025-11-10 18:40:04.364 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-10 18:40:04.365 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-10 18:40:04.368 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /tmp/mock-connection.json
2025-11-10 18:40:04.371 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /tmp/mock-wallet
2025-11-10 18:40:04.372 [main] DEBUG e.tfg.votacion.service.FabricService - User: mockUser
2025-11-10 18:40:04.372 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: mockchannel
2025-11-10 18:40:04.372 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: mockcc
2025-11-10 18:40:04.372 [main] WARN  e.tfg.votacion.service.FabricService - Using MOCK Fabric connection for PoC development
2025-11-10 18:40:04.372 [main] WARN  e.tfg.votacion.service.FabricService - To use real Fabric connection, implement proper Gateway initialization
2025-11-10 18:40:04.373 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-10 18:40:04.723 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-10 18:40:05.522 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 25f415ed-ddfb-45f1-a227-df4607eb2a99

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-10 18:40:05.533 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-10 18:40:05.865 [main] INFO  e.t.v.service.FabricServiceTest - Started FabricServiceTest in 4.282 seconds (process running for 5.705)
2025-11-10 18:40:06.879 [main] DEBUG e.tfg.votacion.service.FabricService - Verifying vote transaction: MOCK-TX-12345
2025-11-10 18:40:06.879 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, cannot verify transaction
2025-11-10 18:40:06.880 [main] DEBUG e.tfg.votacion.service.FabricService - Verifying vote transaction: TX-election-001-67890
2025-11-10 18:40:06.880 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, cannot verify transaction
2025-11-10 18:40:06.894 [main] INFO  e.tfg.votacion.service.FabricService - Emitting vote commitment to blockchain - Election: integration-test-election, Commitment: integration-test-commitment
2025-11-10 18:40:06.894 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock transaction ID
2025-11-10 18:40:06.895 [main] DEBUG e.tfg.votacion.service.FabricService - Verifying vote transaction: MOCK-TX-1762796406894
2025-11-10 18:40:06.895 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, cannot verify transaction
2025-11-10 18:40:06.895 [main] DEBUG e.tfg.votacion.service.FabricService - Querying election status: integration-test-election
2025-11-10 18:40:06.895 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning default status
2025-11-10 18:40:06.907 [main] INFO  e.tfg.votacion.service.FabricService - Counting votes from blockchain for election: test-election-003
2025-11-10 18:40:06.908 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock results
2025-11-10 18:40:06.927 [main] INFO  e.tfg.votacion.service.FabricService - Closing election on blockchain: test-election-002
2025-11-10 18:40:06.928 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock result
2025-11-10 18:40:06.964 [main] DEBUG e.tfg.votacion.service.FabricService - Querying election status: test-election-004
2025-11-10 18:40:06.965 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning default status
2025-11-10 18:40:07.007 [main] INFO  e.tfg.votacion.service.FabricService - Emitting vote commitment to blockchain - Election: test-election-001, Commitment: abc123def456
2025-11-10 18:40:07.007 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock transaction ID
2025-11-10 18:41:35.072 [main] INFO  e.t.v.service.FabricServiceTest - Starting FabricServiceTest using Java 21.0.8 with PID 1292824 (started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-10 18:41:35.074 [main] DEBUG e.t.v.service.FabricServiceTest - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-10 18:41:35.075 [main] INFO  e.t.v.service.FabricServiceTest - No active profile set, falling back to 1 default profile: "default"
2025-11-10 18:41:35.261 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-10 18:41:35.262 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-10 18:41:35.262 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /tmp/mock-connection.json
2025-11-10 18:41:35.264 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /tmp/mock-wallet
2025-11-10 18:41:35.264 [main] DEBUG e.tfg.votacion.service.FabricService - User: mockUser
2025-11-10 18:41:35.265 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: mockchannel
2025-11-10 18:41:35.265 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: mockcc
2025-11-10 18:41:35.265 [main] WARN  e.tfg.votacion.service.FabricService - Using MOCK Fabric connection for PoC development
2025-11-10 18:41:35.265 [main] WARN  e.tfg.votacion.service.FabricService - To use real Fabric connection, implement proper Gateway initialization
2025-11-10 18:41:35.265 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-10 18:41:35.503 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-10 18:41:35.934 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 320283a2-0def-466e-934a-f23ced432e10

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-10 18:41:35.942 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-10 18:41:36.136 [main] INFO  e.t.v.service.FabricServiceTest - Started FabricServiceTest in 1.614 seconds (process running for 4.348)
2025-11-10 18:41:36.972 [main] DEBUG e.tfg.votacion.service.FabricService - Verifying vote transaction: MOCK-TX-12345
2025-11-10 18:41:36.972 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, cannot verify transaction
2025-11-10 18:41:36.973 [main] DEBUG e.tfg.votacion.service.FabricService - Verifying vote transaction: TX-election-001-67890
2025-11-10 18:41:36.973 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, cannot verify transaction
2025-11-10 18:41:37.000 [main] INFO  e.tfg.votacion.service.FabricService - Emitting vote commitment to blockchain - Election: integration-test-election, Commitment: integration-test-commitment
2025-11-10 18:41:37.001 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock transaction ID
2025-11-10 18:41:37.003 [main] DEBUG e.tfg.votacion.service.FabricService - Verifying vote transaction: MOCK-TX-integration-test-election-1762796497001
2025-11-10 18:41:37.004 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, cannot verify transaction
2025-11-10 18:41:37.007 [main] DEBUG e.tfg.votacion.service.FabricService - Querying election status: integration-test-election
2025-11-10 18:41:37.008 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning default status
2025-11-10 18:41:37.016 [main] INFO  e.tfg.votacion.service.FabricService - Counting votes from blockchain for election: integration-test-election
2025-11-10 18:41:37.017 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock results
2025-11-10 18:41:37.037 [main] INFO  e.tfg.votacion.service.FabricService - Counting votes from blockchain for election: test-election-003
2025-11-10 18:41:37.037 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock results
2025-11-10 18:41:37.056 [main] INFO  e.tfg.votacion.service.FabricService - Closing election on blockchain: test-election-002
2025-11-10 18:41:37.056 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock result
2025-11-10 18:41:37.094 [main] DEBUG e.tfg.votacion.service.FabricService - Querying election status: test-election-004
2025-11-10 18:41:37.095 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning default status
2025-11-10 18:41:37.142 [main] INFO  e.tfg.votacion.service.FabricService - Emitting vote commitment to blockchain - Election: test-election-001, Commitment: abc123def456
2025-11-10 18:41:37.142 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock transaction ID
2025-11-10 18:42:14.460 [main] INFO  e.t.v.service.FabricServiceTest - Starting FabricServiceTest using Java 21.0.8 with PID 1293411 (started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-10 18:42:14.462 [main] DEBUG e.t.v.service.FabricServiceTest - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-10 18:42:14.464 [main] INFO  e.t.v.service.FabricServiceTest - No active profile set, falling back to 1 default profile: "default"
2025-11-10 18:42:15.577 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-10 18:42:15.578 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-10 18:42:15.578 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /tmp/mock-connection.json
2025-11-10 18:42:15.579 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /tmp/mock-wallet
2025-11-10 18:42:15.579 [main] DEBUG e.tfg.votacion.service.FabricService - User: mockUser
2025-11-10 18:42:15.579 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: mockchannel
2025-11-10 18:42:15.580 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: mockcc
2025-11-10 18:42:15.580 [main] WARN  e.tfg.votacion.service.FabricService - Using MOCK Fabric connection for PoC development
2025-11-10 18:42:15.580 [main] WARN  e.tfg.votacion.service.FabricService - To use real Fabric connection, implement proper Gateway initialization
2025-11-10 18:42:15.580 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-10 18:42:15.821 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-10 18:42:16.273 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 7be80b1e-9c2e-420e-98fd-20cd69af8690

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-10 18:42:16.284 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-10 18:42:16.466 [main] INFO  e.t.v.service.FabricServiceTest - Started FabricServiceTest in 2.551 seconds (process running for 3.925)
2025-11-10 18:42:17.387 [main] DEBUG e.tfg.votacion.service.FabricService - Verifying vote transaction: MOCK-TX-12345
2025-11-10 18:42:17.387 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, using mock verification
2025-11-10 18:42:17.388 [main] DEBUG e.tfg.votacion.service.FabricService - MOCK: Transaction MOCK-TX-12345 verification result: true
2025-11-10 18:42:17.388 [main] DEBUG e.tfg.votacion.service.FabricService - Verifying vote transaction: TX-election-001-67890
2025-11-10 18:42:17.389 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, using mock verification
2025-11-10 18:42:17.389 [main] DEBUG e.tfg.votacion.service.FabricService - MOCK: Transaction TX-election-001-67890 verification result: true
2025-11-10 18:42:17.389 [main] DEBUG e.tfg.votacion.service.FabricService - Verifying vote transaction: INVALID-ID
2025-11-10 18:42:17.390 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, using mock verification
2025-11-10 18:42:17.390 [main] DEBUG e.tfg.votacion.service.FabricService - MOCK: Transaction INVALID-ID verification result: false
2025-11-10 18:42:17.390 [main] DEBUG e.tfg.votacion.service.FabricService - Verifying vote transaction: null
2025-11-10 18:42:17.390 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, using mock verification
2025-11-10 18:42:17.391 [main] DEBUG e.tfg.votacion.service.FabricService - MOCK: Transaction null verification result: false
2025-11-10 18:42:17.398 [main] INFO  e.tfg.votacion.service.FabricService - Emitting vote commitment to blockchain - Election: integration-test-election, Commitment: integration-test-commitment
2025-11-10 18:42:17.400 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock transaction ID
2025-11-10 18:42:17.404 [main] DEBUG e.tfg.votacion.service.FabricService - Verifying vote transaction: MOCK-TX-integration-test-election-1762796537401
2025-11-10 18:42:17.404 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, using mock verification
2025-11-10 18:42:17.405 [main] DEBUG e.tfg.votacion.service.FabricService - MOCK: Transaction MOCK-TX-integration-test-election-1762796537401 verification result: true
2025-11-10 18:42:17.405 [main] DEBUG e.tfg.votacion.service.FabricService - Querying election status: integration-test-election
2025-11-10 18:42:17.405 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning default status
2025-11-10 18:42:17.407 [main] INFO  e.tfg.votacion.service.FabricService - Counting votes from blockchain for election: integration-test-election
2025-11-10 18:42:17.407 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock results
2025-11-10 18:42:17.422 [main] INFO  e.tfg.votacion.service.FabricService - Counting votes from blockchain for election: test-election-003
2025-11-10 18:42:17.422 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock results
2025-11-10 18:42:17.428 [main] INFO  e.tfg.votacion.service.FabricService - Closing election on blockchain: test-election-002
2025-11-10 18:42:17.429 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock result
2025-11-10 18:42:17.494 [main] DEBUG e.tfg.votacion.service.FabricService - Querying election status: test-election-004
2025-11-10 18:42:17.494 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning default status
2025-11-10 18:42:17.526 [main] INFO  e.tfg.votacion.service.FabricService - Emitting vote commitment to blockchain - Election: test-election-001, Commitment: abc123def456
2025-11-10 18:42:17.526 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock transaction ID
2025-11-10 18:42:47.203 [main] INFO  e.t.v.c.ConfigurationPropertiesTest - Starting ConfigurationPropertiesTest using Java 21.0.8 with PID 1293907 (started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-10 18:42:47.204 [main] DEBUG e.t.v.c.ConfigurationPropertiesTest - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-10 18:42:47.206 [main] INFO  e.t.v.c.ConfigurationPropertiesTest - No active profile set, falling back to 1 default profile: "default"
2025-11-10 18:42:48.535 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-10 18:42:48.536 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-10 18:42:48.536 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /home/ehuetadr/fabric/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/connection-org1.json
2025-11-10 18:42:48.538 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /home/ehuetadr/TFG/VotacionBC/backend-spring/wallet
2025-11-10 18:42:48.538 [main] DEBUG e.tfg.votacion.service.FabricService - User: appUser
2025-11-10 18:42:48.539 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: electionchannel
2025-11-10 18:42:48.539 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: electioncc
2025-11-10 18:42:48.539 [main] WARN  e.tfg.votacion.service.FabricService - Using MOCK Fabric connection for PoC development
2025-11-10 18:42:48.539 [main] WARN  e.tfg.votacion.service.FabricService - To use real Fabric connection, implement proper Gateway initialization
2025-11-10 18:42:48.539 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-10 18:42:48.791 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-10 18:42:49.244 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: afae167b-d657-4ecf-8ea3-072a28e73a1b

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-10 18:42:49.253 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-10 18:42:49.434 [main] INFO  e.t.v.c.ConfigurationPropertiesTest - Started ConfigurationPropertiesTest in 2.737 seconds (process running for 4.051)
2025-11-10 18:42:50.542 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [es.tfg.votacion.service.FabricServiceTest]: FabricServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-10 18:42:50.560 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration es.tfg.votacion.Application for test class es.tfg.votacion.service.FabricServiceTest
2025-11-10 18:42:50.632 [main] INFO  e.t.v.service.FabricServiceTest - Starting FabricServiceTest using Java 21.0.8 with PID 1293907 (started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-10 18:42:50.637 [main] DEBUG e.t.v.service.FabricServiceTest - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-10 18:42:50.638 [main] INFO  e.t.v.service.FabricServiceTest - No active profile set, falling back to 1 default profile: "default"
2025-11-10 18:42:51.003 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-10 18:42:51.004 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-10 18:42:51.004 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /tmp/mock-connection.json
2025-11-10 18:42:51.004 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /tmp/mock-wallet
2025-11-10 18:42:51.004 [main] DEBUG e.tfg.votacion.service.FabricService - User: mockUser
2025-11-10 18:42:51.005 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: mockchannel
2025-11-10 18:42:51.005 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: mockcc
2025-11-10 18:42:51.005 [main] WARN  e.tfg.votacion.service.FabricService - Using MOCK Fabric connection for PoC development
2025-11-10 18:42:51.005 [main] WARN  e.tfg.votacion.service.FabricService - To use real Fabric connection, implement proper Gateway initialization
2025-11-10 18:42:51.005 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-10 18:42:51.118 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-10 18:42:51.266 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 3135a1b2-c474-4923-a5f3-8f5cdf96e88a

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-10 18:42:51.267 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-10 18:42:51.305 [main] INFO  e.t.v.service.FabricServiceTest - Started FabricServiceTest in 0.73 seconds (process running for 5.922)
2025-11-10 18:42:51.321 [main] DEBUG e.tfg.votacion.service.FabricService - Verifying vote transaction: MOCK-TX-12345
2025-11-10 18:42:51.322 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, using mock verification
2025-11-10 18:42:51.322 [main] DEBUG e.tfg.votacion.service.FabricService - MOCK: Transaction MOCK-TX-12345 verification result: true
2025-11-10 18:42:51.322 [main] DEBUG e.tfg.votacion.service.FabricService - Verifying vote transaction: TX-election-001-67890
2025-11-10 18:42:51.323 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, using mock verification
2025-11-10 18:42:51.323 [main] DEBUG e.tfg.votacion.service.FabricService - MOCK: Transaction TX-election-001-67890 verification result: true
2025-11-10 18:42:51.323 [main] DEBUG e.tfg.votacion.service.FabricService - Verifying vote transaction: INVALID-ID
2025-11-10 18:42:51.323 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, using mock verification
2025-11-10 18:42:51.323 [main] DEBUG e.tfg.votacion.service.FabricService - MOCK: Transaction INVALID-ID verification result: false
2025-11-10 18:42:51.324 [main] DEBUG e.tfg.votacion.service.FabricService - Verifying vote transaction: null
2025-11-10 18:42:51.324 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, using mock verification
2025-11-10 18:42:51.324 [main] DEBUG e.tfg.votacion.service.FabricService - MOCK: Transaction null verification result: false
2025-11-10 18:42:51.334 [main] INFO  e.tfg.votacion.service.FabricService - Emitting vote commitment to blockchain - Election: integration-test-election, Commitment: integration-test-commitment
2025-11-10 18:42:51.334 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock transaction ID
2025-11-10 18:42:51.348 [main] DEBUG e.tfg.votacion.service.FabricService - Verifying vote transaction: MOCK-TX-integration-test-election-1762796571334
2025-11-10 18:42:51.349 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, using mock verification
2025-11-10 18:42:51.349 [main] DEBUG e.tfg.votacion.service.FabricService - MOCK: Transaction MOCK-TX-integration-test-election-1762796571334 verification result: true
2025-11-10 18:42:51.350 [main] DEBUG e.tfg.votacion.service.FabricService - Querying election status: integration-test-election
2025-11-10 18:42:51.350 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning default status
2025-11-10 18:42:51.351 [main] INFO  e.tfg.votacion.service.FabricService - Counting votes from blockchain for election: integration-test-election
2025-11-10 18:42:51.351 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock results
2025-11-10 18:42:51.371 [main] INFO  e.tfg.votacion.service.FabricService - Counting votes from blockchain for election: test-election-003
2025-11-10 18:42:51.371 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock results
2025-11-10 18:42:51.379 [main] INFO  e.tfg.votacion.service.FabricService - Closing election on blockchain: test-election-002
2025-11-10 18:42:51.380 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock result
2025-11-10 18:42:51.409 [main] DEBUG e.tfg.votacion.service.FabricService - Querying election status: test-election-004
2025-11-10 18:42:51.410 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning default status
2025-11-10 18:42:51.450 [main] INFO  e.tfg.votacion.service.FabricService - Emitting vote commitment to blockchain - Election: test-election-001, Commitment: abc123def456
2025-11-10 18:42:51.451 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock transaction ID
2025-11-10 18:42:51.470 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [es.tfg.votacion.ApplicationTests]: ApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-10 18:42:51.489 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration es.tfg.votacion.Application for test class es.tfg.votacion.ApplicationTests
2025-11-10 23:09:19.181 [main] INFO  e.t.v.service.StorageServiceTest - Starting StorageServiceTest using Java 21.0.8 with PID 1413553 (started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-10 23:09:19.182 [main] DEBUG e.t.v.service.StorageServiceTest - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-10 23:09:19.183 [main] INFO  e.t.v.service.StorageServiceTest - No active profile set, falling back to 1 default profile: "default"
2025-11-10 23:09:20.658 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-10 23:09:20.658 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-10 23:09:20.659 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /home/ehuetadr/fabric/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/connection-org1.json
2025-11-10 23:09:20.660 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /home/ehuetadr/TFG/VotacionBC/backend-spring/wallet
2025-11-10 23:09:20.660 [main] DEBUG e.tfg.votacion.service.FabricService - User: appUser
2025-11-10 23:09:20.661 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: electionchannel
2025-11-10 23:09:20.661 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: electioncc
2025-11-10 23:09:20.661 [main] WARN  e.tfg.votacion.service.FabricService - Using MOCK Fabric connection for PoC development
2025-11-10 23:09:20.661 [main] WARN  e.tfg.votacion.service.FabricService - To use real Fabric connection, implement proper Gateway initialization
2025-11-10 23:09:20.662 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-10 23:09:20.680 [main] INFO  e.t.votacion.service.StorageService - Initializing Storage Service with AES-GCM encryption
2025-11-10 23:09:20.681 [main] DEBUG e.t.votacion.service.StorageService - Loading encryption key from keystore: src/main/resources/keystore/keystore.json
2025-11-10 23:09:20.709 [main] DEBUG e.t.votacion.service.StorageService - Keystore loaded - algorithm: AES/GCM/NoPadding, key length: 256 bits
2025-11-10 23:09:20.712 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded and validated successfully
2025-11-10 23:09:20.712 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded successfully from keystore
2025-11-10 23:09:20.713 [main] INFO  e.t.votacion.service.StorageService - Storage directory initialized: /tmp/votacion-test-storage
2025-11-10 23:09:20.714 [main] DEBUG e.t.votacion.service.StorageService - Encryption algorithm: AES/GCM/NoPadding
2025-11-10 23:09:20.714 [main] DEBUG e.t.votacion.service.StorageService - Key length: 256 bits
2025-11-10 23:09:20.715 [main] DEBUG e.t.votacion.service.StorageService - IV length: 12 bytes
2025-11-10 23:09:20.715 [main] DEBUG e.t.votacion.service.StorageService - Tag length: 128 bits
2025-11-10 23:09:20.715 [main] WARN  e.t.votacion.service.StorageService - Automatic cleanup is disabled
2025-11-10 23:09:21.021 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-10 23:09:21.596 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 28d50859-785f-4714-a91c-53afb7362fd2

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-10 23:09:21.605 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-10 23:09:21.921 [main] INFO  e.t.v.service.StorageServiceTest - Started StorageServiceTest in 3.36 seconds (process running for 5.495)
2025-11-10 23:09:23.335 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:09:23.336 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:09:23.355 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:09:23.356 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:09:23.357 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812563336-f4183e00.enc
2025-11-10 23:09:23.359 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 0a3e5918af6b01ab7a7bf320bbb7447ce499fec26c56f07b01cb8835cd1a8d61
2025-11-10 23:09:23.373 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:09:23.374 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:09:23.374 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:09:23.375 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:09:23.376 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812563374-f7528670.enc
2025-11-10 23:09:23.377 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: fa3f68c1470302d58c6aa3691f24c25250bd538f2e7777c841ededa0b38ef89e
2025-11-10 23:09:23.377 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762812563374-f7528670
2025-11-10 23:09:23.378 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 65 bytes
2025-11-10 23:09:23.378 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 65 bytes
2025-11-10 23:09:23.379 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 37 bytes
2025-11-10 23:09:23.379 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762812563374-f7528670 (37 bytes)
2025-11-10 23:09:23.394 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (1024 bytes)
2025-11-10 23:09:23.394 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 1024 bytes
2025-11-10 23:09:23.395 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 1052 bytes (IV: 12, encrypted: 1040)
2025-11-10 23:09:23.396 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 1052 bytes
2025-11-10 23:09:23.397 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812563394-dafb5430.enc
2025-11-10 23:09:23.397 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: c9c07cd7b7b0d6289517557de93a569dd1a57d2cbd0ce5407382a07e5b326c89
2025-11-10 23:09:23.397 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762812563394-dafb5430
2025-11-10 23:09:23.398 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 1052 bytes
2025-11-10 23:09:23.398 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 1052 bytes
2025-11-10 23:09:23.399 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 1024 bytes
2025-11-10 23:09:23.399 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762812563394-dafb5430 (1024 bytes)
2025-11-10 23:09:23.428 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (30890 bytes)
2025-11-10 23:09:23.429 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 30890 bytes
2025-11-10 23:09:23.451 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 30918 bytes (IV: 12, encrypted: 30906)
2025-11-10 23:09:23.452 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 30918 bytes
2025-11-10 23:09:23.453 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812563429-ee8c222e.enc
2025-11-10 23:09:23.485 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: c9dbce88ee54b430ab15590aa8f086297994b919a1ed18dc6a603f52636c738f
2025-11-10 23:09:23.486 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762812563429-ee8c222e
2025-11-10 23:09:23.487 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 30918 bytes
2025-11-10 23:09:23.488 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 30918 bytes
2025-11-10 23:09:23.497 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 30890 bytes
2025-11-10 23:09:23.497 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762812563429-ee8c222e (30890 bytes)
2025-11-10 23:09:23.508 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:09:23.520 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:09:23.521 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:09:23.522 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:09:23.523 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812563520-75a0c17a.enc
2025-11-10 23:09:23.524 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: f1e8bc08f17cdc6114c98612e2bff3339b4e1276820a8d457f1c3c10a2974866
2025-11-10 23:09:23.537 [main] INFO  e.t.votacion.service.StorageService - Deleting blob: BLOB-test-election-001-1762812563520-75a0c17a
2025-11-10 23:09:23.564 [main] INFO  e.t.votacion.service.StorageService - Blob deleted securely: BLOB-test-election-001-1762812563520-75a0c17a
2025-11-10 23:09:23.576 [main] INFO  e.t.votacion.service.StorageService - Deleting blob: non-existent-blob-id
2025-11-10 23:09:23.588 [main] ERROR e.t.votacion.service.StorageService - Error searching for blob non-existent-blob-id: /tmp/votacion-test-storage
2025-11-10 23:09:23.588 [main] WARN  e.t.votacion.service.StorageService - Blob not found for deletion: non-existent-blob-id
2025-11-10 23:09:23.607 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:09:23.608 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:09:23.621 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:09:23.621 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:09:23.633 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812563607-ef27557d.enc
2025-11-10 23:09:23.634 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: cf8046d2d073253b74cf8a7bfa9916255ec164bc792e167fb2259bc42c1e9b8f
2025-11-10 23:09:23.660 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (20 bytes)
2025-11-10 23:09:23.661 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 20 bytes
2025-11-10 23:09:23.661 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 48 bytes (IV: 12, encrypted: 36)
2025-11-10 23:09:23.662 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 48 bytes
2025-11-10 23:09:23.669 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812563661-14191442.enc
2025-11-10 23:09:23.669 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 7d9fdd30419ed873fae411a82e84ead5dc8e5218372270fdbb6d024a58cb76ab
2025-11-10 23:09:23.669 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (20 bytes)
2025-11-10 23:09:23.670 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 20 bytes
2025-11-10 23:09:23.670 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 48 bytes (IV: 12, encrypted: 36)
2025-11-10 23:09:23.670 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 48 bytes
2025-11-10 23:09:23.671 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812563669-5602df46.enc
2025-11-10 23:09:23.671 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 3936c766d9f0d3597401916ae420ef00b0073e9339ab0c97cbf93c9975a11e94
2025-11-10 23:09:23.671 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (20 bytes)
2025-11-10 23:09:23.672 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 20 bytes
2025-11-10 23:09:23.672 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 48 bytes (IV: 12, encrypted: 36)
2025-11-10 23:09:23.672 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 48 bytes
2025-11-10 23:09:23.674 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812563672-849c7cc1.enc
2025-11-10 23:09:23.679 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 0b308903fa720baba4c3698ecaa66d5ced76a59ed41d87e453b647f93ccd61f8
2025-11-10 23:09:23.683 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762812563661-14191442
2025-11-10 23:09:23.684 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 48 bytes
2025-11-10 23:09:23.684 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 48 bytes
2025-11-10 23:09:23.684 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 20 bytes
2025-11-10 23:09:23.684 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762812563661-14191442 (20 bytes)
2025-11-10 23:09:23.684 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762812563669-5602df46
2025-11-10 23:09:23.693 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 48 bytes
2025-11-10 23:09:23.694 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 48 bytes
2025-11-10 23:09:23.695 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 20 bytes
2025-11-10 23:09:23.696 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762812563669-5602df46 (20 bytes)
2025-11-10 23:09:23.696 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762812563672-849c7cc1
2025-11-10 23:09:23.696 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 48 bytes
2025-11-10 23:09:23.697 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 48 bytes
2025-11-10 23:09:23.697 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 20 bytes
2025-11-10 23:09:23.697 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762812563672-849c7cc1 (20 bytes)
2025-11-10 23:09:23.806 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: non-existent-blob-id
2025-11-10 23:09:23.807 [main] ERROR e.t.votacion.service.StorageService - Error searching for blob non-existent-blob-id: /tmp/votacion-test-storage
2025-11-10 23:09:23.807 [main] ERROR e.t.votacion.service.StorageService - Blob not found: non-existent-blob-id
2025-11-10 23:09:23.807 [main] ERROR e.t.votacion.service.StorageService - Failed to load and decrypt blob non-existent-blob-id: Blob not found: non-existent-blob-id
java.lang.RuntimeException: Blob not found: non-existent-blob-id
	at es.tfg.votacion.service.StorageService.loadDecrypted(StorageService.java:170)
	at es.tfg.votacion.service.StorageServiceTest.lambda$shouldThrowExceptionForNonExistentBlob$4(StorageServiceTest.java:278)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:39)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3153)
	at es.tfg.votacion.service.StorageServiceTest.shouldThrowExceptionForNonExistentBlob(StorageServiceTest.java:277)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.executeWithoutCancellationToken(LauncherAdapter.java:60)
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.execute(LauncherAdapter.java:52)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:203)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:168)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:136)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-11-10 23:09:23.832 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:09:23.832 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:09:23.832 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:09:23.833 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:09:23.844 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812563832-0fc4d643.enc
2025-11-10 23:09:23.844 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 8fd52d5b37105fba2733070a9fa0b9610d461a18aa86656276ab090f109614f2
2025-11-10 23:09:23.858 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:09:23.859 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:09:23.859 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:09:23.866 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:09:23.885 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812563859-766ac382.enc
2025-11-10 23:09:23.885 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 6132edcfcc1617914699bf29879f32627aac4d76194edb1a418ac0e754619274
2025-11-10 23:09:23.885 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:09:23.885 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:09:23.885 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:09:23.886 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:09:23.886 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812563885-1be266b9.enc
2025-11-10 23:09:23.886 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: c436f8cfd5ee90384a466596f7683f4927a94ceab5bbc5a446e2d907fefe6bd9
2025-11-10 23:09:23.887 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762812563859-766ac382
2025-11-10 23:09:23.887 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 65 bytes
2025-11-10 23:09:23.887 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 65 bytes
2025-11-10 23:09:23.888 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 37 bytes
2025-11-10 23:09:23.888 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762812563859-766ac382 (37 bytes)
2025-11-10 23:09:23.888 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762812563885-1be266b9
2025-11-10 23:09:23.888 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 65 bytes
2025-11-10 23:09:23.888 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 65 bytes
2025-11-10 23:09:23.889 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 37 bytes
2025-11-10 23:09:23.889 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762812563885-1be266b9 (37 bytes)
2025-11-10 23:09:24.094 [SpringApplicationShutdownHook] INFO  e.t.votacion.service.StorageService - Shutting down Storage Service
2025-11-10 23:09:24.095 [SpringApplicationShutdownHook] DEBUG e.t.votacion.service.StorageService - Master key cleared from memory
2025-11-10 23:09:59.399 [main] INFO  e.t.v.service.StorageServiceTest - Starting StorageServiceTest using Java 21.0.8 with PID 1414136 (started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-10 23:09:59.401 [main] DEBUG e.t.v.service.StorageServiceTest - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-10 23:09:59.406 [main] INFO  e.t.v.service.StorageServiceTest - No active profile set, falling back to 1 default profile: "default"
2025-11-10 23:10:00.930 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-10 23:10:00.931 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-10 23:10:00.931 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /home/ehuetadr/fabric/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/connection-org1.json
2025-11-10 23:10:00.933 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /home/ehuetadr/TFG/VotacionBC/backend-spring/wallet
2025-11-10 23:10:00.933 [main] DEBUG e.tfg.votacion.service.FabricService - User: appUser
2025-11-10 23:10:00.934 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: electionchannel
2025-11-10 23:10:00.934 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: electioncc
2025-11-10 23:10:00.934 [main] WARN  e.tfg.votacion.service.FabricService - Using MOCK Fabric connection for PoC development
2025-11-10 23:10:00.934 [main] WARN  e.tfg.votacion.service.FabricService - To use real Fabric connection, implement proper Gateway initialization
2025-11-10 23:10:00.935 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-10 23:10:00.966 [main] INFO  e.t.votacion.service.StorageService - Initializing Storage Service with AES-GCM encryption
2025-11-10 23:10:00.967 [main] DEBUG e.t.votacion.service.StorageService - Loading encryption key from keystore: src/main/resources/keystore/keystore.json
2025-11-10 23:10:00.993 [main] DEBUG e.t.votacion.service.StorageService - Keystore loaded - algorithm: AES/GCM/NoPadding, key length: 256 bits
2025-11-10 23:10:00.995 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded and validated successfully
2025-11-10 23:10:00.996 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded successfully from keystore
2025-11-10 23:10:00.997 [main] INFO  e.t.votacion.service.StorageService - Storage directory initialized: /tmp/votacion-test-storage
2025-11-10 23:10:00.997 [main] DEBUG e.t.votacion.service.StorageService - Encryption algorithm: AES/GCM/NoPadding
2025-11-10 23:10:00.997 [main] DEBUG e.t.votacion.service.StorageService - Key length: 256 bits
2025-11-10 23:10:00.998 [main] DEBUG e.t.votacion.service.StorageService - IV length: 12 bytes
2025-11-10 23:10:00.998 [main] DEBUG e.t.votacion.service.StorageService - Tag length: 128 bits
2025-11-10 23:10:00.998 [main] WARN  e.t.votacion.service.StorageService - Automatic cleanup is disabled
2025-11-10 23:10:01.244 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-10 23:10:01.786 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: a8c70966-9d6b-489b-9567-39cefee44fd7

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-10 23:10:01.797 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-10 23:10:01.991 [main] INFO  e.t.v.service.StorageServiceTest - Started StorageServiceTest in 3.273 seconds (process running for 5.015)
2025-11-10 23:10:02.983 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:10:02.985 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:10:03.001 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:10:03.001 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:10:03.004 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812602985-76d0c4b4.enc
2025-11-10 23:10:03.005 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 486d4664a8d9fa161d05a34fa0144cccfb33624cd9842d5fe197567c684cec95
2025-11-10 23:10:03.026 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:10:03.027 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:10:03.028 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:10:03.029 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:10:03.030 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812603027-336bee99.enc
2025-11-10 23:10:03.035 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: f2b1d4ffe1f154501db5255008680722661d1885adab3e3fc723986f565ab2c7
2025-11-10 23:10:03.036 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762812603027-336bee99
2025-11-10 23:10:03.037 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 65 bytes
2025-11-10 23:10:03.038 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 65 bytes
2025-11-10 23:10:03.039 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 37 bytes
2025-11-10 23:10:03.039 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762812603027-336bee99 (37 bytes)
2025-11-10 23:10:03.058 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (1024 bytes)
2025-11-10 23:10:03.064 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 1024 bytes
2025-11-10 23:10:03.066 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 1052 bytes (IV: 12, encrypted: 1040)
2025-11-10 23:10:03.067 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 1052 bytes
2025-11-10 23:10:03.068 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812603063-fb05694f.enc
2025-11-10 23:10:03.069 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: cb095305d1ae222e9fc4470e96382ef5e47de6dbda77e76a7d13787c0d20a51f
2025-11-10 23:10:03.070 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762812603063-fb05694f
2025-11-10 23:10:03.070 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 1052 bytes
2025-11-10 23:10:03.071 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 1052 bytes
2025-11-10 23:10:03.072 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 1024 bytes
2025-11-10 23:10:03.073 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762812603063-fb05694f (1024 bytes)
2025-11-10 23:10:03.087 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (30890 bytes)
2025-11-10 23:10:03.087 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 30890 bytes
2025-11-10 23:10:03.092 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 30918 bytes (IV: 12, encrypted: 30906)
2025-11-10 23:10:03.093 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 30918 bytes
2025-11-10 23:10:03.096 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812603087-2fd42325.enc
2025-11-10 23:10:03.108 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: f65389ab53c4fed988c0ebf717c719380476917c556c7e32fad312904877a93c
2025-11-10 23:10:03.108 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762812603087-2fd42325
2025-11-10 23:10:03.109 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 30918 bytes
2025-11-10 23:10:03.109 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 30918 bytes
2025-11-10 23:10:03.115 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 30890 bytes
2025-11-10 23:10:03.115 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762812603087-2fd42325 (30890 bytes)
2025-11-10 23:10:03.126 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:10:03.127 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:10:03.128 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:10:03.129 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:10:03.133 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812603127-894e056a.enc
2025-11-10 23:10:03.133 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: b6a84a432ce69e81caebbca74b118f6578ba4b953cdbb366985b5aca52123a40
2025-11-10 23:10:03.134 [main] INFO  e.t.votacion.service.StorageService - Deleting blob: BLOB-test-election-001-1762812603127-894e056a
2025-11-10 23:10:03.135 [main] INFO  e.t.votacion.service.StorageService - Blob deleted securely: BLOB-test-election-001-1762812603127-894e056a
2025-11-10 23:10:03.158 [main] INFO  e.t.votacion.service.StorageService - Deleting blob: non-existent-blob-id
2025-11-10 23:10:03.158 [main] ERROR e.t.votacion.service.StorageService - Error searching for blob non-existent-blob-id: /tmp/votacion-test-storage
2025-11-10 23:10:03.159 [main] WARN  e.t.votacion.service.StorageService - Blob not found for deletion: non-existent-blob-id
2025-11-10 23:10:03.173 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:10:03.174 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:10:03.175 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:10:03.175 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:10:03.177 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812603174-4ade83e5.enc
2025-11-10 23:10:03.177 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 5ae75473d7b4ac233195f83c4da2e4384f63cf64afe57a5a929e21b05d35afb2
2025-11-10 23:10:03.196 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (20 bytes)
2025-11-10 23:10:03.202 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 20 bytes
2025-11-10 23:10:03.203 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 48 bytes (IV: 12, encrypted: 36)
2025-11-10 23:10:03.204 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 48 bytes
2025-11-10 23:10:03.206 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812603202-7d334e86.enc
2025-11-10 23:10:03.206 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: ea7a33e0dea48e4e5fdc1bf1721b378b94ff9ca3a216412863b86945473a6100
2025-11-10 23:10:03.207 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (20 bytes)
2025-11-10 23:10:03.208 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 20 bytes
2025-11-10 23:10:03.208 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 48 bytes (IV: 12, encrypted: 36)
2025-11-10 23:10:03.209 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 48 bytes
2025-11-10 23:10:03.209 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812603208-eb7d6bf1.enc
2025-11-10 23:10:03.210 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: f69740ebd4ff80d4bc6b46405dafbb1a504dc084f4266e4a25e09e815aef7cbe
2025-11-10 23:10:03.210 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (20 bytes)
2025-11-10 23:10:03.210 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 20 bytes
2025-11-10 23:10:03.210 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 48 bytes (IV: 12, encrypted: 36)
2025-11-10 23:10:03.210 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 48 bytes
2025-11-10 23:10:03.211 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812603210-f65a097d.enc
2025-11-10 23:10:03.211 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 2f2c57accacbbc00d093b84c8d6eeeaa6be741d5a0c9e672344d96d02c14b987
2025-11-10 23:10:03.213 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762812603202-7d334e86
2025-11-10 23:10:03.214 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 48 bytes
2025-11-10 23:10:03.214 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 48 bytes
2025-11-10 23:10:03.214 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 20 bytes
2025-11-10 23:10:03.214 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762812603202-7d334e86 (20 bytes)
2025-11-10 23:10:03.214 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762812603208-eb7d6bf1
2025-11-10 23:10:03.215 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 48 bytes
2025-11-10 23:10:03.220 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 48 bytes
2025-11-10 23:10:03.221 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 20 bytes
2025-11-10 23:10:03.221 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762812603208-eb7d6bf1 (20 bytes)
2025-11-10 23:10:03.221 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762812603210-f65a097d
2025-11-10 23:10:03.222 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 48 bytes
2025-11-10 23:10:03.223 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 48 bytes
2025-11-10 23:10:03.225 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 20 bytes
2025-11-10 23:10:03.225 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762812603210-f65a097d (20 bytes)
2025-11-10 23:10:03.274 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: non-existent-blob-id
2025-11-10 23:10:03.274 [main] ERROR e.t.votacion.service.StorageService - Error searching for blob non-existent-blob-id: /tmp/votacion-test-storage
2025-11-10 23:10:03.274 [main] ERROR e.t.votacion.service.StorageService - Blob not found: non-existent-blob-id
2025-11-10 23:10:03.275 [main] ERROR e.t.votacion.service.StorageService - Failed to load and decrypt blob non-existent-blob-id: Blob not found: non-existent-blob-id
java.lang.RuntimeException: Blob not found: non-existent-blob-id
	at es.tfg.votacion.service.StorageService.loadDecrypted(StorageService.java:170)
	at es.tfg.votacion.service.StorageServiceTest.lambda$shouldThrowExceptionForNonExistentBlob$4(StorageServiceTest.java:279)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:39)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3153)
	at es.tfg.votacion.service.StorageServiceTest.shouldThrowExceptionForNonExistentBlob(StorageServiceTest.java:278)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.executeWithoutCancellationToken(LauncherAdapter.java:60)
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.execute(LauncherAdapter.java:52)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:203)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:168)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:136)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-11-10 23:10:03.291 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:10:03.291 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:10:03.292 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:10:03.292 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:10:03.293 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812603291-8eeb2a9e.enc
2025-11-10 23:10:03.294 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 713c299a6db4658e78d1b484b58302603b9a0a1d9d468ab2a71b324fdf10b5df
2025-11-10 23:10:03.302 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:10:03.307 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:10:03.307 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:10:03.307 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:10:03.308 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812603306-3281fea9.enc
2025-11-10 23:10:03.309 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: d98318426d9e44aa3b4b8b03292271a7cb0e36cb0c78b673d4c1c662e9d55bf9
2025-11-10 23:10:03.309 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:10:03.309 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:10:03.309 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:10:03.309 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:10:03.310 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812603309-ecf07b8f.enc
2025-11-10 23:10:03.310 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: d2ef07b0dfdb57701745e99f544be3617adc11833bdf37186c89c90226a84a36
2025-11-10 23:10:03.312 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762812603306-3281fea9
2025-11-10 23:10:03.313 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 65 bytes
2025-11-10 23:10:03.314 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 65 bytes
2025-11-10 23:10:03.314 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 37 bytes
2025-11-10 23:10:03.315 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762812603306-3281fea9 (37 bytes)
2025-11-10 23:10:03.315 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762812603309-ecf07b8f
2025-11-10 23:10:03.316 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 65 bytes
2025-11-10 23:10:03.317 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 65 bytes
2025-11-10 23:10:03.317 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 37 bytes
2025-11-10 23:10:03.317 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762812603309-ecf07b8f (37 bytes)
2025-11-10 23:10:03.427 [SpringApplicationShutdownHook] INFO  e.t.votacion.service.StorageService - Shutting down Storage Service
2025-11-10 23:10:03.427 [SpringApplicationShutdownHook] DEBUG e.t.votacion.service.StorageService - Master key cleared from memory
2025-11-10 23:10:23.204 [main] INFO  e.t.v.c.ConfigurationPropertiesTest - Starting ConfigurationPropertiesTest using Java 21.0.8 with PID 1414590 (started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-10 23:10:23.206 [main] DEBUG e.t.v.c.ConfigurationPropertiesTest - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-10 23:10:23.206 [main] INFO  e.t.v.c.ConfigurationPropertiesTest - No active profile set, falling back to 1 default profile: "default"
2025-11-10 23:10:24.710 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-10 23:10:24.710 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-10 23:10:24.711 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /home/ehuetadr/fabric/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/connection-org1.json
2025-11-10 23:10:24.712 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /home/ehuetadr/TFG/VotacionBC/backend-spring/wallet
2025-11-10 23:10:24.713 [main] DEBUG e.tfg.votacion.service.FabricService - User: appUser
2025-11-10 23:10:24.713 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: electionchannel
2025-11-10 23:10:24.713 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: electioncc
2025-11-10 23:10:24.713 [main] WARN  e.tfg.votacion.service.FabricService - Using MOCK Fabric connection for PoC development
2025-11-10 23:10:24.713 [main] WARN  e.tfg.votacion.service.FabricService - To use real Fabric connection, implement proper Gateway initialization
2025-11-10 23:10:24.713 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-10 23:10:24.731 [main] INFO  e.t.votacion.service.StorageService - Initializing Storage Service with AES-GCM encryption
2025-11-10 23:10:24.732 [main] DEBUG e.t.votacion.service.StorageService - Loading encryption key from keystore: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/keystore/keystore.json
2025-11-10 23:10:24.753 [main] DEBUG e.t.votacion.service.StorageService - Keystore loaded - algorithm: AES/GCM/NoPadding, key length: 256 bits
2025-11-10 23:10:24.755 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded and validated successfully
2025-11-10 23:10:24.755 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded successfully from keystore
2025-11-10 23:10:24.756 [main] INFO  e.t.votacion.service.StorageService - Storage directory initialized: /home/ehuetadr/TFG/VotacionBC/backend-spring/data/storage
2025-11-10 23:10:24.760 [main] DEBUG e.t.votacion.service.StorageService - Encryption algorithm: AES/GCM/NoPadding
2025-11-10 23:10:24.761 [main] DEBUG e.t.votacion.service.StorageService - Key length: 256 bits
2025-11-10 23:10:24.761 [main] DEBUG e.t.votacion.service.StorageService - IV length: 12 bytes
2025-11-10 23:10:24.761 [main] DEBUG e.t.votacion.service.StorageService - Tag length: 128 bits
2025-11-10 23:10:24.761 [main] INFO  e.t.votacion.service.StorageService - Automatic cleanup enabled - retention: 30 days
2025-11-10 23:10:25.023 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-10 23:10:25.742 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: f5a5ff46-7f46-4bf4-b4e1-bffe1ec48692

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-10 23:10:25.762 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-10 23:10:25.986 [main] INFO  e.t.v.c.ConfigurationPropertiesTest - Started ConfigurationPropertiesTest in 3.378 seconds (process running for 5.007)
2025-11-10 23:10:27.103 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [es.tfg.votacion.service.FabricServiceTest]: FabricServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-10 23:10:27.123 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration es.tfg.votacion.Application for test class es.tfg.votacion.service.FabricServiceTest
2025-11-10 23:10:27.206 [main] INFO  e.t.v.service.FabricServiceTest - Starting FabricServiceTest using Java 21.0.8 with PID 1414590 (started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-10 23:10:27.206 [main] DEBUG e.t.v.service.FabricServiceTest - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-10 23:10:27.206 [main] INFO  e.t.v.service.FabricServiceTest - No active profile set, falling back to 1 default profile: "default"
2025-11-10 23:10:27.589 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-10 23:10:27.590 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-10 23:10:27.590 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /tmp/mock-connection.json
2025-11-10 23:10:27.590 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /tmp/mock-wallet
2025-11-10 23:10:27.591 [main] DEBUG e.tfg.votacion.service.FabricService - User: mockUser
2025-11-10 23:10:27.591 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: mockchannel
2025-11-10 23:10:27.591 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: mockcc
2025-11-10 23:10:27.591 [main] WARN  e.tfg.votacion.service.FabricService - Using MOCK Fabric connection for PoC development
2025-11-10 23:10:27.591 [main] WARN  e.tfg.votacion.service.FabricService - To use real Fabric connection, implement proper Gateway initialization
2025-11-10 23:10:27.592 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-10 23:10:27.604 [main] INFO  e.t.votacion.service.StorageService - Initializing Storage Service with AES-GCM encryption
2025-11-10 23:10:27.604 [main] DEBUG e.t.votacion.service.StorageService - Loading encryption key from keystore: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/keystore/keystore.json
2025-11-10 23:10:27.605 [main] DEBUG e.t.votacion.service.StorageService - Keystore loaded - algorithm: AES/GCM/NoPadding, key length: 256 bits
2025-11-10 23:10:27.606 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded and validated successfully
2025-11-10 23:10:27.606 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded successfully from keystore
2025-11-10 23:10:27.606 [main] INFO  e.t.votacion.service.StorageService - Storage directory initialized: /home/ehuetadr/TFG/VotacionBC/backend-spring/data/storage
2025-11-10 23:10:27.606 [main] DEBUG e.t.votacion.service.StorageService - Encryption algorithm: AES/GCM/NoPadding
2025-11-10 23:10:27.607 [main] DEBUG e.t.votacion.service.StorageService - Key length: 256 bits
2025-11-10 23:10:27.607 [main] DEBUG e.t.votacion.service.StorageService - IV length: 12 bytes
2025-11-10 23:10:27.607 [main] DEBUG e.t.votacion.service.StorageService - Tag length: 128 bits
2025-11-10 23:10:27.607 [main] INFO  e.t.votacion.service.StorageService - Automatic cleanup enabled - retention: 30 days
2025-11-10 23:10:27.693 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-10 23:10:27.817 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 8a21eb13-d955-4b54-b8e9-fc00193da06c

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-10 23:10:27.818 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-10 23:10:27.870 [main] INFO  e.t.v.service.FabricServiceTest - Started FabricServiceTest in 0.731 seconds (process running for 6.891)
2025-11-10 23:10:27.887 [main] DEBUG e.tfg.votacion.service.FabricService - Verifying vote transaction: MOCK-TX-12345
2025-11-10 23:10:27.888 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, using mock verification
2025-11-10 23:10:27.888 [main] DEBUG e.tfg.votacion.service.FabricService - MOCK: Transaction MOCK-TX-12345 verification result: true
2025-11-10 23:10:27.888 [main] DEBUG e.tfg.votacion.service.FabricService - Verifying vote transaction: TX-election-001-67890
2025-11-10 23:10:27.889 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, using mock verification
2025-11-10 23:10:27.889 [main] DEBUG e.tfg.votacion.service.FabricService - MOCK: Transaction TX-election-001-67890 verification result: true
2025-11-10 23:10:27.889 [main] DEBUG e.tfg.votacion.service.FabricService - Verifying vote transaction: INVALID-ID
2025-11-10 23:10:27.889 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, using mock verification
2025-11-10 23:10:27.890 [main] DEBUG e.tfg.votacion.service.FabricService - MOCK: Transaction INVALID-ID verification result: false
2025-11-10 23:10:27.890 [main] DEBUG e.tfg.votacion.service.FabricService - Verifying vote transaction: null
2025-11-10 23:10:27.893 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, using mock verification
2025-11-10 23:10:27.894 [main] DEBUG e.tfg.votacion.service.FabricService - MOCK: Transaction null verification result: false
2025-11-10 23:10:27.903 [main] INFO  e.tfg.votacion.service.FabricService - Emitting vote commitment to blockchain - Election: integration-test-election, Commitment: integration-test-commitment
2025-11-10 23:10:27.903 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock transaction ID
2025-11-10 23:10:27.905 [main] DEBUG e.tfg.votacion.service.FabricService - Verifying vote transaction: MOCK-TX-integration-test-election-1762812627904
2025-11-10 23:10:27.905 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, using mock verification
2025-11-10 23:10:27.906 [main] DEBUG e.tfg.votacion.service.FabricService - MOCK: Transaction MOCK-TX-integration-test-election-1762812627904 verification result: true
2025-11-10 23:10:27.906 [main] DEBUG e.tfg.votacion.service.FabricService - Querying election status: integration-test-election
2025-11-10 23:10:27.906 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning default status
2025-11-10 23:10:27.906 [main] INFO  e.tfg.votacion.service.FabricService - Counting votes from blockchain for election: integration-test-election
2025-11-10 23:10:27.906 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock results
2025-11-10 23:10:27.918 [main] INFO  e.tfg.votacion.service.FabricService - Counting votes from blockchain for election: test-election-003
2025-11-10 23:10:27.919 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock results
2025-11-10 23:10:27.931 [main] INFO  e.tfg.votacion.service.FabricService - Closing election on blockchain: test-election-002
2025-11-10 23:10:27.931 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock result
2025-11-10 23:10:27.964 [main] DEBUG e.tfg.votacion.service.FabricService - Querying election status: test-election-004
2025-11-10 23:10:27.965 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning default status
2025-11-10 23:10:27.985 [main] INFO  e.tfg.votacion.service.FabricService - Emitting vote commitment to blockchain - Election: test-election-001, Commitment: abc123def456
2025-11-10 23:10:27.985 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock transaction ID
2025-11-10 23:10:28.021 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [es.tfg.votacion.service.StorageServiceTest]: StorageServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-10 23:10:28.024 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration es.tfg.votacion.Application for test class es.tfg.votacion.service.StorageServiceTest
2025-11-10 23:10:28.070 [main] INFO  e.t.v.service.StorageServiceTest - Starting StorageServiceTest using Java 21.0.8 with PID 1414590 (started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-10 23:10:28.070 [main] DEBUG e.t.v.service.StorageServiceTest - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-10 23:10:28.071 [main] INFO  e.t.v.service.StorageServiceTest - No active profile set, falling back to 1 default profile: "default"
2025-11-10 23:10:28.377 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-10 23:10:28.377 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-10 23:10:28.377 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /home/ehuetadr/fabric/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/connection-org1.json
2025-11-10 23:10:28.378 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /home/ehuetadr/TFG/VotacionBC/backend-spring/wallet
2025-11-10 23:10:28.378 [main] DEBUG e.tfg.votacion.service.FabricService - User: appUser
2025-11-10 23:10:28.378 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: electionchannel
2025-11-10 23:10:28.378 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: electioncc
2025-11-10 23:10:28.378 [main] WARN  e.tfg.votacion.service.FabricService - Using MOCK Fabric connection for PoC development
2025-11-10 23:10:28.378 [main] WARN  e.tfg.votacion.service.FabricService - To use real Fabric connection, implement proper Gateway initialization
2025-11-10 23:10:28.378 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-10 23:10:28.398 [main] INFO  e.t.votacion.service.StorageService - Initializing Storage Service with AES-GCM encryption
2025-11-10 23:10:28.398 [main] DEBUG e.t.votacion.service.StorageService - Loading encryption key from keystore: src/main/resources/keystore/keystore.json
2025-11-10 23:10:28.399 [main] DEBUG e.t.votacion.service.StorageService - Keystore loaded - algorithm: AES/GCM/NoPadding, key length: 256 bits
2025-11-10 23:10:28.399 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded and validated successfully
2025-11-10 23:10:28.400 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded successfully from keystore
2025-11-10 23:10:28.400 [main] INFO  e.t.votacion.service.StorageService - Storage directory initialized: /tmp/votacion-test-storage
2025-11-10 23:10:28.401 [main] DEBUG e.t.votacion.service.StorageService - Encryption algorithm: AES/GCM/NoPadding
2025-11-10 23:10:28.401 [main] DEBUG e.t.votacion.service.StorageService - Key length: 256 bits
2025-11-10 23:10:28.401 [main] DEBUG e.t.votacion.service.StorageService - IV length: 12 bytes
2025-11-10 23:10:28.401 [main] DEBUG e.t.votacion.service.StorageService - Tag length: 128 bits
2025-11-10 23:10:28.402 [main] WARN  e.t.votacion.service.StorageService - Automatic cleanup is disabled
2025-11-10 23:10:28.464 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-10 23:10:28.613 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 20cd0179-3288-430f-a7b8-75593d65b772

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-10 23:10:28.614 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-10 23:10:28.663 [main] INFO  e.t.v.service.StorageServiceTest - Started StorageServiceTest in 0.631 seconds (process running for 7.684)
2025-11-10 23:10:28.697 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:10:28.698 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:10:28.714 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:10:28.714 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:10:28.717 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812628697-80d38bfd.enc
2025-11-10 23:10:28.718 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: c25276fddf1ece13b6d5d042441618e5a77406d1b928cf8efd307df5778787ad
2025-11-10 23:10:28.735 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:10:28.735 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:10:28.736 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:10:28.736 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:10:28.737 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812628735-e3ff7a7b.enc
2025-11-10 23:10:28.738 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: b1eae13500bde849dc35824b4fd9ce1fe0fee7eda7d959eafdb7b4c35bec8b24
2025-11-10 23:10:28.738 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762812628735-e3ff7a7b
2025-11-10 23:10:28.738 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 65 bytes
2025-11-10 23:10:28.738 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 65 bytes
2025-11-10 23:10:28.739 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 37 bytes
2025-11-10 23:10:28.739 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762812628735-e3ff7a7b (37 bytes)
2025-11-10 23:10:28.754 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (1024 bytes)
2025-11-10 23:10:28.754 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 1024 bytes
2025-11-10 23:10:28.756 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 1052 bytes (IV: 12, encrypted: 1040)
2025-11-10 23:10:28.756 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 1052 bytes
2025-11-10 23:10:28.757 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812628754-7c8a5337.enc
2025-11-10 23:10:28.758 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 5f3792cb3fe11e4e7fac3059f8a101887440132e6f22bce3acda0ef849e7c259
2025-11-10 23:10:28.758 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762812628754-7c8a5337
2025-11-10 23:10:28.758 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 1052 bytes
2025-11-10 23:10:28.758 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 1052 bytes
2025-11-10 23:10:28.759 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 1024 bytes
2025-11-10 23:10:28.767 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762812628754-7c8a5337 (1024 bytes)
2025-11-10 23:10:28.778 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (30890 bytes)
2025-11-10 23:10:28.778 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 30890 bytes
2025-11-10 23:10:28.793 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 30918 bytes (IV: 12, encrypted: 30906)
2025-11-10 23:10:28.793 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 30918 bytes
2025-11-10 23:10:28.794 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812628778-a2681253.enc
2025-11-10 23:10:28.807 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 6e2bced865015fcb76f5e1ea6aa979103c943ca1a592c7f75ac1ae5f49c7b844
2025-11-10 23:10:28.807 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762812628778-a2681253
2025-11-10 23:10:28.808 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 30918 bytes
2025-11-10 23:10:28.808 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 30918 bytes
2025-11-10 23:10:28.811 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 30890 bytes
2025-11-10 23:10:28.811 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762812628778-a2681253 (30890 bytes)
2025-11-10 23:10:28.826 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:10:28.827 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:10:28.827 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:10:28.827 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:10:28.828 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812628826-f50f0a45.enc
2025-11-10 23:10:28.829 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: b74db4e877630aeb63380c2678a39164a3939e0910923b768e8dc690538bcb4e
2025-11-10 23:10:28.829 [main] INFO  e.t.votacion.service.StorageService - Deleting blob: BLOB-test-election-001-1762812628826-f50f0a45
2025-11-10 23:10:28.834 [main] INFO  e.t.votacion.service.StorageService - Blob deleted securely: BLOB-test-election-001-1762812628826-f50f0a45
2025-11-10 23:10:28.843 [main] INFO  e.t.votacion.service.StorageService - Deleting blob: non-existent-blob-id
2025-11-10 23:10:28.844 [main] ERROR e.t.votacion.service.StorageService - Error searching for blob non-existent-blob-id: /tmp/votacion-test-storage
2025-11-10 23:10:28.845 [main] WARN  e.t.votacion.service.StorageService - Blob not found for deletion: non-existent-blob-id
2025-11-10 23:10:28.853 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:10:28.854 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:10:28.854 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:10:28.854 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:10:28.855 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812628854-60c099dc.enc
2025-11-10 23:10:28.856 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 12cd140a3318ec73d336a085183198d0379cbea5d79a4085ffd69ed347de2a40
2025-11-10 23:10:28.864 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (20 bytes)
2025-11-10 23:10:28.864 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 20 bytes
2025-11-10 23:10:28.864 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 48 bytes (IV: 12, encrypted: 36)
2025-11-10 23:10:28.865 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 48 bytes
2025-11-10 23:10:28.868 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812628864-27dd6a1a.enc
2025-11-10 23:10:28.868 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 4d882a02a7f2f3db13453886ec0f22478bed7e8fab280f48752d2255bea22c20
2025-11-10 23:10:28.868 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (20 bytes)
2025-11-10 23:10:28.868 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 20 bytes
2025-11-10 23:10:28.869 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 48 bytes (IV: 12, encrypted: 36)
2025-11-10 23:10:28.869 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 48 bytes
2025-11-10 23:10:28.869 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812628868-36310490.enc
2025-11-10 23:10:28.870 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 80b16fba4f535b8a7abd378b8f6679bf206a090ea76920356f604b6468901db7
2025-11-10 23:10:28.870 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (20 bytes)
2025-11-10 23:10:28.870 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 20 bytes
2025-11-10 23:10:28.870 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 48 bytes (IV: 12, encrypted: 36)
2025-11-10 23:10:28.870 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 48 bytes
2025-11-10 23:10:28.871 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812628870-0419c443.enc
2025-11-10 23:10:28.871 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 00dee7b9e9bf7101fcce7b6f6e20202ef8793d7d0e86fcc45f4637be978e4de1
2025-11-10 23:10:28.872 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762812628864-27dd6a1a
2025-11-10 23:10:28.877 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 48 bytes
2025-11-10 23:10:28.877 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 48 bytes
2025-11-10 23:10:28.877 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 20 bytes
2025-11-10 23:10:28.877 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762812628864-27dd6a1a (20 bytes)
2025-11-10 23:10:28.877 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762812628868-36310490
2025-11-10 23:10:28.878 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 48 bytes
2025-11-10 23:10:28.878 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 48 bytes
2025-11-10 23:10:28.878 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 20 bytes
2025-11-10 23:10:28.878 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762812628868-36310490 (20 bytes)
2025-11-10 23:10:28.878 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762812628870-0419c443
2025-11-10 23:10:28.879 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 48 bytes
2025-11-10 23:10:28.880 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 48 bytes
2025-11-10 23:10:28.880 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 20 bytes
2025-11-10 23:10:28.880 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762812628870-0419c443 (20 bytes)
2025-11-10 23:10:28.926 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: non-existent-blob-id
2025-11-10 23:10:28.927 [main] ERROR e.t.votacion.service.StorageService - Error searching for blob non-existent-blob-id: /tmp/votacion-test-storage
2025-11-10 23:10:28.927 [main] ERROR e.t.votacion.service.StorageService - Blob not found: non-existent-blob-id
2025-11-10 23:10:28.927 [main] ERROR e.t.votacion.service.StorageService - Failed to load and decrypt blob non-existent-blob-id: Blob not found: non-existent-blob-id
java.lang.RuntimeException: Blob not found: non-existent-blob-id
	at es.tfg.votacion.service.StorageService.loadDecrypted(StorageService.java:170)
	at es.tfg.votacion.service.StorageServiceTest.lambda$shouldThrowExceptionForNonExistentBlob$4(StorageServiceTest.java:279)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:39)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3153)
	at es.tfg.votacion.service.StorageServiceTest.shouldThrowExceptionForNonExistentBlob(StorageServiceTest.java:278)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.executeWithoutCancellationToken(LauncherAdapter.java:60)
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.execute(LauncherAdapter.java:52)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:203)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:168)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:136)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-11-10 23:10:28.946 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:10:28.946 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:10:28.947 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:10:28.947 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:10:28.948 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812628946-b2b24701.enc
2025-11-10 23:10:28.960 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: e357073f762ef367e01ecc85873482aed76db596fbe98a6bcb6a962edab64e13
2025-11-10 23:10:28.978 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:10:28.978 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:10:28.980 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:10:28.980 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:10:28.982 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812628978-85ca7446.enc
2025-11-10 23:10:28.982 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 0e100a5be688f5aec319ecf26845ed14e26ec432533e41c7914c4396a04f341f
2025-11-10 23:10:28.983 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:10:28.983 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:10:28.983 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:10:28.984 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:10:28.984 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762812628983-38623161.enc
2025-11-10 23:10:28.984 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 2408c1206e68b5020cee893f14cc53ce8028f7d98ef34fbd7fe13f18d5b28d8d
2025-11-10 23:10:28.985 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762812628978-85ca7446
2025-11-10 23:10:28.985 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 65 bytes
2025-11-10 23:10:28.986 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 65 bytes
2025-11-10 23:10:28.986 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 37 bytes
2025-11-10 23:10:28.986 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762812628978-85ca7446 (37 bytes)
2025-11-10 23:10:28.986 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762812628983-38623161
2025-11-10 23:10:28.990 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 65 bytes
2025-11-10 23:10:28.991 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 65 bytes
2025-11-10 23:10:28.991 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 37 bytes
2025-11-10 23:10:28.991 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762812628983-38623161 (37 bytes)
2025-11-10 23:10:29.032 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [es.tfg.votacion.ApplicationTests]: ApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-10 23:10:29.056 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration es.tfg.votacion.Application for test class es.tfg.votacion.ApplicationTests
2025-11-10 23:10:29.123 [SpringApplicationShutdownHook] INFO  e.t.votacion.service.StorageService - Shutting down Storage Service
2025-11-10 23:10:29.124 [SpringApplicationShutdownHook] DEBUG e.t.votacion.service.StorageService - Master key cleared from memory
2025-11-10 23:10:29.126 [SpringApplicationShutdownHook] INFO  e.t.votacion.service.StorageService - Shutting down Storage Service
2025-11-10 23:10:29.130 [SpringApplicationShutdownHook] DEBUG e.t.votacion.service.StorageService - Master key cleared from memory
2025-11-10 23:10:29.132 [SpringApplicationShutdownHook] INFO  e.t.votacion.service.StorageService - Shutting down Storage Service
2025-11-10 23:10:29.132 [SpringApplicationShutdownHook] DEBUG e.t.votacion.service.StorageService - Master key cleared from memory
2025-11-10 23:15:24.965 [main] INFO  e.t.votacion.service.AuthServiceTest - Starting AuthServiceTest using Java 21.0.8 with PID 1417221 (started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-10 23:15:24.967 [main] DEBUG e.t.votacion.service.AuthServiceTest - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-10 23:15:24.968 [main] INFO  e.t.votacion.service.AuthServiceTest - No active profile set, falling back to 1 default profile: "default"
2025-11-10 23:15:26.637 [main] INFO  es.tfg.votacion.service.AuthService - Initializing Authentication Service (Mock Mode)
2025-11-10 23:15:26.637 [main] DEBUG es.tfg.votacion.service.AuthService - Loading mock users from: src/main/resources/mock/users.json
2025-11-10 23:15:26.675 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: juan.perez (role: Votante (voter), active: true)
2025-11-10 23:15:26.676 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: maria.gonzalez (role: Votante (voter), active: true)
2025-11-10 23:15:26.677 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: admin (role: Administrador (admin), active: true)
2025-11-10 23:15:26.677 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: auditor (role: Auditor (auditor), active: true)
2025-11-10 23:15:26.677 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: carlos.martin (role: Votante (voter), active: true)
2025-11-10 23:15:26.678 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: ana.rodriguez (role: Votante (voter), active: true)
2025-11-10 23:15:26.678 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: pedro.lopez (role: Administrador (admin), active: true)
2025-11-10 23:15:26.678 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: lucia.garcia (role: Votante (voter), active: false)
2025-11-10 23:15:26.678 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: test.user (role: Votante (voter), active: true)
2025-11-10 23:15:26.678 [main] INFO  es.tfg.votacion.service.AuthService - Loaded 9 mock users from src/main/resources/mock/users.json
2025-11-10 23:15:26.684 [main] DEBUG es.tfg.votacion.service.AuthService - JWT signing key initialized with HS256 algorithm
2025-11-10 23:15:26.688 [main] INFO  es.tfg.votacion.service.AuthService - JWT signing key initialized successfully
2025-11-10 23:15:26.689 [main] DEBUG es.tfg.votacion.service.AuthService - JWT issuer: votacion-test
2025-11-10 23:15:26.689 [main] DEBUG es.tfg.votacion.service.AuthService - JWT audience: test-system
2025-11-10 23:15:26.690 [main] DEBUG es.tfg.votacion.service.AuthService - JWT expiration: 3600 seconds
2025-11-10 23:15:26.690 [main] DEBUG es.tfg.votacion.service.AuthService - Allowed roles: [voter, admin, auditor]
2025-11-10 23:15:26.690 [main] WARN  es.tfg.votacion.service.AuthService - Running in MOCK authentication mode - not suitable for production!
2025-11-10 23:15:26.716 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-10 23:15:26.716 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-10 23:15:26.716 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /home/ehuetadr/fabric/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/connection-org1.json
2025-11-10 23:15:26.717 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /home/ehuetadr/TFG/VotacionBC/backend-spring/wallet
2025-11-10 23:15:26.717 [main] DEBUG e.tfg.votacion.service.FabricService - User: appUser
2025-11-10 23:15:26.717 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: electionchannel
2025-11-10 23:15:26.717 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: electioncc
2025-11-10 23:15:26.717 [main] WARN  e.tfg.votacion.service.FabricService - Using MOCK Fabric connection for PoC development
2025-11-10 23:15:26.717 [main] WARN  e.tfg.votacion.service.FabricService - To use real Fabric connection, implement proper Gateway initialization
2025-11-10 23:15:26.717 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-10 23:15:26.739 [main] INFO  e.t.votacion.service.StorageService - Initializing Storage Service with AES-GCM encryption
2025-11-10 23:15:26.741 [main] DEBUG e.t.votacion.service.StorageService - Loading encryption key from keystore: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/keystore/keystore.json
2025-11-10 23:15:26.747 [main] DEBUG e.t.votacion.service.StorageService - Keystore loaded - algorithm: AES/GCM/NoPadding, key length: 256 bits
2025-11-10 23:15:26.749 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded and validated successfully
2025-11-10 23:15:26.749 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded successfully from keystore
2025-11-10 23:15:26.749 [main] INFO  e.t.votacion.service.StorageService - Storage directory initialized: /home/ehuetadr/TFG/VotacionBC/backend-spring/data/storage
2025-11-10 23:15:26.750 [main] DEBUG e.t.votacion.service.StorageService - Encryption algorithm: AES/GCM/NoPadding
2025-11-10 23:15:26.750 [main] DEBUG e.t.votacion.service.StorageService - Key length: 256 bits
2025-11-10 23:15:26.750 [main] DEBUG e.t.votacion.service.StorageService - IV length: 12 bytes
2025-11-10 23:15:26.750 [main] DEBUG e.t.votacion.service.StorageService - Tag length: 128 bits
2025-11-10 23:15:26.750 [main] INFO  e.t.votacion.service.StorageService - Automatic cleanup enabled - retention: 30 days
2025-11-10 23:15:26.965 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-10 23:15:27.485 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 93c64045-f861-48e6-880b-da0aaabae200

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-10 23:15:27.496 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-10 23:15:26.465 [main] INFO  e.t.votacion.service.AuthServiceTest - Started AuthServiceTest in 2.07 seconds (process running for 5.575)
2025-11-10 23:15:27.401 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:15:27.510 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: invalid password for user: test.user
2025-11-10 23:15:27.579 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:15:27.775 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: invalid password for user: test.user
2025-11-10 23:15:27.813 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: non.existent.user
2025-11-10 23:15:27.819 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: user not found: non.existent.user
2025-11-10 23:15:27.841 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: lucia.garcia
2025-11-10 23:15:27.973 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: invalid password for user: lucia.garcia
2025-11-10 23:15:27.985 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: username is null or empty
2025-11-10 23:15:27.986 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: password is null or empty
2025-11-10 23:15:27.987 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: username is null or empty
2025-11-10 23:15:27.995 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: username is null or empty
2025-11-10 23:15:27.995 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: password is null or empty
2025-11-10 23:15:27.996 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: username is null or empty
2025-11-10 23:15:28.003 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:15:28.089 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: invalid password for user: test.user
2025-11-10 23:15:28.104 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:15:28.192 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: invalid password for user: test.user
2025-11-10 23:15:28.200 [main] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-10 23:15:28.281 [main] WARN  es.tfg.votacion.service.AuthService - JWT validation failed: Malformed protected header JSON: Unable to deserialize: Unexpected character ('' (code 65533 / 0xfffd)): expected a valid value (JSON String, Number, Array, Object or token 'null', 'true' or 'false')
 at [Source: REDACTED (`StreamReadFeature.INCLUDE_SOURCE_IN_LOCATION` disabled); line: 1, column: 1]
2025-11-10 23:15:28.282 [main] WARN  es.tfg.votacion.service.AuthService - JWT validation failed: token is null or empty
2025-11-10 23:15:28.282 [main] WARN  es.tfg.votacion.service.AuthService - JWT validation failed: token is null or empty
2025-11-10 23:15:28.283 [main] WARN  es.tfg.votacion.service.AuthService - JWT validation failed: token is null or empty
2025-11-10 23:15:28.290 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:15:28.377 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: invalid password for user: test.user
2025-11-10 23:15:28.393 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:15:28.482 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: invalid password for user: test.user
2025-11-10 23:15:28.483 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: admin
2025-11-10 23:15:28.569 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: invalid password for user: admin
2025-11-10 23:15:28.570 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: auditor
2025-11-10 23:15:28.654 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: invalid password for user: auditor
2025-11-10 23:15:28.664 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:15:28.751 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: invalid password for user: test.user
2025-11-10 23:15:28.752 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: admin
2025-11-10 23:15:28.835 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: invalid password for user: admin
2025-11-10 23:15:28.843 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:15:28.929 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: invalid password for user: test.user
2025-11-10 23:15:28.970 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: admin
2025-11-10 23:15:29.058 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: invalid password for user: admin
2025-11-10 23:15:29.067 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: juan.perez
2025-11-10 23:15:29.152 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: invalid password for user: juan.perez
2025-11-10 23:15:29.153 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: maria.gonzalez
2025-11-10 23:15:29.238 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: invalid password for user: maria.gonzalez
2025-11-10 23:15:29.239 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: admin
2025-11-10 23:15:29.321 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: invalid password for user: admin
2025-11-10 23:15:29.330 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:15:29.413 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: invalid password for user: test.user
2025-11-10 23:15:29.413 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: TEST.USER
2025-11-10 23:15:29.496 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: invalid password for user: TEST.USER
2025-11-10 23:15:29.498 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: Test.User
2025-11-10 23:15:29.588 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: invalid password for user: Test.User
2025-11-10 23:15:29.685 [SpringApplicationShutdownHook] INFO  e.t.votacion.service.StorageService - Shutting down Storage Service
2025-11-10 23:15:29.685 [SpringApplicationShutdownHook] DEBUG e.t.votacion.service.StorageService - Master key cleared from memory
2025-11-10 23:15:52.958 [main] INFO  e.t.votacion.service.AuthServiceTest - Starting AuthServiceTest using Java 21.0.8 with PID 1417715 (started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-10 23:15:52.960 [main] DEBUG e.t.votacion.service.AuthServiceTest - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-10 23:15:52.963 [main] INFO  e.t.votacion.service.AuthServiceTest - No active profile set, falling back to 1 default profile: "default"
2025-11-10 23:15:54.533 [main] INFO  es.tfg.votacion.service.AuthService - Initializing Authentication Service (Mock Mode)
2025-11-10 23:15:54.533 [main] DEBUG es.tfg.votacion.service.AuthService - Loading mock users from: src/main/resources/mock/users.json
2025-11-10 23:15:54.559 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: juan.perez (role: Votante (voter), active: true)
2025-11-10 23:15:54.560 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: maria.gonzalez (role: Votante (voter), active: true)
2025-11-10 23:15:54.560 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: admin (role: Administrador (admin), active: true)
2025-11-10 23:15:54.562 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: auditor (role: Auditor (auditor), active: true)
2025-11-10 23:15:54.565 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: carlos.martin (role: Votante (voter), active: true)
2025-11-10 23:15:54.567 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: ana.rodriguez (role: Votante (voter), active: true)
2025-11-10 23:15:54.567 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: pedro.lopez (role: Administrador (admin), active: true)
2025-11-10 23:15:54.567 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: lucia.garcia (role: Votante (voter), active: false)
2025-11-10 23:15:54.568 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: test.user (role: Votante (voter), active: true)
2025-11-10 23:15:54.568 [main] INFO  es.tfg.votacion.service.AuthService - Loaded 9 mock users from src/main/resources/mock/users.json
2025-11-10 23:15:54.572 [main] DEBUG es.tfg.votacion.service.AuthService - JWT signing key initialized with HS256 algorithm
2025-11-10 23:15:54.573 [main] INFO  es.tfg.votacion.service.AuthService - JWT signing key initialized successfully
2025-11-10 23:15:54.573 [main] DEBUG es.tfg.votacion.service.AuthService - JWT issuer: votacion-test
2025-11-10 23:15:54.573 [main] DEBUG es.tfg.votacion.service.AuthService - JWT audience: test-system
2025-11-10 23:15:54.573 [main] DEBUG es.tfg.votacion.service.AuthService - JWT expiration: 3600 seconds
2025-11-10 23:15:54.574 [main] DEBUG es.tfg.votacion.service.AuthService - Allowed roles: [voter, admin, auditor]
2025-11-10 23:15:54.574 [main] WARN  es.tfg.votacion.service.AuthService - Running in MOCK authentication mode - not suitable for production!
2025-11-10 23:15:54.600 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-10 23:15:54.601 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-10 23:15:54.601 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /home/ehuetadr/fabric/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/connection-org1.json
2025-11-10 23:15:54.602 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /home/ehuetadr/TFG/VotacionBC/backend-spring/wallet
2025-11-10 23:15:54.602 [main] DEBUG e.tfg.votacion.service.FabricService - User: appUser
2025-11-10 23:15:54.603 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: electionchannel
2025-11-10 23:15:54.604 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: electioncc
2025-11-10 23:15:54.604 [main] WARN  e.tfg.votacion.service.FabricService - Using MOCK Fabric connection for PoC development
2025-11-10 23:15:54.604 [main] WARN  e.tfg.votacion.service.FabricService - To use real Fabric connection, implement proper Gateway initialization
2025-11-10 23:15:54.604 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-10 23:15:54.627 [main] INFO  e.t.votacion.service.StorageService - Initializing Storage Service with AES-GCM encryption
2025-11-10 23:15:54.628 [main] DEBUG e.t.votacion.service.StorageService - Loading encryption key from keystore: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/keystore/keystore.json
2025-11-10 23:15:54.634 [main] DEBUG e.t.votacion.service.StorageService - Keystore loaded - algorithm: AES/GCM/NoPadding, key length: 256 bits
2025-11-10 23:15:54.635 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded and validated successfully
2025-11-10 23:15:54.636 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded successfully from keystore
2025-11-10 23:15:54.637 [main] INFO  e.t.votacion.service.StorageService - Storage directory initialized: /home/ehuetadr/TFG/VotacionBC/backend-spring/data/storage
2025-11-10 23:15:54.637 [main] DEBUG e.t.votacion.service.StorageService - Encryption algorithm: AES/GCM/NoPadding
2025-11-10 23:15:54.638 [main] DEBUG e.t.votacion.service.StorageService - Key length: 256 bits
2025-11-10 23:15:54.638 [main] DEBUG e.t.votacion.service.StorageService - IV length: 12 bytes
2025-11-10 23:15:54.638 [main] DEBUG e.t.votacion.service.StorageService - Tag length: 128 bits
2025-11-10 23:15:54.638 [main] INFO  e.t.votacion.service.StorageService - Automatic cleanup enabled - retention: 30 days
2025-11-10 23:15:54.861 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-10 23:15:55.521 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 88c3e1dd-0472-4574-b2c8-28fc9eda2a71

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-10 23:15:55.530 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-10 23:15:55.841 [main] INFO  e.t.votacion.service.AuthServiceTest - Started AuthServiceTest in 3.503 seconds (process running for 5.07)
2025-11-10 23:15:55.541 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:15:55.678 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: invalid password for user: test.user
2025-11-10 23:15:55.840 [SpringApplicationShutdownHook] INFO  e.t.votacion.service.StorageService - Shutting down Storage Service
2025-11-10 23:15:55.841 [SpringApplicationShutdownHook] DEBUG e.t.votacion.service.StorageService - Master key cleared from memory
2025-11-10 23:18:04.783 [main] INFO  e.t.votacion.service.AuthServiceTest - Starting AuthServiceTest using Java 21.0.8 with PID 1419048 (started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-10 23:18:04.784 [main] DEBUG e.t.votacion.service.AuthServiceTest - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-10 23:18:04.785 [main] INFO  e.t.votacion.service.AuthServiceTest - No active profile set, falling back to 1 default profile: "default"
2025-11-10 23:18:07.297 [main] INFO  es.tfg.votacion.service.AuthService - Initializing Authentication Service (Mock Mode)
2025-11-10 23:18:07.305 [main] DEBUG es.tfg.votacion.service.AuthService - Loading mock users from: src/main/resources/mock/users.json
2025-11-10 23:18:07.331 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: juan.perez (role: Votante (voter), active: true)
2025-11-10 23:18:07.332 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: maria.gonzalez (role: Votante (voter), active: true)
2025-11-10 23:18:07.333 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: admin (role: Administrador (admin), active: true)
2025-11-10 23:18:07.333 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: auditor (role: Auditor (auditor), active: true)
2025-11-10 23:18:07.334 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: carlos.martin (role: Votante (voter), active: true)
2025-11-10 23:18:07.335 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: ana.rodriguez (role: Votante (voter), active: true)
2025-11-10 23:18:07.336 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: pedro.lopez (role: Administrador (admin), active: true)
2025-11-10 23:18:07.337 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: lucia.garcia (role: Votante (voter), active: false)
2025-11-10 23:18:07.341 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: test.user (role: Votante (voter), active: true)
2025-11-10 23:18:07.343 [main] INFO  es.tfg.votacion.service.AuthService - Loaded 9 mock users from src/main/resources/mock/users.json
2025-11-10 23:18:07.351 [main] DEBUG es.tfg.votacion.service.AuthService - JWT signing key initialized with HS256 algorithm
2025-11-10 23:18:07.352 [main] INFO  es.tfg.votacion.service.AuthService - JWT signing key initialized successfully
2025-11-10 23:18:07.354 [main] DEBUG es.tfg.votacion.service.AuthService - JWT issuer: votacion-test
2025-11-10 23:18:07.354 [main] DEBUG es.tfg.votacion.service.AuthService - JWT audience: test-system
2025-11-10 23:18:07.355 [main] DEBUG es.tfg.votacion.service.AuthService - JWT expiration: 3600 seconds
2025-11-10 23:18:07.355 [main] DEBUG es.tfg.votacion.service.AuthService - Allowed roles: [voter, admin, auditor]
2025-11-10 23:18:07.355 [main] WARN  es.tfg.votacion.service.AuthService - Running in MOCK authentication mode - not suitable for production!
2025-11-10 23:18:07.404 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-10 23:18:07.405 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-10 23:18:07.405 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /home/ehuetadr/fabric/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/connection-org1.json
2025-11-10 23:18:07.406 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /home/ehuetadr/TFG/VotacionBC/backend-spring/wallet
2025-11-10 23:18:07.406 [main] DEBUG e.tfg.votacion.service.FabricService - User: appUser
2025-11-10 23:18:07.407 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: electionchannel
2025-11-10 23:18:07.407 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: electioncc
2025-11-10 23:18:07.407 [main] WARN  e.tfg.votacion.service.FabricService - Using MOCK Fabric connection for PoC development
2025-11-10 23:18:07.407 [main] WARN  e.tfg.votacion.service.FabricService - To use real Fabric connection, implement proper Gateway initialization
2025-11-10 23:18:07.407 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-10 23:18:07.443 [main] INFO  e.t.votacion.service.StorageService - Initializing Storage Service with AES-GCM encryption
2025-11-10 23:18:07.443 [main] DEBUG e.t.votacion.service.StorageService - Loading encryption key from keystore: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/keystore/keystore.json
2025-11-10 23:18:07.461 [main] DEBUG e.t.votacion.service.StorageService - Keystore loaded - algorithm: AES/GCM/NoPadding, key length: 256 bits
2025-11-10 23:18:07.462 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded and validated successfully
2025-11-10 23:18:07.462 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded successfully from keystore
2025-11-10 23:18:07.463 [main] INFO  e.t.votacion.service.StorageService - Storage directory initialized: /home/ehuetadr/TFG/VotacionBC/backend-spring/data/storage
2025-11-10 23:18:07.463 [main] DEBUG e.t.votacion.service.StorageService - Encryption algorithm: AES/GCM/NoPadding
2025-11-10 23:18:07.464 [main] DEBUG e.t.votacion.service.StorageService - Key length: 256 bits
2025-11-10 23:18:07.464 [main] DEBUG e.t.votacion.service.StorageService - IV length: 12 bytes
2025-11-10 23:18:07.464 [main] DEBUG e.t.votacion.service.StorageService - Tag length: 128 bits
2025-11-10 23:18:07.464 [main] INFO  e.t.votacion.service.StorageService - Automatic cleanup enabled - retention: 30 days
2025-11-10 23:18:07.832 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-10 23:18:08.350 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 012e5b65-5b92-4d0e-b7f0-43e4716c0d00

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-10 23:18:08.359 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-10 23:18:08.559 [main] INFO  e.t.votacion.service.AuthServiceTest - Started AuthServiceTest in 4.522 seconds (process running for 6.177)
2025-11-10 23:18:09.552 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:18:09.758 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: test.user (role: Votante (voter))
2025-11-10 23:18:09.769 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:18:09.981 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: invalid password for user: test.user
2025-11-10 23:18:10.001 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: non.existent.user
2025-11-10 23:18:10.001 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: user not found: non.existent.user
2025-11-10 23:18:10.025 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: lucia.garcia
2025-11-10 23:18:10.112 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: user is inactive: lucia.garcia
2025-11-10 23:18:10.121 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: username is null or empty
2025-11-10 23:18:10.121 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: password is null or empty
2025-11-10 23:18:10.121 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: username is null or empty
2025-11-10 23:18:10.132 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: username is null or empty
2025-11-10 23:18:10.132 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: password is null or empty
2025-11-10 23:18:10.132 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: username is null or empty
2025-11-10 23:18:10.139 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:18:10.222 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: test.user (role: Votante (voter))
2025-11-10 23:18:10.224 [main] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: test.user
2025-11-10 23:18:10.343 [main] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: test.user (expires: Tue Nov 11 00:18:10 CET 2025)
2025-11-10 23:18:10.368 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:18:10.456 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: test.user (role: Votante (voter))
2025-11-10 23:18:10.457 [main] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: test.user
2025-11-10 23:18:10.459 [main] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: test.user (expires: Tue Nov 11 00:18:10 CET 2025)
2025-11-10 23:18:10.459 [main] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-10 23:18:10.507 [main] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-10 23:18:10.514 [main] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-10 23:18:10.516 [main] WARN  es.tfg.votacion.service.AuthService - JWT validation failed: Malformed protected header JSON: Unable to deserialize: Unexpected character ('' (code 65533 / 0xfffd)): expected a valid value (JSON String, Number, Array, Object or token 'null', 'true' or 'false')
 at [Source: REDACTED (`StreamReadFeature.INCLUDE_SOURCE_IN_LOCATION` disabled); line: 1, column: 1]
2025-11-10 23:18:10.517 [main] WARN  es.tfg.votacion.service.AuthService - JWT validation failed: token is null or empty
2025-11-10 23:18:10.517 [main] WARN  es.tfg.votacion.service.AuthService - JWT validation failed: token is null or empty
2025-11-10 23:18:10.517 [main] WARN  es.tfg.votacion.service.AuthService - JWT validation failed: token is null or empty
2025-11-10 23:18:10.528 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:18:10.613 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: test.user (role: Votante (voter))
2025-11-10 23:18:10.614 [main] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: test.user
2025-11-10 23:18:10.615 [main] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: test.user (expires: Tue Nov 11 00:18:10 CET 2025)
2025-11-10 23:18:10.624 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:18:10.709 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: test.user (role: Votante (voter))
2025-11-10 23:18:10.709 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: admin
2025-11-10 23:18:10.790 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: admin (role: Administrador (admin))
2025-11-10 23:18:10.791 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: auditor
2025-11-10 23:18:10.877 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: auditor (role: Auditor (auditor))
2025-11-10 23:18:10.877 [main] DEBUG es.tfg.votacion.service.AuthService - Role check for user test.user: has role Votante (voter)? true
2025-11-10 23:18:10.877 [main] DEBUG es.tfg.votacion.service.AuthService - Role check for user test.user: has role Administrador (admin)? false
2025-11-10 23:18:10.878 [main] DEBUG es.tfg.votacion.service.AuthService - Role check for user test.user: has role Auditor (auditor)? false
2025-11-10 23:18:10.878 [main] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-11-10 23:18:10.878 [main] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Votante (voter)? false
2025-11-10 23:18:10.878 [main] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Auditor (auditor)? false
2025-11-10 23:18:10.878 [main] DEBUG es.tfg.votacion.service.AuthService - Role check for user auditor: has role Auditor (auditor)? true
2025-11-10 23:18:10.878 [main] DEBUG es.tfg.votacion.service.AuthService - Role check for user auditor: has role Votante (voter)? false
2025-11-10 23:18:10.878 [main] DEBUG es.tfg.votacion.service.AuthService - Role check for user auditor: has role Administrador (admin)? false
2025-11-10 23:18:10.888 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:18:10.975 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: test.user (role: Votante (voter))
2025-11-10 23:18:10.975 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: admin
2025-11-10 23:18:11.069 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: admin (role: Administrador (admin))
2025-11-10 23:18:11.070 [main] DEBUG es.tfg.votacion.service.AuthService - User test.user has role Votante (voter)
2025-11-10 23:18:11.070 [main] DEBUG es.tfg.votacion.service.AuthService - User admin has role Administrador (admin)
2025-11-10 23:18:11.070 [main] DEBUG es.tfg.votacion.service.AuthService - User test.user does not have any of the required roles
2025-11-10 23:18:11.089 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:18:11.180 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: test.user (role: Votante (voter))
2025-11-10 23:18:11.245 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: admin
2025-11-10 23:18:11.333 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: admin (role: Administrador (admin))
2025-11-10 23:18:11.333 [main] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: admin
2025-11-10 23:18:11.334 [main] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: admin (expires: Tue Nov 11 00:18:11 CET 2025)
2025-11-10 23:18:11.334 [main] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-10 23:18:11.335 [main] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-10 23:18:11.344 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: juan.perez
2025-11-10 23:18:11.426 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: juan.perez (role: Votante (voter))
2025-11-10 23:18:11.427 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: maria.gonzalez
2025-11-10 23:18:11.513 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: maria.gonzalez (role: Votante (voter))
2025-11-10 23:18:11.514 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: admin
2025-11-10 23:18:11.597 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: admin (role: Administrador (admin))
2025-11-10 23:18:11.599 [main] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: juan.perez
2025-11-10 23:18:11.602 [main] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: juan.perez (expires: Tue Nov 11 00:18:11 CET 2025)
2025-11-10 23:18:11.603 [main] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: maria.gonzalez
2025-11-10 23:18:11.604 [main] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: maria.gonzalez (expires: Tue Nov 11 00:18:11 CET 2025)
2025-11-10 23:18:11.604 [main] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: admin
2025-11-10 23:18:11.605 [main] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: admin (expires: Tue Nov 11 00:18:11 CET 2025)
2025-11-10 23:18:11.605 [main] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-10 23:18:11.606 [main] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-10 23:18:11.606 [main] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-10 23:18:11.607 [main] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-10 23:18:11.608 [main] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-10 23:18:11.609 [main] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-10 23:18:11.614 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:18:11.696 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: test.user (role: Votante (voter))
2025-11-10 23:18:11.697 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: TEST.USER
2025-11-10 23:18:11.781 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: TEST.USER (role: Votante (voter))
2025-11-10 23:18:11.781 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: Test.User
2025-11-10 23:18:11.863 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: Test.User (role: Votante (voter))
2025-11-10 23:18:11.951 [SpringApplicationShutdownHook] INFO  e.t.votacion.service.StorageService - Shutting down Storage Service
2025-11-10 23:18:11.951 [SpringApplicationShutdownHook] DEBUG e.t.votacion.service.StorageService - Master key cleared from memory
2025-11-10 23:18:57.191 [main] INFO  e.t.v.c.ConfigurationPropertiesTest - Starting ConfigurationPropertiesTest using Java 21.0.8 with PID 1419720 (started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-10 23:18:57.196 [main] DEBUG e.t.v.c.ConfigurationPropertiesTest - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-10 23:18:57.197 [main] INFO  e.t.v.c.ConfigurationPropertiesTest - No active profile set, falling back to 1 default profile: "default"
2025-11-10 23:18:59.263 [main] INFO  es.tfg.votacion.service.AuthService - Initializing Authentication Service (Mock Mode)
2025-11-10 23:18:59.264 [main] DEBUG es.tfg.votacion.service.AuthService - Loading mock users from: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-10 23:18:59.295 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: juan.perez (role: Votante (voter), active: true)
2025-11-10 23:18:59.296 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: maria.gonzalez (role: Votante (voter), active: true)
2025-11-10 23:18:59.297 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: admin (role: Administrador (admin), active: true)
2025-11-10 23:18:59.298 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: auditor (role: Auditor (auditor), active: true)
2025-11-10 23:18:59.298 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: carlos.martin (role: Votante (voter), active: true)
2025-11-10 23:18:59.298 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: ana.rodriguez (role: Votante (voter), active: true)
2025-11-10 23:18:59.299 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: pedro.lopez (role: Administrador (admin), active: true)
2025-11-10 23:18:59.299 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: lucia.garcia (role: Votante (voter), active: false)
2025-11-10 23:18:59.300 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: test.user (role: Votante (voter), active: true)
2025-11-10 23:18:59.300 [main] INFO  es.tfg.votacion.service.AuthService - Loaded 9 mock users from /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-10 23:18:59.306 [main] DEBUG es.tfg.votacion.service.AuthService - JWT signing key initialized with HS256 algorithm
2025-11-10 23:18:59.307 [main] INFO  es.tfg.votacion.service.AuthService - JWT signing key initialized successfully
2025-11-10 23:18:59.308 [main] DEBUG es.tfg.votacion.service.AuthService - JWT issuer: votacion-blockchain-poc
2025-11-10 23:18:59.308 [main] DEBUG es.tfg.votacion.service.AuthService - JWT audience: voting-system
2025-11-10 23:18:59.308 [main] DEBUG es.tfg.votacion.service.AuthService - JWT expiration: 3600 seconds
2025-11-10 23:18:59.309 [main] DEBUG es.tfg.votacion.service.AuthService - Allowed roles: [voter, admin, auditor]
2025-11-10 23:18:59.309 [main] WARN  es.tfg.votacion.service.AuthService - Running in MOCK authentication mode - not suitable for production!
2025-11-10 23:18:59.333 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-10 23:18:59.333 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-10 23:18:59.334 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /home/ehuetadr/fabric/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/connection-org1.json
2025-11-10 23:18:59.334 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /home/ehuetadr/TFG/VotacionBC/backend-spring/wallet
2025-11-10 23:18:59.334 [main] DEBUG e.tfg.votacion.service.FabricService - User: appUser
2025-11-10 23:18:59.334 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: electionchannel
2025-11-10 23:18:59.334 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: electioncc
2025-11-10 23:18:59.334 [main] WARN  e.tfg.votacion.service.FabricService - Using MOCK Fabric connection for PoC development
2025-11-10 23:18:59.335 [main] WARN  e.tfg.votacion.service.FabricService - To use real Fabric connection, implement proper Gateway initialization
2025-11-10 23:18:59.335 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-10 23:18:59.442 [main] INFO  e.t.votacion.service.StorageService - Initializing Storage Service with AES-GCM encryption
2025-11-10 23:18:59.445 [main] DEBUG e.t.votacion.service.StorageService - Loading encryption key from keystore: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/keystore/keystore.json
2025-11-10 23:18:59.464 [main] DEBUG e.t.votacion.service.StorageService - Keystore loaded - algorithm: AES/GCM/NoPadding, key length: 256 bits
2025-11-10 23:18:59.467 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded and validated successfully
2025-11-10 23:18:59.468 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded successfully from keystore
2025-11-10 23:18:59.469 [main] INFO  e.t.votacion.service.StorageService - Storage directory initialized: /home/ehuetadr/TFG/VotacionBC/backend-spring/data/storage
2025-11-10 23:18:59.469 [main] DEBUG e.t.votacion.service.StorageService - Encryption algorithm: AES/GCM/NoPadding
2025-11-10 23:18:59.470 [main] DEBUG e.t.votacion.service.StorageService - Key length: 256 bits
2025-11-10 23:18:59.470 [main] DEBUG e.t.votacion.service.StorageService - IV length: 12 bytes
2025-11-10 23:18:59.470 [main] DEBUG e.t.votacion.service.StorageService - Tag length: 128 bits
2025-11-10 23:18:59.470 [main] INFO  e.t.votacion.service.StorageService - Automatic cleanup enabled - retention: 30 days
2025-11-10 23:19:00.218 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-10 23:19:01.566 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: c714a46c-c2e9-4f33-a8e5-d15ada7e8236

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-10 23:19:01.603 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-10 23:19:01.947 [main] INFO  e.t.v.c.ConfigurationPropertiesTest - Started ConfigurationPropertiesTest in 6.008 seconds (process running for 8.163)
2025-11-10 23:19:03.268 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [es.tfg.votacion.service.FabricServiceTest]: FabricServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-10 23:19:03.291 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration es.tfg.votacion.Application for test class es.tfg.votacion.service.FabricServiceTest
2025-11-10 23:19:03.362 [main] INFO  e.t.v.service.FabricServiceTest - Starting FabricServiceTest using Java 21.0.8 with PID 1419720 (started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-10 23:19:03.362 [main] DEBUG e.t.v.service.FabricServiceTest - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-10 23:19:03.363 [main] INFO  e.t.v.service.FabricServiceTest - No active profile set, falling back to 1 default profile: "default"
2025-11-10 23:19:04.086 [main] INFO  es.tfg.votacion.service.AuthService - Initializing Authentication Service (Mock Mode)
2025-11-10 23:19:04.087 [main] DEBUG es.tfg.votacion.service.AuthService - Loading mock users from: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-10 23:19:04.090 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: juan.perez (role: Votante (voter), active: true)
2025-11-10 23:19:04.092 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: maria.gonzalez (role: Votante (voter), active: true)
2025-11-10 23:19:04.103 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: admin (role: Administrador (admin), active: true)
2025-11-10 23:19:04.104 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: auditor (role: Auditor (auditor), active: true)
2025-11-10 23:19:04.104 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: carlos.martin (role: Votante (voter), active: true)
2025-11-10 23:19:04.104 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: ana.rodriguez (role: Votante (voter), active: true)
2025-11-10 23:19:04.104 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: pedro.lopez (role: Administrador (admin), active: true)
2025-11-10 23:19:04.105 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: lucia.garcia (role: Votante (voter), active: false)
2025-11-10 23:19:04.105 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: test.user (role: Votante (voter), active: true)
2025-11-10 23:19:04.105 [main] INFO  es.tfg.votacion.service.AuthService - Loaded 9 mock users from /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-10 23:19:04.106 [main] DEBUG es.tfg.votacion.service.AuthService - JWT signing key initialized with HS256 algorithm
2025-11-10 23:19:04.106 [main] INFO  es.tfg.votacion.service.AuthService - JWT signing key initialized successfully
2025-11-10 23:19:04.108 [main] DEBUG es.tfg.votacion.service.AuthService - JWT issuer: votacion-blockchain-poc
2025-11-10 23:19:04.108 [main] DEBUG es.tfg.votacion.service.AuthService - JWT audience: voting-system
2025-11-10 23:19:04.109 [main] DEBUG es.tfg.votacion.service.AuthService - JWT expiration: 3600 seconds
2025-11-10 23:19:04.109 [main] DEBUG es.tfg.votacion.service.AuthService - Allowed roles: [voter, admin, auditor]
2025-11-10 23:19:04.109 [main] WARN  es.tfg.votacion.service.AuthService - Running in MOCK authentication mode - not suitable for production!
2025-11-10 23:19:04.132 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-10 23:19:04.132 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-10 23:19:04.138 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /tmp/mock-connection.json
2025-11-10 23:19:04.139 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /tmp/mock-wallet
2025-11-10 23:19:04.139 [main] DEBUG e.tfg.votacion.service.FabricService - User: mockUser
2025-11-10 23:19:04.139 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: mockchannel
2025-11-10 23:19:04.139 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: mockcc
2025-11-10 23:19:04.139 [main] WARN  e.tfg.votacion.service.FabricService - Using MOCK Fabric connection for PoC development
2025-11-10 23:19:04.139 [main] WARN  e.tfg.votacion.service.FabricService - To use real Fabric connection, implement proper Gateway initialization
2025-11-10 23:19:04.140 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-10 23:19:04.181 [main] INFO  e.t.votacion.service.StorageService - Initializing Storage Service with AES-GCM encryption
2025-11-10 23:19:04.181 [main] DEBUG e.t.votacion.service.StorageService - Loading encryption key from keystore: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/keystore/keystore.json
2025-11-10 23:19:04.182 [main] DEBUG e.t.votacion.service.StorageService - Keystore loaded - algorithm: AES/GCM/NoPadding, key length: 256 bits
2025-11-10 23:19:04.183 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded and validated successfully
2025-11-10 23:19:04.184 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded successfully from keystore
2025-11-10 23:19:04.185 [main] INFO  e.t.votacion.service.StorageService - Storage directory initialized: /home/ehuetadr/TFG/VotacionBC/backend-spring/data/storage
2025-11-10 23:19:04.186 [main] DEBUG e.t.votacion.service.StorageService - Encryption algorithm: AES/GCM/NoPadding
2025-11-10 23:19:04.186 [main] DEBUG e.t.votacion.service.StorageService - Key length: 256 bits
2025-11-10 23:19:04.186 [main] DEBUG e.t.votacion.service.StorageService - IV length: 12 bytes
2025-11-10 23:19:04.187 [main] DEBUG e.t.votacion.service.StorageService - Tag length: 128 bits
2025-11-10 23:19:04.187 [main] INFO  e.t.votacion.service.StorageService - Automatic cleanup enabled - retention: 30 days
2025-11-10 23:19:04.332 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-10 23:19:04.478 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 1c4fea5d-8649-4048-8adf-a221d399e9fe

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-10 23:19:04.480 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-10 23:19:04.531 [main] INFO  e.t.v.service.FabricServiceTest - Started FabricServiceTest in 1.223 seconds (process running for 10.747)
2025-11-10 23:19:04.553 [main] DEBUG e.tfg.votacion.service.FabricService - Verifying vote transaction: MOCK-TX-12345
2025-11-10 23:19:04.553 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, using mock verification
2025-11-10 23:19:04.554 [main] DEBUG e.tfg.votacion.service.FabricService - MOCK: Transaction MOCK-TX-12345 verification result: true
2025-11-10 23:19:04.554 [main] DEBUG e.tfg.votacion.service.FabricService - Verifying vote transaction: TX-election-001-67890
2025-11-10 23:19:04.554 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, using mock verification
2025-11-10 23:19:04.554 [main] DEBUG e.tfg.votacion.service.FabricService - MOCK: Transaction TX-election-001-67890 verification result: true
2025-11-10 23:19:04.554 [main] DEBUG e.tfg.votacion.service.FabricService - Verifying vote transaction: INVALID-ID
2025-11-10 23:19:04.554 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, using mock verification
2025-11-10 23:19:04.554 [main] DEBUG e.tfg.votacion.service.FabricService - MOCK: Transaction INVALID-ID verification result: false
2025-11-10 23:19:04.554 [main] DEBUG e.tfg.votacion.service.FabricService - Verifying vote transaction: null
2025-11-10 23:19:04.554 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, using mock verification
2025-11-10 23:19:04.554 [main] DEBUG e.tfg.votacion.service.FabricService - MOCK: Transaction null verification result: false
2025-11-10 23:19:04.564 [main] INFO  e.tfg.votacion.service.FabricService - Emitting vote commitment to blockchain - Election: integration-test-election, Commitment: integration-test-commitment
2025-11-10 23:19:04.565 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock transaction ID
2025-11-10 23:19:04.567 [main] DEBUG e.tfg.votacion.service.FabricService - Verifying vote transaction: MOCK-TX-integration-test-election-1762813144565
2025-11-10 23:19:04.568 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, using mock verification
2025-11-10 23:19:04.568 [main] DEBUG e.tfg.votacion.service.FabricService - MOCK: Transaction MOCK-TX-integration-test-election-1762813144565 verification result: true
2025-11-10 23:19:04.568 [main] DEBUG e.tfg.votacion.service.FabricService - Querying election status: integration-test-election
2025-11-10 23:19:04.569 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning default status
2025-11-10 23:19:04.569 [main] INFO  e.tfg.votacion.service.FabricService - Counting votes from blockchain for election: integration-test-election
2025-11-10 23:19:04.569 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock results
2025-11-10 23:19:04.580 [main] INFO  e.tfg.votacion.service.FabricService - Counting votes from blockchain for election: test-election-003
2025-11-10 23:19:04.581 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock results
2025-11-10 23:19:04.589 [main] INFO  e.tfg.votacion.service.FabricService - Closing election on blockchain: test-election-002
2025-11-10 23:19:04.590 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock result
2025-11-10 23:19:04.613 [main] DEBUG e.tfg.votacion.service.FabricService - Querying election status: test-election-004
2025-11-10 23:19:04.617 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning default status
2025-11-10 23:19:04.633 [main] INFO  e.tfg.votacion.service.FabricService - Emitting vote commitment to blockchain - Election: test-election-001, Commitment: abc123def456
2025-11-10 23:19:04.634 [main] WARN  e.tfg.votacion.service.FabricService - No blockchain connection available, returning mock transaction ID
2025-11-10 23:19:04.649 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [es.tfg.votacion.service.StorageServiceTest]: StorageServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-10 23:19:04.654 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration es.tfg.votacion.Application for test class es.tfg.votacion.service.StorageServiceTest
2025-11-10 23:19:04.724 [main] INFO  e.t.v.service.StorageServiceTest - Starting StorageServiceTest using Java 21.0.8 with PID 1419720 (started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-10 23:19:04.724 [main] DEBUG e.t.v.service.StorageServiceTest - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-10 23:19:04.725 [main] INFO  e.t.v.service.StorageServiceTest - No active profile set, falling back to 1 default profile: "default"
2025-11-10 23:19:05.086 [main] INFO  es.tfg.votacion.service.AuthService - Initializing Authentication Service (Mock Mode)
2025-11-10 23:19:05.087 [main] DEBUG es.tfg.votacion.service.AuthService - Loading mock users from: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-10 23:19:05.088 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: juan.perez (role: Votante (voter), active: true)
2025-11-10 23:19:05.089 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: maria.gonzalez (role: Votante (voter), active: true)
2025-11-10 23:19:05.089 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: admin (role: Administrador (admin), active: true)
2025-11-10 23:19:05.090 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: auditor (role: Auditor (auditor), active: true)
2025-11-10 23:19:05.090 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: carlos.martin (role: Votante (voter), active: true)
2025-11-10 23:19:05.091 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: ana.rodriguez (role: Votante (voter), active: true)
2025-11-10 23:19:05.091 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: pedro.lopez (role: Administrador (admin), active: true)
2025-11-10 23:19:05.091 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: lucia.garcia (role: Votante (voter), active: false)
2025-11-10 23:19:05.092 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: test.user (role: Votante (voter), active: true)
2025-11-10 23:19:05.092 [main] INFO  es.tfg.votacion.service.AuthService - Loaded 9 mock users from /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-10 23:19:05.092 [main] DEBUG es.tfg.votacion.service.AuthService - JWT signing key initialized with HS256 algorithm
2025-11-10 23:19:05.092 [main] INFO  es.tfg.votacion.service.AuthService - JWT signing key initialized successfully
2025-11-10 23:19:05.092 [main] DEBUG es.tfg.votacion.service.AuthService - JWT issuer: votacion-blockchain-poc
2025-11-10 23:19:05.093 [main] DEBUG es.tfg.votacion.service.AuthService - JWT audience: voting-system
2025-11-10 23:19:05.093 [main] DEBUG es.tfg.votacion.service.AuthService - JWT expiration: 3600 seconds
2025-11-10 23:19:05.093 [main] DEBUG es.tfg.votacion.service.AuthService - Allowed roles: [voter, admin, auditor]
2025-11-10 23:19:05.093 [main] WARN  es.tfg.votacion.service.AuthService - Running in MOCK authentication mode - not suitable for production!
2025-11-10 23:19:05.104 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-10 23:19:05.105 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-10 23:19:05.105 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /home/ehuetadr/fabric/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/connection-org1.json
2025-11-10 23:19:05.105 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /home/ehuetadr/TFG/VotacionBC/backend-spring/wallet
2025-11-10 23:19:05.106 [main] DEBUG e.tfg.votacion.service.FabricService - User: appUser
2025-11-10 23:19:05.106 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: electionchannel
2025-11-10 23:19:05.106 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: electioncc
2025-11-10 23:19:05.106 [main] WARN  e.tfg.votacion.service.FabricService - Using MOCK Fabric connection for PoC development
2025-11-10 23:19:05.106 [main] WARN  e.tfg.votacion.service.FabricService - To use real Fabric connection, implement proper Gateway initialization
2025-11-10 23:19:05.106 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-10 23:19:05.120 [main] INFO  e.t.votacion.service.StorageService - Initializing Storage Service with AES-GCM encryption
2025-11-10 23:19:05.121 [main] DEBUG e.t.votacion.service.StorageService - Loading encryption key from keystore: src/main/resources/keystore/keystore.json
2025-11-10 23:19:05.122 [main] DEBUG e.t.votacion.service.StorageService - Keystore loaded - algorithm: AES/GCM/NoPadding, key length: 256 bits
2025-11-10 23:19:05.122 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded and validated successfully
2025-11-10 23:19:05.122 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded successfully from keystore
2025-11-10 23:19:05.122 [main] INFO  e.t.votacion.service.StorageService - Storage directory initialized: /tmp/votacion-test-storage
2025-11-10 23:19:05.123 [main] DEBUG e.t.votacion.service.StorageService - Encryption algorithm: AES/GCM/NoPadding
2025-11-10 23:19:05.123 [main] DEBUG e.t.votacion.service.StorageService - Key length: 256 bits
2025-11-10 23:19:05.123 [main] DEBUG e.t.votacion.service.StorageService - IV length: 12 bytes
2025-11-10 23:19:05.123 [main] DEBUG e.t.votacion.service.StorageService - Tag length: 128 bits
2025-11-10 23:19:05.123 [main] WARN  e.t.votacion.service.StorageService - Automatic cleanup is disabled
2025-11-10 23:19:05.208 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-10 23:19:05.386 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: e58434ec-21f4-453a-96ec-4637a050f9cf

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-10 23:19:05.390 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-10 23:19:05.442 [main] INFO  e.t.v.service.StorageServiceTest - Started StorageServiceTest in 0.775 seconds (process running for 11.658)
2025-11-10 23:19:05.467 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:19:05.468 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:19:05.479 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:19:05.480 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:19:05.488 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762813145467-21ea7b68.enc
2025-11-10 23:19:05.489 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: dd7c481918f1f39609aab9343864e6e37785ecd1a3bdc051cafd0c00647ac8cd
2025-11-10 23:19:05.497 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:19:05.498 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:19:05.500 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:19:05.501 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:19:05.503 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762813145498-9361987e.enc
2025-11-10 23:19:05.504 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: fcaaeb2d9fa5e37575b2715ff334bfc321fd38e36c98aa0c48d05df61150832c
2025-11-10 23:19:05.504 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762813145498-9361987e
2025-11-10 23:19:05.505 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 65 bytes
2025-11-10 23:19:05.505 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 65 bytes
2025-11-10 23:19:05.506 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 37 bytes
2025-11-10 23:19:05.507 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762813145498-9361987e (37 bytes)
2025-11-10 23:19:05.517 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (1024 bytes)
2025-11-10 23:19:05.518 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 1024 bytes
2025-11-10 23:19:05.519 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 1052 bytes (IV: 12, encrypted: 1040)
2025-11-10 23:19:05.520 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 1052 bytes
2025-11-10 23:19:05.525 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762813145518-d0295ab3.enc
2025-11-10 23:19:05.526 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 9e98b4f55c816a26489334aaea186668239b4f98100562246a983de31742295d
2025-11-10 23:19:05.527 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762813145518-d0295ab3
2025-11-10 23:19:05.527 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 1052 bytes
2025-11-10 23:19:05.528 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 1052 bytes
2025-11-10 23:19:05.529 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 1024 bytes
2025-11-10 23:19:05.529 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762813145518-d0295ab3 (1024 bytes)
2025-11-10 23:19:05.536 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (30890 bytes)
2025-11-10 23:19:05.536 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 30890 bytes
2025-11-10 23:19:05.548 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 30918 bytes (IV: 12, encrypted: 30906)
2025-11-10 23:19:05.548 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 30918 bytes
2025-11-10 23:19:05.550 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762813145536-43f1b58b.enc
2025-11-10 23:19:05.555 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: b30d841a3138a676ccf490151a18e07a9db53b49ce95239c744db70ef17ec97a
2025-11-10 23:19:05.555 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762813145536-43f1b58b
2025-11-10 23:19:05.557 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 30918 bytes
2025-11-10 23:19:05.557 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 30918 bytes
2025-11-10 23:19:05.561 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 30890 bytes
2025-11-10 23:19:05.562 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762813145536-43f1b58b (30890 bytes)
2025-11-10 23:19:05.588 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:19:05.589 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:19:05.589 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:19:05.589 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:19:05.591 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762813145588-9a57b998.enc
2025-11-10 23:19:05.591 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: ea80194a784cd64db9db00ff6686095cbac6bb43a50e2a72d82df6e8f1fb81f8
2025-11-10 23:19:05.592 [main] INFO  e.t.votacion.service.StorageService - Deleting blob: BLOB-test-election-001-1762813145588-9a57b998
2025-11-10 23:19:05.602 [main] INFO  e.t.votacion.service.StorageService - Blob deleted securely: BLOB-test-election-001-1762813145588-9a57b998
2025-11-10 23:19:05.618 [main] INFO  e.t.votacion.service.StorageService - Deleting blob: non-existent-blob-id
2025-11-10 23:19:05.619 [main] ERROR e.t.votacion.service.StorageService - Error searching for blob non-existent-blob-id: /tmp/votacion-test-storage
2025-11-10 23:19:05.619 [main] WARN  e.t.votacion.service.StorageService - Blob not found for deletion: non-existent-blob-id
2025-11-10 23:19:05.636 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:19:05.637 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:19:05.637 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:19:05.637 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:19:05.641 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762813145637-2c84bd60.enc
2025-11-10 23:19:05.641 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: bdc0dfb6596eff57ee9507cca2b28980ad26db80460a7371ad9101e50dd61981
2025-11-10 23:19:05.650 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (20 bytes)
2025-11-10 23:19:05.651 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 20 bytes
2025-11-10 23:19:05.651 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 48 bytes (IV: 12, encrypted: 36)
2025-11-10 23:19:05.651 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 48 bytes
2025-11-10 23:19:05.653 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762813145650-03152af3.enc
2025-11-10 23:19:05.653 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 144dc53994d52746df068c7e764b6851f3208e844931bf634ff7452a29ff33bf
2025-11-10 23:19:05.653 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (20 bytes)
2025-11-10 23:19:05.654 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 20 bytes
2025-11-10 23:19:05.654 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 48 bytes (IV: 12, encrypted: 36)
2025-11-10 23:19:05.654 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 48 bytes
2025-11-10 23:19:05.655 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762813145654-ab5e0d43.enc
2025-11-10 23:19:05.655 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: ecb18caf34154abd336b04d6530f2ab83a5b4b34a53fc883791a8d5f49465185
2025-11-10 23:19:05.655 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (20 bytes)
2025-11-10 23:19:05.658 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 20 bytes
2025-11-10 23:19:05.660 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 48 bytes (IV: 12, encrypted: 36)
2025-11-10 23:19:05.660 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 48 bytes
2025-11-10 23:19:05.662 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762813145658-28d2bf23.enc
2025-11-10 23:19:05.662 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: e1ac9faca30b32195c9e26261605d0eb7f0880a52546d72fedd70397b63d7fec
2025-11-10 23:19:05.664 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762813145650-03152af3
2025-11-10 23:19:05.664 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 48 bytes
2025-11-10 23:19:05.665 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 48 bytes
2025-11-10 23:19:05.665 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 20 bytes
2025-11-10 23:19:05.665 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762813145650-03152af3 (20 bytes)
2025-11-10 23:19:05.666 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762813145654-ab5e0d43
2025-11-10 23:19:05.666 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 48 bytes
2025-11-10 23:19:05.666 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 48 bytes
2025-11-10 23:19:05.667 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 20 bytes
2025-11-10 23:19:05.667 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762813145654-ab5e0d43 (20 bytes)
2025-11-10 23:19:05.667 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762813145658-28d2bf23
2025-11-10 23:19:05.667 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 48 bytes
2025-11-10 23:19:05.668 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 48 bytes
2025-11-10 23:19:05.668 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 20 bytes
2025-11-10 23:19:05.668 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762813145658-28d2bf23 (20 bytes)
2025-11-10 23:19:05.695 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: non-existent-blob-id
2025-11-10 23:19:05.696 [main] ERROR e.t.votacion.service.StorageService - Error searching for blob non-existent-blob-id: /tmp/votacion-test-storage
2025-11-10 23:19:05.696 [main] ERROR e.t.votacion.service.StorageService - Blob not found: non-existent-blob-id
2025-11-10 23:19:05.696 [main] ERROR e.t.votacion.service.StorageService - Failed to load and decrypt blob non-existent-blob-id: Blob not found: non-existent-blob-id
java.lang.RuntimeException: Blob not found: non-existent-blob-id
	at es.tfg.votacion.service.StorageService.loadDecrypted(StorageService.java:170)
	at es.tfg.votacion.service.StorageServiceTest.lambda$shouldThrowExceptionForNonExistentBlob$4(StorageServiceTest.java:279)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:53)
	at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:39)
	at org.junit.jupiter.api.Assertions.assertThrows(Assertions.java:3153)
	at es.tfg.votacion.service.StorageServiceTest.shouldThrowExceptionForNonExistentBlob(StorageServiceTest.java:278)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:775)
	at org.junit.platform.commons.support.ReflectionSupport.invokeMethod(ReflectionSupport.java:479)
	at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)
	at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:161)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:152)
	at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:91)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:112)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:94)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)
	at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:93)
	at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:87)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:216)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:212)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:137)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:156)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.executeWithoutCancellationToken(LauncherAdapter.java:60)
	at org.apache.maven.surefire.junitplatform.LauncherAdapter.execute(LauncherAdapter.java:52)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:203)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:168)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:136)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-11-10 23:19:05.714 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:19:05.715 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:19:05.715 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:19:05.715 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:19:05.717 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762813145714-71adde68.enc
2025-11-10 23:19:05.718 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: 781a563ccf2f6f69fa2ded404e36d33cedddbd59b6b465a8aa68a50a35d7ed28
2025-11-10 23:19:05.729 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:19:05.730 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:19:05.730 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:19:05.730 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:19:05.732 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762813145730-de95e2f2.enc
2025-11-10 23:19:05.732 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: d15c4b44501510abfdd99b51e85c877904172903c94687c25524eecc2f6a9fba
2025-11-10 23:19:05.733 [main] INFO  e.t.votacion.service.StorageService - Storing encrypted data for election: test-election-001 (37 bytes)
2025-11-10 23:19:05.733 [main] DEBUG e.t.votacion.service.StorageService - Encrypting data with AES-GCM - input size: 37 bytes
2025-11-10 23:19:05.733 [main] DEBUG e.t.votacion.service.StorageService - Encryption complete - output size: 65 bytes (IV: 12, encrypted: 53)
2025-11-10 23:19:05.733 [main] DEBUG e.t.votacion.service.StorageService - Data encrypted successfully - size: 65 bytes
2025-11-10 23:19:05.734 [main] INFO  e.t.votacion.service.StorageService - Encrypted blob stored successfully: BLOB-test-election-001-1762813145733-a7e8589d.enc
2025-11-10 23:19:05.734 [main] DEBUG e.t.votacion.service.StorageService - Blob SHA-256 hash: d6a3476e948e021ff8391fba59c2a27717d318b2021570647ac8dbbfb6624a88
2025-11-10 23:19:05.735 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762813145730-de95e2f2
2025-11-10 23:19:05.735 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 65 bytes
2025-11-10 23:19:05.736 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 65 bytes
2025-11-10 23:19:05.736 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 37 bytes
2025-11-10 23:19:05.737 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762813145730-de95e2f2 (37 bytes)
2025-11-10 23:19:05.737 [main] INFO  e.t.votacion.service.StorageService - Loading and decrypting blob: BLOB-test-election-001-1762813145733-a7e8589d
2025-11-10 23:19:05.737 [main] DEBUG e.t.votacion.service.StorageService - Encrypted blob loaded - size: 65 bytes
2025-11-10 23:19:05.737 [main] DEBUG e.t.votacion.service.StorageService - Decrypting data with AES-GCM - input size: 65 bytes
2025-11-10 23:19:05.738 [main] DEBUG e.t.votacion.service.StorageService - Decryption complete - output size: 37 bytes
2025-11-10 23:19:05.738 [main] INFO  e.t.votacion.service.StorageService - Blob decrypted successfully: BLOB-test-election-001-1762813145733-a7e8589d (37 bytes)
2025-11-10 23:19:05.755 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [es.tfg.votacion.service.AuthServiceTest]: AuthServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-10 23:19:05.773 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration es.tfg.votacion.Application for test class es.tfg.votacion.service.AuthServiceTest
2025-11-10 23:19:05.831 [main] INFO  e.t.votacion.service.AuthServiceTest - Starting AuthServiceTest using Java 21.0.8 with PID 1419720 (started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-10 23:19:05.832 [main] DEBUG e.t.votacion.service.AuthServiceTest - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-10 23:19:05.832 [main] INFO  e.t.votacion.service.AuthServiceTest - No active profile set, falling back to 1 default profile: "default"
2025-11-10 23:19:06.116 [main] INFO  es.tfg.votacion.service.AuthService - Initializing Authentication Service (Mock Mode)
2025-11-10 23:19:06.116 [main] DEBUG es.tfg.votacion.service.AuthService - Loading mock users from: src/main/resources/mock/users.json
2025-11-10 23:19:06.117 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: juan.perez (role: Votante (voter), active: true)
2025-11-10 23:19:06.117 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: maria.gonzalez (role: Votante (voter), active: true)
2025-11-10 23:19:06.118 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: admin (role: Administrador (admin), active: true)
2025-11-10 23:19:06.118 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: auditor (role: Auditor (auditor), active: true)
2025-11-10 23:19:06.118 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: carlos.martin (role: Votante (voter), active: true)
2025-11-10 23:19:06.118 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: ana.rodriguez (role: Votante (voter), active: true)
2025-11-10 23:19:06.118 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: pedro.lopez (role: Administrador (admin), active: true)
2025-11-10 23:19:06.118 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: lucia.garcia (role: Votante (voter), active: false)
2025-11-10 23:19:06.118 [main] DEBUG es.tfg.votacion.service.AuthService - Loaded user: test.user (role: Votante (voter), active: true)
2025-11-10 23:19:06.119 [main] INFO  es.tfg.votacion.service.AuthService - Loaded 9 mock users from src/main/resources/mock/users.json
2025-11-10 23:19:06.119 [main] DEBUG es.tfg.votacion.service.AuthService - JWT signing key initialized with HS256 algorithm
2025-11-10 23:19:06.119 [main] INFO  es.tfg.votacion.service.AuthService - JWT signing key initialized successfully
2025-11-10 23:19:06.119 [main] DEBUG es.tfg.votacion.service.AuthService - JWT issuer: votacion-test
2025-11-10 23:19:06.119 [main] DEBUG es.tfg.votacion.service.AuthService - JWT audience: test-system
2025-11-10 23:19:06.119 [main] DEBUG es.tfg.votacion.service.AuthService - JWT expiration: 3600 seconds
2025-11-10 23:19:06.119 [main] DEBUG es.tfg.votacion.service.AuthService - Allowed roles: [voter, admin, auditor]
2025-11-10 23:19:06.119 [main] WARN  es.tfg.votacion.service.AuthService - Running in MOCK authentication mode - not suitable for production!
2025-11-10 23:19:06.136 [main] INFO  e.tfg.votacion.service.FabricService - Initializing Hyperledger Fabric Gateway connection
2025-11-10 23:19:06.137 [main] INFO  e.tfg.votacion.service.FabricService - Attempting to connect to Fabric network...
2025-11-10 23:19:06.137 [main] DEBUG e.tfg.votacion.service.FabricService - Connection profile: /home/ehuetadr/fabric/fabric-samples/test-network/organizations/peerOrganizations/org1.example.com/connection-org1.json
2025-11-10 23:19:06.137 [main] DEBUG e.tfg.votacion.service.FabricService - Wallet path: /home/ehuetadr/TFG/VotacionBC/backend-spring/wallet
2025-11-10 23:19:06.137 [main] DEBUG e.tfg.votacion.service.FabricService - User: appUser
2025-11-10 23:19:06.137 [main] DEBUG e.tfg.votacion.service.FabricService - Channel: electionchannel
2025-11-10 23:19:06.137 [main] DEBUG e.tfg.votacion.service.FabricService - Chaincode: electioncc
2025-11-10 23:19:06.137 [main] WARN  e.tfg.votacion.service.FabricService - Using MOCK Fabric connection for PoC development
2025-11-10 23:19:06.138 [main] WARN  e.tfg.votacion.service.FabricService - To use real Fabric connection, implement proper Gateway initialization
2025-11-10 23:19:06.138 [main] INFO  e.tfg.votacion.service.FabricService - Successfully connected to Hyperledger Fabric network
2025-11-10 23:19:06.152 [main] INFO  e.t.votacion.service.StorageService - Initializing Storage Service with AES-GCM encryption
2025-11-10 23:19:06.153 [main] DEBUG e.t.votacion.service.StorageService - Loading encryption key from keystore: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/keystore/keystore.json
2025-11-10 23:19:06.154 [main] DEBUG e.t.votacion.service.StorageService - Keystore loaded - algorithm: AES/GCM/NoPadding, key length: 256 bits
2025-11-10 23:19:06.154 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded and validated successfully
2025-11-10 23:19:06.154 [main] INFO  e.t.votacion.service.StorageService - Encryption key loaded successfully from keystore
2025-11-10 23:19:06.154 [main] INFO  e.t.votacion.service.StorageService - Storage directory initialized: /home/ehuetadr/TFG/VotacionBC/backend-spring/data/storage
2025-11-10 23:19:06.154 [main] DEBUG e.t.votacion.service.StorageService - Encryption algorithm: AES/GCM/NoPadding
2025-11-10 23:19:06.155 [main] DEBUG e.t.votacion.service.StorageService - Key length: 256 bits
2025-11-10 23:19:06.155 [main] DEBUG e.t.votacion.service.StorageService - IV length: 12 bytes
2025-11-10 23:19:06.155 [main] DEBUG e.t.votacion.service.StorageService - Tag length: 128 bits
2025-11-10 23:19:06.155 [main] INFO  e.t.votacion.service.StorageService - Automatic cleanup enabled - retention: 30 days
2025-11-10 23:19:06.220 [main] INFO  e.tfg.votacion.config.SecurityConfig - Configuring CORS for development environment
2025-11-10 23:19:06.327 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: d213dd62-ba11-445f-be6f-6e46d51e1841

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-10 23:19:06.328 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-10 23:19:06.361 [main] INFO  e.t.votacion.service.AuthServiceTest - Started AuthServiceTest in 0.584 seconds (process running for 12.577)
2025-11-10 23:19:06.378 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:19:06.473 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: test.user (role: Votante (voter))
2025-11-10 23:19:06.478 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:19:06.557 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: invalid password for user: test.user
2025-11-10 23:19:06.563 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: non.existent.user
2025-11-10 23:19:06.564 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: user not found: non.existent.user
2025-11-10 23:19:06.569 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: lucia.garcia
2025-11-10 23:19:06.649 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: user is inactive: lucia.garcia
2025-11-10 23:19:06.654 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: username is null or empty
2025-11-10 23:19:06.654 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: password is null or empty
2025-11-10 23:19:06.654 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: username is null or empty
2025-11-10 23:19:06.658 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: username is null or empty
2025-11-10 23:19:06.659 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: password is null or empty
2025-11-10 23:19:06.659 [main] WARN  es.tfg.votacion.service.AuthService - Authentication failed: username is null or empty
2025-11-10 23:19:06.663 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:19:06.744 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: test.user (role: Votante (voter))
2025-11-10 23:19:06.744 [main] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: test.user
2025-11-10 23:19:06.840 [main] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: test.user (expires: Tue Nov 11 00:19:06 CET 2025)
2025-11-10 23:19:06.850 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:19:06.931 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: test.user (role: Votante (voter))
2025-11-10 23:19:06.932 [main] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: test.user
2025-11-10 23:19:06.933 [main] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: test.user (expires: Tue Nov 11 00:19:06 CET 2025)
2025-11-10 23:19:06.933 [main] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-10 23:19:06.968 [main] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: test.user
2025-11-10 23:19:06.972 [main] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-10 23:19:06.973 [main] WARN  es.tfg.votacion.service.AuthService - JWT validation failed: Malformed protected header JSON: Unable to deserialize: Unexpected character ('' (code 65533 / 0xfffd)): expected a valid value (JSON String, Number, Array, Object or token 'null', 'true' or 'false')
 at [Source: REDACTED (`StreamReadFeature.INCLUDE_SOURCE_IN_LOCATION` disabled); line: 1, column: 1]
2025-11-10 23:19:06.974 [main] WARN  es.tfg.votacion.service.AuthService - JWT validation failed: token is null or empty
2025-11-10 23:19:06.974 [main] WARN  es.tfg.votacion.service.AuthService - JWT validation failed: token is null or empty
2025-11-10 23:19:06.975 [main] WARN  es.tfg.votacion.service.AuthService - JWT validation failed: token is null or empty
2025-11-10 23:19:06.979 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:19:07.059 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: test.user (role: Votante (voter))
2025-11-10 23:19:07.059 [main] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: test.user
2025-11-10 23:19:07.061 [main] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: test.user (expires: Tue Nov 11 00:19:07 CET 2025)
2025-11-10 23:19:07.067 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:19:07.146 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: test.user (role: Votante (voter))
2025-11-10 23:19:07.146 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: admin
2025-11-10 23:19:07.228 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: admin (role: Administrador (admin))
2025-11-10 23:19:07.228 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: auditor
2025-11-10 23:19:07.313 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: auditor (role: Auditor (auditor))
2025-11-10 23:19:07.314 [main] DEBUG es.tfg.votacion.service.AuthService - Role check for user test.user: has role Votante (voter)? true
2025-11-10 23:19:07.314 [main] DEBUG es.tfg.votacion.service.AuthService - Role check for user test.user: has role Administrador (admin)? false
2025-11-10 23:19:07.314 [main] DEBUG es.tfg.votacion.service.AuthService - Role check for user test.user: has role Auditor (auditor)? false
2025-11-10 23:19:07.314 [main] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Administrador (admin)? true
2025-11-10 23:19:07.314 [main] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Votante (voter)? false
2025-11-10 23:19:07.314 [main] DEBUG es.tfg.votacion.service.AuthService - Role check for user admin: has role Auditor (auditor)? false
2025-11-10 23:19:07.314 [main] DEBUG es.tfg.votacion.service.AuthService - Role check for user auditor: has role Auditor (auditor)? true
2025-11-10 23:19:07.314 [main] DEBUG es.tfg.votacion.service.AuthService - Role check for user auditor: has role Votante (voter)? false
2025-11-10 23:19:07.314 [main] DEBUG es.tfg.votacion.service.AuthService - Role check for user auditor: has role Administrador (admin)? false
2025-11-10 23:19:07.318 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:19:07.404 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: test.user (role: Votante (voter))
2025-11-10 23:19:07.405 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: admin
2025-11-10 23:19:07.487 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: admin (role: Administrador (admin))
2025-11-10 23:19:07.487 [main] DEBUG es.tfg.votacion.service.AuthService - User test.user has role Votante (voter)
2025-11-10 23:19:07.487 [main] DEBUG es.tfg.votacion.service.AuthService - User admin has role Administrador (admin)
2025-11-10 23:19:07.487 [main] DEBUG es.tfg.votacion.service.AuthService - User test.user does not have any of the required roles
2025-11-10 23:19:07.490 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:19:07.577 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: test.user (role: Votante (voter))
2025-11-10 23:19:07.606 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: admin
2025-11-10 23:19:07.707 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: admin (role: Administrador (admin))
2025-11-10 23:19:07.708 [main] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: admin
2025-11-10 23:19:07.709 [main] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: admin (expires: Tue Nov 11 00:19:07 CET 2025)
2025-11-10 23:19:07.709 [main] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-10 23:19:07.710 [main] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-10 23:19:07.726 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: juan.perez
2025-11-10 23:19:07.832 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: juan.perez (role: Votante (voter))
2025-11-10 23:19:07.832 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: maria.gonzalez
2025-11-10 23:19:07.921 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: maria.gonzalez (role: Votante (voter))
2025-11-10 23:19:07.921 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: admin
2025-11-10 23:19:08.001 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: admin (role: Administrador (admin))
2025-11-10 23:19:08.001 [main] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: juan.perez
2025-11-10 23:19:08.002 [main] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: juan.perez (expires: Tue Nov 11 00:19:08 CET 2025)
2025-11-10 23:19:08.002 [main] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: maria.gonzalez
2025-11-10 23:19:08.002 [main] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: maria.gonzalez (expires: Tue Nov 11 00:19:08 CET 2025)
2025-11-10 23:19:08.002 [main] DEBUG es.tfg.votacion.service.AuthService - Generating JWT token for user: admin
2025-11-10 23:19:08.003 [main] INFO  es.tfg.votacion.service.AuthService - JWT token generated for user: admin (expires: Tue Nov 11 00:19:08 CET 2025)
2025-11-10 23:19:08.003 [main] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-10 23:19:08.004 [main] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: juan.perez
2025-11-10 23:19:08.004 [main] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-10 23:19:08.006 [main] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: maria.gonzalez
2025-11-10 23:19:08.007 [main] DEBUG es.tfg.votacion.service.AuthService - Validating JWT token
2025-11-10 23:19:08.009 [main] DEBUG es.tfg.votacion.service.AuthService - JWT token validated successfully for user: admin
2025-11-10 23:19:08.012 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: test.user
2025-11-10 23:19:08.091 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: test.user (role: Votante (voter))
2025-11-10 23:19:08.091 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: TEST.USER
2025-11-10 23:19:08.174 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: TEST.USER (role: Votante (voter))
2025-11-10 23:19:08.175 [main] DEBUG es.tfg.votacion.service.AuthService - Attempting to authenticate user: Test.User
2025-11-10 23:19:08.262 [main] INFO  es.tfg.votacion.service.AuthService - User authenticated successfully: Test.User (role: Votante (voter))
2025-11-10 23:19:08.271 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [es.tfg.votacion.ApplicationTests]: ApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-11-10 23:19:08.276 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration es.tfg.votacion.Application for test class es.tfg.votacion.ApplicationTests
2025-11-10 23:19:08.311 [SpringApplicationShutdownHook] INFO  e.t.votacion.service.StorageService - Shutting down Storage Service
2025-11-10 23:19:08.311 [SpringApplicationShutdownHook] DEBUG e.t.votacion.service.StorageService - Master key cleared from memory
2025-11-10 23:19:08.316 [SpringApplicationShutdownHook] INFO  e.t.votacion.service.StorageService - Shutting down Storage Service
2025-11-10 23:19:08.317 [SpringApplicationShutdownHook] DEBUG e.t.votacion.service.StorageService - Master key cleared from memory
2025-11-10 23:19:08.320 [SpringApplicationShutdownHook] INFO  e.t.votacion.service.StorageService - Shutting down Storage Service
2025-11-10 23:19:08.321 [SpringApplicationShutdownHook] DEBUG e.t.votacion.service.StorageService - Master key cleared from memory
2025-11-10 23:19:08.322 [SpringApplicationShutdownHook] INFO  e.t.votacion.service.StorageService - Shutting down Storage Service
2025-11-10 23:19:08.322 [SpringApplicationShutdownHook] DEBUG e.t.votacion.service.StorageService - Master key cleared from memory
