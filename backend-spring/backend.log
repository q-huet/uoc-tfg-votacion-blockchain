[INFO] Scanning for projects...
[INFO] 
[INFO] --------------------------< es.tfg:votacion >---------------------------
[INFO] Building application 0.0.1-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] >>> spring-boot:3.5.7:run (default-cli) > test-compile @ votacion >>>
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ votacion ---
[INFO] Copying 1 resource from src/main/resources to target/classes
[INFO] Copying 3 resources from src/main/resources to target/classes
[INFO] 
[INFO] --- compiler:3.14.1:compile (default-compile) @ votacion ---
[INFO] Nothing to compile - all classes are up to date.
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ votacion ---
[INFO] skip non existing resourceDirectory /home/ehuetadr/TFG/VotacionBC/backend-spring/src/test/resources
[INFO] 
[INFO] --- compiler:3.14.1:testCompile (default-testCompile) @ votacion ---
[INFO] Nothing to compile - all classes are up to date.
[INFO] 
[INFO] <<< spring-boot:3.5.7:run (default-cli) < test-compile @ votacion <<<
[INFO] 
[INFO] 
[INFO] --- spring-boot:3.5.7:run (default-cli) @ votacion ---
[INFO] Attaching agents: []

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-11-29 17:07:41.588  INFO 759450 --- [           main] es.tfg.votacion.Application              : Starting Application using Java 21.0.9 with PID 759450 (/home/ehuetadr/TFG/VotacionBC/backend-spring/target/classes started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-29 17:07:41.590 DEBUG 759450 --- [           main] es.tfg.votacion.Application              : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-29 17:07:41.590  INFO 759450 --- [           main] es.tfg.votacion.Application              : No active profile set, falling back to 1 default profile: "default"
2025-11-29 17:07:43.161  INFO 759450 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-29 17:07:43.177  INFO 759450 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-29 17:07:43.178  INFO 759450 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-29 17:07:43.243  INFO 759450 --- [           main] o.a.c.c.C.[.[localhost].[/api/v1]        : Initializing Spring embedded WebApplicationContext
2025-11-29 17:07:43.243  INFO 759450 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1598 ms
2025-11-29 17:07:43.295  INFO 759450 --- [           main] es.tfg.votacion.service.AuthService      : Initializing Authentication Service (Mock Mode)
2025-11-29 17:07:43.295 DEBUG 759450 --- [           main] es.tfg.votacion.service.AuthService      : Loading mock users from: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-29 17:07:43.313 DEBUG 759450 --- [           main] es.tfg.votacion.service.AuthService      : Loaded user: juan.perez (role: Votante (voter), active: true)
2025-11-29 17:07:43.314 DEBUG 759450 --- [           main] es.tfg.votacion.service.AuthService      : Loaded user: maria.gonzalez (role: Votante (voter), active: true)
2025-11-29 17:07:43.314 DEBUG 759450 --- [           main] es.tfg.votacion.service.AuthService      : Loaded user: admin (role: Administrador (admin), active: true)
2025-11-29 17:07:43.314 DEBUG 759450 --- [           main] es.tfg.votacion.service.AuthService      : Loaded user: auditor (role: Auditor (auditor), active: true)
2025-11-29 17:07:43.314 DEBUG 759450 --- [           main] es.tfg.votacion.service.AuthService      : Loaded user: carlos.martin (role: Votante (voter), active: true)
2025-11-29 17:07:43.315 DEBUG 759450 --- [           main] es.tfg.votacion.service.AuthService      : Loaded user: ana.rodriguez (role: Votante (voter), active: true)
2025-11-29 17:07:43.315 DEBUG 759450 --- [           main] es.tfg.votacion.service.AuthService      : Loaded user: pedro.lopez (role: Administrador (admin), active: true)
2025-11-29 17:07:43.315 DEBUG 759450 --- [           main] es.tfg.votacion.service.AuthService      : Loaded user: lucia.garcia (role: Votante (voter), active: false)
2025-11-29 17:07:43.315 DEBUG 759450 --- [           main] es.tfg.votacion.service.AuthService      : Loaded user: test.user (role: Votante (voter), active: true)
2025-11-29 17:07:43.316  INFO 759450 --- [           main] es.tfg.votacion.service.AuthService      : Loaded 9 mock users from /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-29 17:07:43.318 DEBUG 759450 --- [           main] es.tfg.votacion.service.AuthService      : JWT signing key initialized with HS256 algorithm
2025-11-29 17:07:43.319  INFO 759450 --- [           main] es.tfg.votacion.service.AuthService      : JWT signing key initialized successfully
2025-11-29 17:07:43.319 DEBUG 759450 --- [           main] es.tfg.votacion.service.AuthService      : JWT issuer: votacion-blockchain-poc
2025-11-29 17:07:43.319 DEBUG 759450 --- [           main] es.tfg.votacion.service.AuthService      : JWT audience: voting-system
2025-11-29 17:07:43.319 DEBUG 759450 --- [           main] es.tfg.votacion.service.AuthService      : JWT expiration: 3600 seconds
2025-11-29 17:07:43.319 DEBUG 759450 --- [           main] es.tfg.votacion.service.AuthService      : Allowed roles: [voter, admin, auditor]
2025-11-29 17:07:43.320  WARN 759450 --- [           main] es.tfg.votacion.service.AuthService      : Running in MOCK authentication mode - not suitable for production!
2025-11-29 17:07:43.362 DEBUG 759450 --- [           main] e.t.v.config.JwtAuthenticationFilter     : Filter 'jwtAuthenticationFilter' configured for use
2025-11-29 17:07:43.405  INFO 759450 --- [           main] e.tfg.votacion.service.ElectionService   : Initializing ElectionService
2025-11-29 17:07:43.406  INFO 759450 --- [           main] e.tfg.votacion.service.ElectionService   : No existing data found, creating mock elections
2025-11-29 17:07:43.407  INFO 759450 --- [           main] e.tfg.votacion.service.ElectionService   : Created 3 mock elections
2025-11-29 17:07:43.490  INFO 759450 --- [           main] e.tfg.votacion.service.ElectionService   : Data saved to disk
2025-11-29 17:07:43.510  INFO 759450 --- [           main] es.tfg.votacion.service.FabricService    : Initializing Hyperledger Fabric Gateway connection
2025-11-29 17:07:43.510  INFO 759450 --- [           main] es.tfg.votacion.service.FabricService    : Attempting to connect to Fabric network...
2025-11-29 17:07:43.510 DEBUG 759450 --- [           main] es.tfg.votacion.service.FabricService    : Connection profile: /home/ehuetadr/TFG/VotacionBC/fabric/test-network/organizations/peerOrganizations/org1.example.com/connection-org1.json
2025-11-29 17:07:43.511 DEBUG 759450 --- [           main] es.tfg.votacion.service.FabricService    : Wallet path: /home/ehuetadr/TFG/VotacionBC/backend-spring/wallet
2025-11-29 17:07:43.511 DEBUG 759450 --- [           main] es.tfg.votacion.service.FabricService    : User: appUser
2025-11-29 17:07:43.511 DEBUG 759450 --- [           main] es.tfg.votacion.service.FabricService    : Channel: electionchannel
2025-11-29 17:07:43.511 DEBUG 759450 --- [           main] es.tfg.votacion.service.FabricService    : Chaincode: electioncc
2025-11-29 17:07:44.577  INFO 759450 --- [           main] es.tfg.votacion.service.FabricService    : Successfully connected to Fabric network
2025-11-29 17:07:44.577  INFO 759450 --- [           main] es.tfg.votacion.service.FabricService    : Successfully connected to Hyperledger Fabric network
2025-11-29 17:07:44.597  INFO 759450 --- [           main] es.tfg.votacion.service.StorageService   : Initializing Storage Service with AES-GCM encryption
2025-11-29 17:07:44.598 DEBUG 759450 --- [           main] es.tfg.votacion.service.StorageService   : Loading encryption key from keystore: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/keystore/keystore.json
2025-11-29 17:07:44.606 DEBUG 759450 --- [           main] es.tfg.votacion.service.StorageService   : Keystore loaded - algorithm: AES/GCM/NoPadding, key length: 256 bits
2025-11-29 17:07:44.606  INFO 759450 --- [           main] es.tfg.votacion.service.StorageService   : Encryption key loaded and validated successfully
2025-11-29 17:07:44.606  INFO 759450 --- [           main] es.tfg.votacion.service.StorageService   : Encryption key loaded successfully from keystore
2025-11-29 17:07:44.607  INFO 759450 --- [           main] es.tfg.votacion.service.StorageService   : Storage directory initialized: /home/ehuetadr/TFG/VotacionBC/backend-spring/data/storage
2025-11-29 17:07:44.607 DEBUG 759450 --- [           main] es.tfg.votacion.service.StorageService   : Encryption algorithm: AES/GCM/NoPadding
2025-11-29 17:07:44.607 DEBUG 759450 --- [           main] es.tfg.votacion.service.StorageService   : Key length: 256 bits
2025-11-29 17:07:44.607 DEBUG 759450 --- [           main] es.tfg.votacion.service.StorageService   : IV length: 12 bytes
2025-11-29 17:07:44.607 DEBUG 759450 --- [           main] es.tfg.votacion.service.StorageService   : Tag length: 128 bits
2025-11-29 17:07:44.607  INFO 759450 --- [           main] es.tfg.votacion.service.StorageService   : Automatic cleanup enabled - retention: 30 days
2025-11-29 17:07:45.117  WARN 759450 --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 6055e5b7-e653-4b02-bfce-3b03457381a5

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-29 17:07:45.126  INFO 759450 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-29 17:07:45.172  INFO 759450 --- [           main] es.tfg.votacion.config.SecurityConfig    : Configuring Spring Security with JWT authentication
2025-11-29 17:07:45.173  INFO 759450 --- [           main] es.tfg.votacion.config.SecurityConfig    : Configuring CORS for development environment
2025-11-29 17:07:45.213  INFO 759450 --- [           main] es.tfg.votacion.config.SecurityConfig    : Spring Security configured successfully
2025-11-29 17:07:45.636  INFO 759450 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/api/v1'
2025-11-29 17:07:45.644  INFO 759450 --- [           main] es.tfg.votacion.Application              : Started Application in 4.686 seconds (process running for 5.089)
2025-11-29 17:13:01.358  INFO 759450 --- [omcat-handler-0] o.a.c.c.C.[.[localhost].[/api/v1]        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-29 17:13:01.359  INFO 759450 --- [omcat-handler-0] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-29 17:13:01.360  INFO 759450 --- [omcat-handler-0] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-11-29 17:13:01.429 DEBUG 759450 --- [omcat-handler-0] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-29 17:13:01.626 DEBUG 759450 --- [omcat-handler-0] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-29 17:13:01.629 DEBUG 759450 --- [omcat-handler-0] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-29 17:13:01.753  INFO 759450 --- [omcat-handler-0] e.t.v.controller.ElectionController      : Fetching election: election-001
2025-11-29 17:13:01.780 DEBUG 759450 --- [omcat-handler-0] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-29 17:13:01.783 DEBUG 759450 --- [omcat-handler-0] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-29 17:13:07.330 DEBUG 759450 --- [omcat-handler-1] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-29 17:13:07.332 DEBUG 759450 --- [omcat-handler-1] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-29 17:13:07.333 DEBUG 759450 --- [omcat-handler-1] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-29 17:13:07.440  INFO 759450 --- [omcat-handler-1] e.t.v.controller.ElectionController      : Vote submission for election: election-001
2025-11-29 17:13:07.441 DEBUG 759450 --- [omcat-handler-1] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-29 17:13:07.443 DEBUG 759450 --- [omcat-handler-1] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-29 17:13:07.447  INFO 759450 --- [omcat-handler-1] es.tfg.votacion.service.StorageService   : Storing encrypted data for election: election-001 (136 bytes)
2025-11-29 17:13:07.447 DEBUG 759450 --- [omcat-handler-1] es.tfg.votacion.service.StorageService   : Encrypting data with AES-GCM - input size: 136 bytes
2025-11-29 17:13:07.449 DEBUG 759450 --- [omcat-handler-1] es.tfg.votacion.service.StorageService   : Encryption complete - output size: 164 bytes (IV: 12, encrypted: 152)
2025-11-29 17:13:07.450 DEBUG 759450 --- [omcat-handler-1] es.tfg.votacion.service.StorageService   : Data encrypted successfully - size: 164 bytes
2025-11-29 17:13:07.453  INFO 759450 --- [omcat-handler-1] es.tfg.votacion.service.StorageService   : Encrypted blob stored successfully: BLOB-election-001-1764432787447-a62c9118.enc
2025-11-29 17:13:07.454 DEBUG 759450 --- [omcat-handler-1] es.tfg.votacion.service.StorageService   : Blob SHA-256 hash: 535cbb06e4368c139d91428314f624449874c8265aa1bdc971caff0e97641f08
2025-11-29 17:13:07.454  INFO 759450 --- [omcat-handler-1] e.t.v.controller.ElectionController      : Vote encrypted and stored: blobId=BLOB-election-001-1764432787447-a62c9118
2025-11-29 17:13:07.455  INFO 759450 --- [omcat-handler-1] es.tfg.votacion.service.FabricService    : Emitting vote commitment to blockchain - Election: election-001, Commitment: YqHae/6aRp43kG5y6qqnep3rB0jCyNU2JsktgsWz9bg=
2025-11-29 17:13:06.247 ERROR 759450 --- [omcat-handler-1] es.tfg.votacion.service.FabricService    : Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-11-29 17:13:06.248  WARN 759450 --- [omcat-handler-1] es.tfg.votacion.service.FabricService    : Attempt 1/3 for emitVote failed, retrying in 1000ms: Failed to submit vote transaction
2025-11-29 17:13:07.270 ERROR 759450 --- [omcat-handler-1] es.tfg.votacion.service.FabricService    : Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-11-29 17:13:07.270  WARN 759450 --- [omcat-handler-1] es.tfg.votacion.service.FabricService    : Attempt 2/3 for emitVote failed, retrying in 2000ms: Failed to submit vote transaction
2025-11-29 17:13:09.289 ERROR 759450 --- [omcat-handler-1] es.tfg.votacion.service.FabricService    : Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-11-29 17:13:09.290 ERROR 759450 --- [omcat-handler-1] es.tfg.votacion.service.FabricService    : Operation emitVote failed after 3 attempts: Failed to submit vote transaction
2025-11-29 17:13:09.290 ERROR 759450 --- [omcat-handler-1] e.t.v.controller.ElectionController      : Error submitting vote

java.lang.RuntimeException: Operation failed after retries
	at es.tfg.votacion.service.FabricService.executeWithRetry(FabricService.java:403) ~[classes/:na]
	at es.tfg.votacion.service.FabricService.emitVote(FabricService.java:177) ~[classes/:na]
	at es.tfg.votacion.controller.ElectionController.emitVote(ElectionController.java:351) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at es.tfg.votacion.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:96) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319) ~[spring-security-config-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240) ~[spring-security-config-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:329) ~[na:na]
Caused by: java.lang.RuntimeException: Failed to submit vote transaction
	at es.tfg.votacion.service.FabricService.lambda$emitVote$5(FabricService.java:189) ~[classes/:na]
	at es.tfg.votacion.service.FabricService.executeWithRetry(FabricService.java:399) ~[classes/:na]
	... 106 common frames omitted
Caused by: org.hyperledger.fabric.client.EndorseException: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
	at org.hyperledger.fabric.client.GatewayClient.endorse(GatewayClient.java:73) ~[fabric-gateway-1.4.0.jar:na]
	at org.hyperledger.fabric.client.ProposalImpl.endorse(ProposalImpl.java:74) ~[fabric-gateway-1.4.0.jar:na]
	at org.hyperledger.fabric.client.Proposal.endorse(Proposal.java:65) ~[fabric-gateway-1.4.0.jar:na]
	at org.hyperledger.fabric.client.ContractImpl.submitTransaction(ContractImpl.java:47) ~[fabric-gateway-1.4.0.jar:na]
	at es.tfg.votacion.service.FabricService.lambda$emitVote$5(FabricService.java:179) ~[classes/:na]
	... 107 common frames omitted
Caused by: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
	at io.grpc.stub.ClientCalls.toStatusRuntimeException(ClientCalls.java:268) ~[grpc-stub-1.59.0.jar:1.59.0]
	at io.grpc.stub.ClientCalls.getUnchecked(ClientCalls.java:249) ~[grpc-stub-1.59.0.jar:1.59.0]
	at io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:167) ~[grpc-stub-1.59.0.jar:1.59.0]
	at org.hyperledger.fabric.protos.gateway.GatewayGrpc$GatewayBlockingStub.endorse(GatewayGrpc.java:455) ~[fabric-protos-0.2.1.jar:na]
	at org.hyperledger.fabric.client.GatewayClient.endorse(GatewayClient.java:71) ~[fabric-gateway-1.4.0.jar:na]
	... 111 common frames omitted

[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  11:31 min
[INFO] Finished at: 2025-11-29T17:19:09+01:00
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:3.5.7:run (default-cli) on project votacion: Process terminated with exit code: 137 -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException
