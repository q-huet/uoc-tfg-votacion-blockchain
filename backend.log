Starting Spring Boot Backend...
[INFO] Scanning for projects...
[INFO] 
[INFO] --------------------------< es.tfg:votacion >---------------------------
[INFO] Building application 0.0.1-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] --- clean:3.4.1:clean (default-clean) @ votacion ---
[INFO] Deleting /home/ehuetadr/TFG/VotacionBC/backend-spring/target
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ votacion ---
[INFO] Copying 1 resource from src/main/resources to target/classes
[INFO] Copying 3 resources from src/main/resources to target/classes
[INFO] 
[INFO] --- compiler:3.14.1:compile (default-compile) @ votacion ---
[INFO] Recompiling the module because of changed source code.
[INFO] Compiling 33 source files with javac [debug parameters release 21] to target/classes
[INFO] Annotation processing is enabled because one or more processors were found
  on the class path. A future release of javac may disable annotation processing
  unless at least one processor is specified by name (-processor), or a search
  path is specified (--processor-path, --processor-module-path), or annotation
  processing is enabled explicitly (-proc:only, -proc:full).
  Use -Xlint:-options to suppress this message.
  Use -proc:none to disable annotation processing.
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ votacion ---
[INFO] skip non existing resourceDirectory /home/ehuetadr/TFG/VotacionBC/backend-spring/src/test/resources
[INFO] 
[INFO] --- compiler:3.14.1:testCompile (default-testCompile) @ votacion ---
[INFO] Recompiling the module because of changed dependency.
[INFO] Compiling 7 source files with javac [debug parameters release 21] to target/test-classes
[INFO] Annotation processing is enabled because one or more processors were found
  on the class path. A future release of javac may disable annotation processing
  unless at least one processor is specified by name (-processor), or a search
  path is specified (--processor-path, --processor-module-path), or annotation
  processing is enabled explicitly (-proc:only, -proc:full).
  Use -Xlint:-options to suppress this message.
  Use -proc:none to disable annotation processing.
[WARNING] /home/ehuetadr/TFG/VotacionBC/backend-spring/src/test/java/es/tfg/votacion/controller/AuthControllerTest.java:[58,6] org.springframework.boot.test.mock.mockito.MockBean in org.springframework.boot.test.mock.mockito has been deprecated and marked for removal
[WARNING] /home/ehuetadr/TFG/VotacionBC/backend-spring/src/test/java/es/tfg/votacion/controller/AuthControllerTest.java:[58,6] org.springframework.boot.test.mock.mockito.MockBean in org.springframework.boot.test.mock.mockito has been deprecated and marked for removal
[WARNING] /home/ehuetadr/TFG/VotacionBC/backend-spring/src/test/java/es/tfg/votacion/controller/AuthControllerTest.java:[58,6] org.springframework.boot.test.mock.mockito.MockBean in org.springframework.boot.test.mock.mockito has been deprecated and marked for removal
[WARNING] /home/ehuetadr/TFG/VotacionBC/backend-spring/src/test/java/es/tfg/votacion/controller/ElectionControllerTest.java:[62,6] org.springframework.boot.test.mock.mockito.MockBean in org.springframework.boot.test.mock.mockito has been deprecated and marked for removal
[WARNING] /home/ehuetadr/TFG/VotacionBC/backend-spring/src/test/java/es/tfg/votacion/controller/ElectionControllerTest.java:[62,6] org.springframework.boot.test.mock.mockito.MockBean in org.springframework.boot.test.mock.mockito has been deprecated and marked for removal
[WARNING] /home/ehuetadr/TFG/VotacionBC/backend-spring/src/test/java/es/tfg/votacion/controller/ElectionControllerTest.java:[62,6] org.springframework.boot.test.mock.mockito.MockBean in org.springframework.boot.test.mock.mockito has been deprecated and marked for removal
[WARNING] /home/ehuetadr/TFG/VotacionBC/backend-spring/src/test/java/es/tfg/votacion/controller/ElectionControllerTest.java:[65,6] org.springframework.boot.test.mock.mockito.MockBean in org.springframework.boot.test.mock.mockito has been deprecated and marked for removal
[WARNING] /home/ehuetadr/TFG/VotacionBC/backend-spring/src/test/java/es/tfg/votacion/controller/ElectionControllerTest.java:[65,6] org.springframework.boot.test.mock.mockito.MockBean in org.springframework.boot.test.mock.mockito has been deprecated and marked for removal
[WARNING] /home/ehuetadr/TFG/VotacionBC/backend-spring/src/test/java/es/tfg/votacion/controller/ElectionControllerTest.java:[65,6] org.springframework.boot.test.mock.mockito.MockBean in org.springframework.boot.test.mock.mockito has been deprecated and marked for removal
[WARNING] /home/ehuetadr/TFG/VotacionBC/backend-spring/src/test/java/es/tfg/votacion/controller/ElectionControllerTest.java:[68,6] org.springframework.boot.test.mock.mockito.MockBean in org.springframework.boot.test.mock.mockito has been deprecated and marked for removal
[WARNING] /home/ehuetadr/TFG/VotacionBC/backend-spring/src/test/java/es/tfg/votacion/controller/ElectionControllerTest.java:[68,6] org.springframework.boot.test.mock.mockito.MockBean in org.springframework.boot.test.mock.mockito has been deprecated and marked for removal
[WARNING] /home/ehuetadr/TFG/VotacionBC/backend-spring/src/test/java/es/tfg/votacion/controller/ElectionControllerTest.java:[68,6] org.springframework.boot.test.mock.mockito.MockBean in org.springframework.boot.test.mock.mockito has been deprecated and marked for removal
[WARNING] /home/ehuetadr/TFG/VotacionBC/backend-spring/src/test/java/es/tfg/votacion/controller/ElectionControllerTest.java:[71,6] org.springframework.boot.test.mock.mockito.MockBean in org.springframework.boot.test.mock.mockito has been deprecated and marked for removal
[WARNING] /home/ehuetadr/TFG/VotacionBC/backend-spring/src/test/java/es/tfg/votacion/controller/ElectionControllerTest.java:[71,6] org.springframework.boot.test.mock.mockito.MockBean in org.springframework.boot.test.mock.mockito has been deprecated and marked for removal
[WARNING] /home/ehuetadr/TFG/VotacionBC/backend-spring/src/test/java/es/tfg/votacion/controller/ElectionControllerTest.java:[71,6] org.springframework.boot.test.mock.mockito.MockBean in org.springframework.boot.test.mock.mockito has been deprecated and marked for removal
[INFO] 
[INFO] --- surefire:3.5.4:test (default-test) @ votacion ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- jar:3.4.2:jar (default-jar) @ votacion ---
[INFO] Building jar: /home/ehuetadr/TFG/VotacionBC/backend-spring/target/votacion-0.0.1-SNAPSHOT.jar
[INFO] 
[INFO] --- spring-boot:3.5.7:repackage (repackage) @ votacion ---
[INFO] Replacing main artifact /home/ehuetadr/TFG/VotacionBC/backend-spring/target/votacion-0.0.1-SNAPSHOT.jar with repackaged archive, adding nested dependencies in BOOT-INF/.
[INFO] The original artifact has been renamed to /home/ehuetadr/TFG/VotacionBC/backend-spring/target/votacion-0.0.1-SNAPSHOT.jar.original
[INFO] 
[INFO] --- install:3.1.4:install (default-install) @ votacion ---
[INFO] Installing /home/ehuetadr/TFG/VotacionBC/backend-spring/pom.xml to /home/ehuetadr/.m2/repository/es/tfg/votacion/0.0.1-SNAPSHOT/votacion-0.0.1-SNAPSHOT.pom
[INFO] Installing /home/ehuetadr/TFG/VotacionBC/backend-spring/target/votacion-0.0.1-SNAPSHOT.jar to /home/ehuetadr/.m2/repository/es/tfg/votacion/0.0.1-SNAPSHOT/votacion-0.0.1-SNAPSHOT.jar
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  8.977 s
[INFO] Finished at: 2025-11-30T10:09:44+01:00
[INFO] ------------------------------------------------------------------------
[INFO] Scanning for projects...
[INFO] 
[INFO] --------------------------< es.tfg:votacion >---------------------------
[INFO] Building application 0.0.1-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] >>> spring-boot:3.5.7:run (default-cli) > test-compile @ votacion >>>
[INFO] 
[INFO] --- resources:3.3.1:resources (default-resources) @ votacion ---
[INFO] Copying 1 resource from src/main/resources to target/classes
[INFO] Copying 3 resources from src/main/resources to target/classes
[INFO] 
[INFO] --- compiler:3.14.1:compile (default-compile) @ votacion ---
[INFO] Nothing to compile - all classes are up to date.
[INFO] 
[INFO] --- resources:3.3.1:testResources (default-testResources) @ votacion ---
[INFO] skip non existing resourceDirectory /home/ehuetadr/TFG/VotacionBC/backend-spring/src/test/resources
[INFO] 
[INFO] --- compiler:3.14.1:testCompile (default-testCompile) @ votacion ---
[INFO] Nothing to compile - all classes are up to date.
[INFO] 
[INFO] <<< spring-boot:3.5.7:run (default-cli) < test-compile @ votacion <<<
[INFO] 
[INFO] 
[INFO] --- spring-boot:3.5.7:run (default-cli) @ votacion ---
[INFO] Attaching agents: []

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.7)

2025-11-30 10:09:48.023  INFO 1213404 --- [           main] es.tfg.votacion.Application              : Starting Application using Java 21.0.9 with PID 1213404 (/home/ehuetadr/TFG/VotacionBC/backend-spring/target/classes started by ehuetadr in /home/ehuetadr/TFG/VotacionBC/backend-spring)
2025-11-30 10:09:48.025 DEBUG 1213404 --- [           main] es.tfg.votacion.Application              : Running with Spring Boot v3.5.7, Spring v6.2.12
2025-11-30 10:09:48.026  INFO 1213404 --- [           main] es.tfg.votacion.Application              : No active profile set, falling back to 1 default profile: "default"
2025-11-30 10:09:49.182  INFO 1213404 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-11-30 10:09:49.199  INFO 1213404 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-11-30 10:09:49.199  INFO 1213404 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-11-30 10:09:49.257  INFO 1213404 --- [           main] o.a.c.c.C.[.[localhost].[/api/v1]        : Initializing Spring embedded WebApplicationContext
2025-11-30 10:09:49.258  INFO 1213404 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1194 ms
2025-11-30 10:09:49.314  INFO 1213404 --- [           main] es.tfg.votacion.service.AuthService      : Initializing Authentication Service (Mock Mode)
2025-11-30 10:09:49.314 DEBUG 1213404 --- [           main] es.tfg.votacion.service.AuthService      : Loading mock users from: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-30 10:09:49.332 DEBUG 1213404 --- [           main] es.tfg.votacion.service.AuthService      : Loaded user: juan.perez (role: Votante (voter), active: true)
2025-11-30 10:09:49.333 DEBUG 1213404 --- [           main] es.tfg.votacion.service.AuthService      : Loaded user: maria.gonzalez (role: Votante (voter), active: true)
2025-11-30 10:09:49.333 DEBUG 1213404 --- [           main] es.tfg.votacion.service.AuthService      : Loaded user: admin (role: Administrador (admin), active: true)
2025-11-30 10:09:49.333 DEBUG 1213404 --- [           main] es.tfg.votacion.service.AuthService      : Loaded user: auditor (role: Auditor (auditor), active: true)
2025-11-30 10:09:49.333 DEBUG 1213404 --- [           main] es.tfg.votacion.service.AuthService      : Loaded user: carlos.martin (role: Votante (voter), active: true)
2025-11-30 10:09:49.334 DEBUG 1213404 --- [           main] es.tfg.votacion.service.AuthService      : Loaded user: ana.rodriguez (role: Votante (voter), active: true)
2025-11-30 10:09:49.334 DEBUG 1213404 --- [           main] es.tfg.votacion.service.AuthService      : Loaded user: pedro.lopez (role: Administrador (admin), active: true)
2025-11-30 10:09:49.334 DEBUG 1213404 --- [           main] es.tfg.votacion.service.AuthService      : Loaded user: lucia.garcia (role: Votante (voter), active: false)
2025-11-30 10:09:49.335 DEBUG 1213404 --- [           main] es.tfg.votacion.service.AuthService      : Loaded user: test.user (role: Votante (voter), active: true)
2025-11-30 10:09:49.335  INFO 1213404 --- [           main] es.tfg.votacion.service.AuthService      : Loaded 9 mock users from /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/mock/users.json
2025-11-30 10:09:49.338 DEBUG 1213404 --- [           main] es.tfg.votacion.service.AuthService      : JWT signing key initialized with HS256 algorithm
2025-11-30 10:09:49.338  INFO 1213404 --- [           main] es.tfg.votacion.service.AuthService      : JWT signing key initialized successfully
2025-11-30 10:09:49.339 DEBUG 1213404 --- [           main] es.tfg.votacion.service.AuthService      : JWT issuer: votacion-blockchain-poc
2025-11-30 10:09:49.339 DEBUG 1213404 --- [           main] es.tfg.votacion.service.AuthService      : JWT audience: voting-system
2025-11-30 10:09:49.339 DEBUG 1213404 --- [           main] es.tfg.votacion.service.AuthService      : JWT expiration: 3600 seconds
2025-11-30 10:09:49.339 DEBUG 1213404 --- [           main] es.tfg.votacion.service.AuthService      : Allowed roles: [voter, admin, auditor]
2025-11-30 10:09:49.339  WARN 1213404 --- [           main] es.tfg.votacion.service.AuthService      : Running in MOCK authentication mode - not suitable for production!
2025-11-30 10:09:49.378 DEBUG 1213404 --- [           main] e.t.v.config.JwtAuthenticationFilter     : Filter 'jwtAuthenticationFilter' configured for use
2025-11-30 10:09:49.437  INFO 1213404 --- [           main] es.tfg.votacion.service.StorageService   : Initializing Storage Service with AES-GCM encryption
2025-11-30 10:09:49.437 DEBUG 1213404 --- [           main] es.tfg.votacion.service.StorageService   : Loading encryption key from keystore: /home/ehuetadr/TFG/VotacionBC/backend-spring/src/main/resources/keystore/keystore.json
2025-11-30 10:09:49.442 DEBUG 1213404 --- [           main] es.tfg.votacion.service.StorageService   : Keystore loaded - algorithm: AES/GCM/NoPadding, key length: 256 bits
2025-11-30 10:09:49.443  INFO 1213404 --- [           main] es.tfg.votacion.service.StorageService   : Encryption key loaded and validated successfully
2025-11-30 10:09:49.444  INFO 1213404 --- [           main] es.tfg.votacion.service.StorageService   : Encryption key loaded successfully from keystore
2025-11-30 10:09:49.445  INFO 1213404 --- [           main] es.tfg.votacion.service.StorageService   : Storage directory initialized: /home/ehuetadr/TFG/VotacionBC/backend-spring/data/storage
2025-11-30 10:09:49.446 DEBUG 1213404 --- [           main] es.tfg.votacion.service.StorageService   : Encryption algorithm: AES/GCM/NoPadding
2025-11-30 10:09:49.446 DEBUG 1213404 --- [           main] es.tfg.votacion.service.StorageService   : Key length: 256 bits
2025-11-30 10:09:49.446 DEBUG 1213404 --- [           main] es.tfg.votacion.service.StorageService   : IV length: 12 bytes
2025-11-30 10:09:49.446 DEBUG 1213404 --- [           main] es.tfg.votacion.service.StorageService   : Tag length: 128 bits
2025-11-30 10:09:49.446  INFO 1213404 --- [           main] es.tfg.votacion.service.StorageService   : Automatic cleanup enabled - retention: 30 days
2025-11-30 10:09:49.463  INFO 1213404 --- [           main] es.tfg.votacion.service.FabricService    : Initializing Hyperledger Fabric Gateway connection
2025-11-30 10:09:49.464  INFO 1213404 --- [           main] es.tfg.votacion.service.FabricService    : Attempting to connect to Fabric network...
2025-11-30 10:09:49.464 DEBUG 1213404 --- [           main] es.tfg.votacion.service.FabricService    : Connection profile: /home/ehuetadr/TFG/VotacionBC/fabric/test-network/organizations/peerOrganizations/org1.example.com/connection-org1.json
2025-11-30 10:09:49.464 DEBUG 1213404 --- [           main] es.tfg.votacion.service.FabricService    : Wallet path: /home/ehuetadr/TFG/VotacionBC/backend-spring/wallet
2025-11-30 10:09:49.464 DEBUG 1213404 --- [           main] es.tfg.votacion.service.FabricService    : User: appUser
2025-11-30 10:09:49.464 DEBUG 1213404 --- [           main] es.tfg.votacion.service.FabricService    : Channel: electionchannel
2025-11-30 10:09:49.464 DEBUG 1213404 --- [           main] es.tfg.votacion.service.FabricService    : Chaincode: electioncc
2025-11-30 10:09:50.605  INFO 1213404 --- [           main] es.tfg.votacion.service.FabricService    : Successfully connected to Fabric network
2025-11-30 10:09:50.608  INFO 1213404 --- [           main] es.tfg.votacion.service.FabricService    : Successfully connected to Hyperledger Fabric network
2025-11-30 10:09:50.611  INFO 1213404 --- [           main] e.tfg.votacion.service.ElectionService   : Initializing ElectionService
2025-11-30 10:09:50.706  INFO 1213404 --- [           main] e.tfg.votacion.service.ElectionService   : Loaded 4 elections from disk
2025-11-30 10:09:51.126  WARN 1213404 --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: b36717b3-e885-4c69-83a4-36f8465893a5

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-30 10:09:51.133  INFO 1213404 --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-30 10:09:51.178  INFO 1213404 --- [           main] es.tfg.votacion.config.SecurityConfig    : Configuring Spring Security with JWT authentication
2025-11-30 10:09:51.179  INFO 1213404 --- [           main] es.tfg.votacion.config.SecurityConfig    : Configuring CORS for development environment
2025-11-30 10:09:51.212  INFO 1213404 --- [           main] es.tfg.votacion.config.SecurityConfig    : Spring Security configured successfully
2025-11-30 10:09:51.572  INFO 1213404 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/api/v1'
2025-11-30 10:09:51.582  INFO 1213404 --- [           main] es.tfg.votacion.Application              : Started Application in 4.082 seconds (process running for 4.373)
2025-11-30 10:16:31.284  INFO 1213404 --- [omcat-handler-0] o.a.c.c.C.[.[localhost].[/api/v1]        : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-30 10:16:31.284  INFO 1213404 --- [omcat-handler-0] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-11-30 10:16:31.286  INFO 1213404 --- [omcat-handler-0] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2025-11-30 10:16:31.359 DEBUG 1213404 --- [omcat-handler-0] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:16:31.508 DEBUG 1213404 --- [omcat-handler-0] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: admin
2025-11-30 10:16:31.510 DEBUG 1213404 --- [omcat-handler-0] e.t.v.config.JwtAuthenticationFilter     : User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 10:16:31.517 ERROR 1213404 --- [omcat-handler-0] e.t.v.config.JwtAccessDeniedHandler      : Access denied to: /api/v1/elections/election-f9e4da2a/vote - Access Denied
2025-11-30 10:16:37.790 DEBUG 1213404 --- [omcat-handler-1] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:16:37.792 DEBUG 1213404 --- [omcat-handler-1] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: admin
2025-11-30 10:16:37.792 DEBUG 1213404 --- [omcat-handler-1] e.t.v.config.JwtAuthenticationFilter     : User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 10:16:37.793 ERROR 1213404 --- [omcat-handler-1] e.t.v.config.JwtAccessDeniedHandler      : Access denied to: /api/v1/elections/election-f9e4da2a/vote - Access Denied
2025-11-30 10:16:41.357 DEBUG 1213404 --- [omcat-handler-2] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:16:41.359 DEBUG 1213404 --- [omcat-handler-2] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: admin
2025-11-30 10:16:41.360 DEBUG 1213404 --- [omcat-handler-2] e.t.v.config.JwtAuthenticationFilter     : User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 10:16:41.403  INFO 1213404 --- [omcat-handler-2] e.t.v.controller.ElectionController      : Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:16:41.403 DEBUG 1213404 --- [omcat-handler-2] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:16:41.405 DEBUG 1213404 --- [omcat-handler-2] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: admin
2025-11-30 10:16:41.408  INFO 1213404 --- [omcat-handler-2] e.t.v.controller.ElectionController      : Returning 2 active elections
2025-11-30 10:16:44.322 DEBUG 1213404 --- [omcat-handler-3] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:16:44.323 DEBUG 1213404 --- [omcat-handler-3] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: admin
2025-11-30 10:16:44.323 DEBUG 1213404 --- [omcat-handler-3] e.t.v.config.JwtAuthenticationFilter     : User 'admin' authenticated successfully with role 'Administrador (admin)'
2025-11-30 10:16:44.326  INFO 1213404 --- [omcat-handler-3] e.t.votacion.controller.AuthController   : User logged out: admin from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:18:48.045  INFO 1213404 --- [omcat-handler-5] e.t.votacion.controller.AuthController   : Login attempt for user: juan.perez from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:18:48.046 DEBUG 1213404 --- [omcat-handler-5] es.tfg.votacion.service.AuthService      : Attempting to authenticate user: juan.perez
2025-11-30 10:18:48.164  INFO 1213404 --- [omcat-handler-5] es.tfg.votacion.service.AuthService      : User authenticated successfully: juan.perez (role: Votante (voter))
2025-11-30 10:18:48.165 DEBUG 1213404 --- [omcat-handler-5] es.tfg.votacion.service.AuthService      : Generating JWT token for user: juan.perez
2025-11-30 10:18:48.187  INFO 1213404 --- [omcat-handler-5] es.tfg.votacion.service.AuthService      : JWT token generated for user: juan.perez (expires: Sun Nov 30 11:18:48 CET 2025)
2025-11-30 10:18:48.188  INFO 1213404 --- [omcat-handler-5] e.t.votacion.controller.AuthController   : User authenticated successfully: juan.perez (role: Votante)
2025-11-30 10:18:48.249 DEBUG 1213404 --- [omcat-handler-6] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:18:48.250 DEBUG 1213404 --- [omcat-handler-6] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:18:48.251 DEBUG 1213404 --- [omcat-handler-6] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:18:48.252  INFO 1213404 --- [omcat-handler-6] e.t.v.controller.ElectionController      : Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:18:48.253 DEBUG 1213404 --- [omcat-handler-6] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:18:48.264 DEBUG 1213404 --- [omcat-handler-6] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:18:48.265  INFO 1213404 --- [omcat-handler-6] e.t.v.controller.ElectionController      : Returning 2 active elections
2025-11-30 10:19:07.889 DEBUG 1213404 --- [omcat-handler-7] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:19:07.891 DEBUG 1213404 --- [omcat-handler-7] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:19:07.891 DEBUG 1213404 --- [omcat-handler-7] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:19:07.894  INFO 1213404 --- [omcat-handler-7] e.t.v.controller.ElectionController      : Fetching election: election-f9e4da2a
2025-11-30 10:19:07.896 DEBUG 1213404 --- [omcat-handler-7] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:19:07.905 DEBUG 1213404 --- [omcat-handler-7] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:19:16.153 DEBUG 1213404 --- [omcat-handler-8] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:19:16.154 DEBUG 1213404 --- [omcat-handler-8] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:19:16.155 DEBUG 1213404 --- [omcat-handler-8] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:19:16.171  INFO 1213404 --- [omcat-handler-8] e.t.v.controller.ElectionController      : Vote submission for election: election-f9e4da2a
2025-11-30 10:19:16.171 DEBUG 1213404 --- [omcat-handler-8] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:19:16.173 DEBUG 1213404 --- [omcat-handler-8] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:19:16.177  INFO 1213404 --- [omcat-handler-8] es.tfg.votacion.service.StorageService   : Storing encrypted data for election: election-f9e4da2a (142 bytes)
2025-11-30 10:19:16.178 DEBUG 1213404 --- [omcat-handler-8] es.tfg.votacion.service.StorageService   : Encrypting data with AES-GCM - input size: 142 bytes
2025-11-30 10:19:16.180 DEBUG 1213404 --- [omcat-handler-8] es.tfg.votacion.service.StorageService   : Encryption complete - output size: 170 bytes (IV: 12, encrypted: 158)
2025-11-30 10:19:16.191 DEBUG 1213404 --- [omcat-handler-8] es.tfg.votacion.service.StorageService   : Data encrypted successfully - size: 170 bytes
2025-11-30 10:19:16.193  INFO 1213404 --- [omcat-handler-8] es.tfg.votacion.service.StorageService   : Encrypted blob stored successfully: BLOB-election-f9e4da2a-1764494356177-4086e95a.enc
2025-11-30 10:19:16.194 DEBUG 1213404 --- [omcat-handler-8] es.tfg.votacion.service.StorageService   : Blob SHA-256 hash: f2ea85b349ca7f9da560d3a5685b6f1a2e465e632d5e5b9f8aaa6477df2d6c2f
2025-11-30 10:19:16.194  INFO 1213404 --- [omcat-handler-8] e.t.v.controller.ElectionController      : Vote encrypted and stored: blobId=BLOB-election-f9e4da2a-1764494356177-4086e95a
2025-11-30 10:19:16.194  INFO 1213404 --- [omcat-handler-8] es.tfg.votacion.service.FabricService    : Emitting vote commitment to blockchain - Election: election-f9e4da2a, Commitment: FSNamdaBCECVdgT1Ofno2f7qVNyCPdQlpIZDoDLnOCk=
2025-11-30 10:19:19.228  INFO 1213404 --- [omcat-handler-8] es.tfg.votacion.service.FabricService    : Vote emitted successfully. TX-ID: 1c5df6e35e034548b9bc71ce310446a59127a0a232ea00c4ddec60b96d90d0f1
2025-11-30 10:19:19.228  INFO 1213404 --- [omcat-handler-8] e.t.v.controller.ElectionController      : Vote registered in blockchain: txId=1c5df6e35e034548b9bc71ce310446a59127a0a232ea00c4ddec60b96d90d0f1
2025-11-30 10:19:19.229  INFO 1213404 --- [omcat-handler-8] e.tfg.votacion.service.ElectionService   : Vote registered: electionId=election-f9e4da2a, userId=user_juan.perez_001, optionId=opt-1
2025-11-30 10:19:19.248  INFO 1213404 --- [omcat-handler-8] e.tfg.votacion.service.ElectionService   : Data saved to disk
2025-11-30 10:19:19.254  INFO 1213404 --- [omcat-handler-8] e.t.v.controller.ElectionController      : Vote processed successfully for user: juan.perez in election: election-f9e4da2a
2025-11-30 10:19:20.632 DEBUG 1213404 --- [omcat-handler-9] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:19:20.633 DEBUG 1213404 --- [omcat-handler-9] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:19:20.634 DEBUG 1213404 --- [omcat-handler-9] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:19:20.639  INFO 1213404 --- [omcat-handler-9] e.t.v.controller.ElectionController      : Fetching election: election-f9e4da2a
2025-11-30 10:19:20.641 DEBUG 1213404 --- [omcat-handler-9] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:19:20.643 DEBUG 1213404 --- [omcat-handler-9] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:24:37.840 DEBUG 1213404 --- [mcat-handler-11] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:24:37.843 DEBUG 1213404 --- [mcat-handler-11] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:24:37.843 DEBUG 1213404 --- [mcat-handler-11] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:24:37.844  INFO 1213404 --- [mcat-handler-11] e.t.v.controller.ElectionController      : Fetching election: election-f9e4da2a
2025-11-30 10:24:37.845 DEBUG 1213404 --- [mcat-handler-11] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:24:37.847 DEBUG 1213404 --- [mcat-handler-11] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:24:41.646 DEBUG 1213404 --- [mcat-handler-12] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:24:41.650 DEBUG 1213404 --- [mcat-handler-12] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:24:41.651 DEBUG 1213404 --- [mcat-handler-12] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:24:41.653  INFO 1213404 --- [mcat-handler-12] e.t.v.controller.ElectionController      : Fetching election: election-f9e4da2a
2025-11-30 10:24:41.653 DEBUG 1213404 --- [mcat-handler-12] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:24:41.654 DEBUG 1213404 --- [mcat-handler-12] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:25:11.006 DEBUG 1213404 --- [mcat-handler-13] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:25:11.007 DEBUG 1213404 --- [mcat-handler-13] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:25:11.009 DEBUG 1213404 --- [mcat-handler-13] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:25:11.016  INFO 1213404 --- [mcat-handler-13] e.t.v.controller.ElectionController      : Fetching election: election-f9e4da2a
2025-11-30 10:25:11.017 DEBUG 1213404 --- [mcat-handler-13] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:25:11.023 DEBUG 1213404 --- [mcat-handler-13] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:26:25.712 DEBUG 1213404 --- [mcat-handler-15] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:26:25.715 DEBUG 1213404 --- [mcat-handler-15] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:26:25.715 DEBUG 1213404 --- [mcat-handler-15] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:26:25.717  INFO 1213404 --- [mcat-handler-15] e.t.v.controller.ElectionController      : Fetching election: election-f9e4da2a
2025-11-30 10:26:25.717 DEBUG 1213404 --- [mcat-handler-15] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:26:25.719 DEBUG 1213404 --- [mcat-handler-15] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:26:31.430 DEBUG 1213404 --- [mcat-handler-16] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:26:31.432 DEBUG 1213404 --- [mcat-handler-16] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:26:31.433 DEBUG 1213404 --- [mcat-handler-16] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:26:31.435  INFO 1213404 --- [mcat-handler-16] e.t.v.controller.ElectionController      : Fetching election: election-f9e4da2a
2025-11-30 10:26:31.436 DEBUG 1213404 --- [mcat-handler-16] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:26:31.437 DEBUG 1213404 --- [mcat-handler-16] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:26:33.527 DEBUG 1213404 --- [mcat-handler-17] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:26:33.530 DEBUG 1213404 --- [mcat-handler-17] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:26:33.530 DEBUG 1213404 --- [mcat-handler-17] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:26:33.532  INFO 1213404 --- [mcat-handler-17] e.t.v.controller.ElectionController      : Fetching election: election-f9e4da2a
2025-11-30 10:26:33.532 DEBUG 1213404 --- [mcat-handler-17] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:26:33.534 DEBUG 1213404 --- [mcat-handler-17] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:26:35.449 DEBUG 1213404 --- [mcat-handler-18] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:26:35.450 DEBUG 1213404 --- [mcat-handler-18] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:26:35.451 DEBUG 1213404 --- [mcat-handler-18] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:26:35.452  INFO 1213404 --- [mcat-handler-18] e.t.v.controller.ElectionController      : Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:26:35.453 DEBUG 1213404 --- [mcat-handler-18] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:26:35.454 DEBUG 1213404 --- [mcat-handler-18] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:26:35.455  INFO 1213404 --- [mcat-handler-18] e.t.v.controller.ElectionController      : Returning 2 active elections
2025-11-30 10:28:59.030 DEBUG 1213404 --- [mcat-handler-20] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:28:59.032 DEBUG 1213404 --- [mcat-handler-20] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:28:59.032 DEBUG 1213404 --- [mcat-handler-20] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:28:59.034  INFO 1213404 --- [mcat-handler-20] e.t.v.controller.ElectionController      : Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:28:59.034 DEBUG 1213404 --- [mcat-handler-20] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:28:59.036 DEBUG 1213404 --- [mcat-handler-20] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:28:59.037  INFO 1213404 --- [mcat-handler-20] e.t.v.controller.ElectionController      : Returning 2 active elections
2025-11-30 10:29:57.528 DEBUG 1213404 --- [mcat-handler-21] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:29:57.529 DEBUG 1213404 --- [mcat-handler-21] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:29:57.530 DEBUG 1213404 --- [mcat-handler-21] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:29:57.531  INFO 1213404 --- [mcat-handler-21] e.t.v.controller.ElectionController      : Fetching election: election-001
2025-11-30 10:29:57.531 DEBUG 1213404 --- [mcat-handler-21] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:29:57.533 DEBUG 1213404 --- [mcat-handler-21] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:30:03.303 DEBUG 1213404 --- [mcat-handler-22] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:30:03.305 DEBUG 1213404 --- [mcat-handler-22] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:30:03.305 DEBUG 1213404 --- [mcat-handler-22] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:30:03.308  INFO 1213404 --- [mcat-handler-22] e.t.v.controller.ElectionController      : Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:30:03.308 DEBUG 1213404 --- [mcat-handler-22] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:30:03.310 DEBUG 1213404 --- [mcat-handler-22] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:30:03.310  INFO 1213404 --- [mcat-handler-22] e.t.v.controller.ElectionController      : Returning 2 active elections
2025-11-30 10:30:14.068 DEBUG 1213404 --- [mcat-handler-23] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:30:14.069 DEBUG 1213404 --- [mcat-handler-23] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:30:14.070 DEBUG 1213404 --- [mcat-handler-23] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:30:14.071  INFO 1213404 --- [mcat-handler-23] e.t.v.controller.ElectionController      : Fetching election: election-001
2025-11-30 10:30:14.071 DEBUG 1213404 --- [mcat-handler-23] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:30:14.072 DEBUG 1213404 --- [mcat-handler-23] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:30:36.162 DEBUG 1213404 --- [mcat-handler-24] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:30:36.164 DEBUG 1213404 --- [mcat-handler-24] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:30:36.165 DEBUG 1213404 --- [mcat-handler-24] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:30:36.167  INFO 1213404 --- [mcat-handler-24] e.t.v.controller.ElectionController      : Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:30:36.167 DEBUG 1213404 --- [mcat-handler-24] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:30:36.169 DEBUG 1213404 --- [mcat-handler-24] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:30:36.169  INFO 1213404 --- [mcat-handler-24] e.t.v.controller.ElectionController      : Returning 2 active elections
2025-11-30 10:30:52.529 DEBUG 1213404 --- [mcat-handler-25] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:30:52.530 DEBUG 1213404 --- [mcat-handler-25] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:30:52.530 DEBUG 1213404 --- [mcat-handler-25] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:30:52.532  INFO 1213404 --- [mcat-handler-25] e.t.votacion.controller.AuthController   : User logged out: juan.perez from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:39:11.928  INFO 1213404 --- [mcat-handler-27] e.t.votacion.controller.AuthController   : Login attempt for user: juan.perez from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:39:11.929 DEBUG 1213404 --- [mcat-handler-27] es.tfg.votacion.service.AuthService      : Attempting to authenticate user: juan.perez
2025-11-30 10:39:12.027  INFO 1213404 --- [mcat-handler-27] es.tfg.votacion.service.AuthService      : User authenticated successfully: juan.perez (role: Votante (voter))
2025-11-30 10:39:12.028 DEBUG 1213404 --- [mcat-handler-27] es.tfg.votacion.service.AuthService      : Generating JWT token for user: juan.perez
2025-11-30 10:39:12.028  INFO 1213404 --- [mcat-handler-27] es.tfg.votacion.service.AuthService      : JWT token generated for user: juan.perez (expires: Sun Nov 30 11:39:12 CET 2025)
2025-11-30 10:39:12.029  INFO 1213404 --- [mcat-handler-27] e.t.votacion.controller.AuthController   : User authenticated successfully: juan.perez (role: Votante)
2025-11-30 10:39:12.093 DEBUG 1213404 --- [mcat-handler-28] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:39:12.096 DEBUG 1213404 --- [mcat-handler-28] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:39:12.096 DEBUG 1213404 --- [mcat-handler-28] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:39:12.097  INFO 1213404 --- [mcat-handler-28] e.t.v.controller.ElectionController      : Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:39:12.097 DEBUG 1213404 --- [mcat-handler-28] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:39:12.098 DEBUG 1213404 --- [mcat-handler-28] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:39:12.099  INFO 1213404 --- [mcat-handler-28] e.t.v.controller.ElectionController      : Returning 2 active elections
2025-11-30 10:39:46.424 DEBUG 1213404 --- [mcat-handler-29] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:39:46.426 DEBUG 1213404 --- [mcat-handler-29] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:39:46.426 DEBUG 1213404 --- [mcat-handler-29] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:39:46.427  INFO 1213404 --- [mcat-handler-29] e.t.v.controller.ElectionController      : Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:39:46.428 DEBUG 1213404 --- [mcat-handler-29] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:39:46.429 DEBUG 1213404 --- [mcat-handler-29] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:39:46.429  INFO 1213404 --- [mcat-handler-29] e.t.v.controller.ElectionController      : Returning 2 active elections
2025-11-30 10:39:50.608 DEBUG 1213404 --- [mcat-handler-30] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:39:50.610 DEBUG 1213404 --- [mcat-handler-30] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:39:50.610 DEBUG 1213404 --- [mcat-handler-30] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:39:50.612  INFO 1213404 --- [mcat-handler-30] e.t.v.controller.ElectionController      : Fetching election: election-001
2025-11-30 10:39:50.612 DEBUG 1213404 --- [mcat-handler-30] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:39:50.613 DEBUG 1213404 --- [mcat-handler-30] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:39:56.410 DEBUG 1213404 --- [mcat-handler-32] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:39:56.412 DEBUG 1213404 --- [mcat-handler-32] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:39:56.412 DEBUG 1213404 --- [mcat-handler-32] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:39:56.417  INFO 1213404 --- [mcat-handler-32] e.t.v.controller.ElectionController      : Vote submission for election: election-001
2025-11-30 10:39:56.418 DEBUG 1213404 --- [mcat-handler-32] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:39:56.419 DEBUG 1213404 --- [mcat-handler-32] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:39:56.419  INFO 1213404 --- [mcat-handler-32] es.tfg.votacion.service.StorageService   : Storing encrypted data for election: election-001 (136 bytes)
2025-11-30 10:39:56.419 DEBUG 1213404 --- [mcat-handler-32] es.tfg.votacion.service.StorageService   : Encrypting data with AES-GCM - input size: 136 bytes
2025-11-30 10:39:56.421 DEBUG 1213404 --- [mcat-handler-32] es.tfg.votacion.service.StorageService   : Encryption complete - output size: 164 bytes (IV: 12, encrypted: 152)
2025-11-30 10:39:56.421 DEBUG 1213404 --- [mcat-handler-32] es.tfg.votacion.service.StorageService   : Data encrypted successfully - size: 164 bytes
2025-11-30 10:39:56.422  INFO 1213404 --- [mcat-handler-32] es.tfg.votacion.service.StorageService   : Encrypted blob stored successfully: BLOB-election-001-1764495596419-77c5467b.enc
2025-11-30 10:39:56.422 DEBUG 1213404 --- [mcat-handler-32] es.tfg.votacion.service.StorageService   : Blob SHA-256 hash: 86e6aaccfeb00249a960575b5b1839379f5b7c0018f914876c122a7af8a8a46a
2025-11-30 10:39:56.422  INFO 1213404 --- [mcat-handler-32] e.t.v.controller.ElectionController      : Vote encrypted and stored: blobId=BLOB-election-001-1764495596419-77c5467b
2025-11-30 10:39:56.422  INFO 1213404 --- [mcat-handler-32] es.tfg.votacion.service.FabricService    : Emitting vote commitment to blockchain - Election: election-001, Commitment: 7Yy65wlAUXVx4VWRS0nkmzG30dIjDqRMoOexVn6T/dM=
2025-11-30 10:39:56.902 ERROR 1213404 --- [mcat-handler-32] es.tfg.votacion.service.FabricService    : Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-11-30 10:39:56.902  WARN 1213404 --- [mcat-handler-32] es.tfg.votacion.service.FabricService    : Attempt 1/3 for emitVote failed, retrying in 1000ms: Failed to submit vote transaction
2025-11-30 10:39:57.923 ERROR 1213404 --- [mcat-handler-32] es.tfg.votacion.service.FabricService    : Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-11-30 10:39:57.923  WARN 1213404 --- [mcat-handler-32] es.tfg.votacion.service.FabricService    : Attempt 2/3 for emitVote failed, retrying in 2000ms: Failed to submit vote transaction
2025-11-30 10:39:59.940 ERROR 1213404 --- [mcat-handler-32] es.tfg.votacion.service.FabricService    : Failed to emit vote to blockchain: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
2025-11-30 10:39:59.940 ERROR 1213404 --- [mcat-handler-32] es.tfg.votacion.service.FabricService    : Operation emitVote failed after 3 attempts: Failed to submit vote transaction
2025-11-30 10:39:59.941 ERROR 1213404 --- [mcat-handler-32] e.t.v.controller.ElectionController      : Error submitting vote

java.lang.RuntimeException: Operation failed after retries
	at es.tfg.votacion.service.FabricService.executeWithRetry(FabricService.java:442) ~[classes/:na]
	at es.tfg.votacion.service.FabricService.emitVote(FabricService.java:206) ~[classes/:na]
	at es.tfg.votacion.controller.ElectionController.emitVote(ElectionController.java:351) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.48.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at es.tfg.votacion.config.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:96) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319) ~[spring-security-config-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267) ~[spring-webmvc-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240) ~[spring-security-config-6.5.6.jar:6.5.6]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.12.jar:6.2.12]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.12.jar:6.2.12]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:138) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:113) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1774) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.48.jar:10.1.48]
	at java.base/java.lang.VirtualThread.run(VirtualThread.java:329) ~[na:na]
Caused by: java.lang.RuntimeException: Failed to submit vote transaction
	at es.tfg.votacion.service.FabricService.lambda$emitVote$6(FabricService.java:218) ~[classes/:na]
	at es.tfg.votacion.service.FabricService.executeWithRetry(FabricService.java:428) ~[classes/:na]
	... 106 common frames omitted
Caused by: org.hyperledger.fabric.client.EndorseException: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
	at org.hyperledger.fabric.client.GatewayClient.endorse(GatewayClient.java:73) ~[fabric-gateway-1.4.0.jar:na]
	at org.hyperledger.fabric.client.ProposalImpl.endorse(ProposalImpl.java:74) ~[fabric-gateway-1.4.0.jar:na]
	at org.hyperledger.fabric.client.Proposal.endorse(Proposal.java:65) ~[fabric-gateway-1.4.0.jar:na]
	at org.hyperledger.fabric.client.ContractImpl.submitTransaction(ContractImpl.java:47) ~[fabric-gateway-1.4.0.jar:na]
	at es.tfg.votacion.service.FabricService.lambda$emitVote$6(FabricService.java:208) ~[classes/:na]
	... 107 common frames omitted
Caused by: io.grpc.StatusRuntimeException: ABORTED: failed to endorse transaction, see attached details for more info
	at io.grpc.stub.ClientCalls.toStatusRuntimeException(ClientCalls.java:268) ~[grpc-stub-1.59.0.jar:1.59.0]
	at io.grpc.stub.ClientCalls.getUnchecked(ClientCalls.java:249) ~[grpc-stub-1.59.0.jar:1.59.0]
	at io.grpc.stub.ClientCalls.blockingUnaryCall(ClientCalls.java:167) ~[grpc-stub-1.59.0.jar:1.59.0]
	at org.hyperledger.fabric.protos.gateway.GatewayGrpc$GatewayBlockingStub.endorse(GatewayGrpc.java:455) ~[fabric-protos-0.2.1.jar:na]
	at org.hyperledger.fabric.client.GatewayClient.endorse(GatewayClient.java:71) ~[fabric-gateway-1.4.0.jar:na]
	... 111 common frames omitted

2025-11-30 10:40:05.517 DEBUG 1213404 --- [mcat-handler-33] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:40:05.518 DEBUG 1213404 --- [mcat-handler-33] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:40:05.518 DEBUG 1213404 --- [mcat-handler-33] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:40:05.519  INFO 1213404 --- [mcat-handler-33] e.t.v.controller.ElectionController      : Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:40:05.519 DEBUG 1213404 --- [mcat-handler-33] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:40:05.520 DEBUG 1213404 --- [mcat-handler-33] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:40:05.520  INFO 1213404 --- [mcat-handler-33] e.t.v.controller.ElectionController      : Returning 2 active elections
2025-11-30 10:40:08.342 DEBUG 1213404 --- [mcat-handler-34] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:40:08.344 DEBUG 1213404 --- [mcat-handler-34] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:40:08.344 DEBUG 1213404 --- [mcat-handler-34] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:40:08.346  INFO 1213404 --- [mcat-handler-34] e.t.v.controller.ElectionController      : Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:40:08.347 DEBUG 1213404 --- [mcat-handler-34] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:40:08.349 DEBUG 1213404 --- [mcat-handler-34] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:40:08.349  INFO 1213404 --- [mcat-handler-34] e.t.v.controller.ElectionController      : Returning 2 active elections
2025-11-30 10:40:13.991 DEBUG 1213404 --- [mcat-handler-35] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:40:13.993 DEBUG 1213404 --- [mcat-handler-35] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:40:13.993 DEBUG 1213404 --- [mcat-handler-35] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:40:13.994  INFO 1213404 --- [mcat-handler-35] e.t.v.controller.ElectionController      : Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:40:13.994 DEBUG 1213404 --- [mcat-handler-35] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:40:13.995 DEBUG 1213404 --- [mcat-handler-35] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:40:13.996  INFO 1213404 --- [mcat-handler-35] e.t.v.controller.ElectionController      : Returning 2 active elections
2025-11-30 10:40:15.347 DEBUG 1213404 --- [mcat-handler-36] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:40:15.350 DEBUG 1213404 --- [mcat-handler-36] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:40:15.351 DEBUG 1213404 --- [mcat-handler-36] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:40:15.354  INFO 1213404 --- [mcat-handler-36] e.t.v.controller.ElectionController      : Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 10:40:15.355 DEBUG 1213404 --- [mcat-handler-36] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:40:15.356 DEBUG 1213404 --- [mcat-handler-36] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:40:15.356  INFO 1213404 --- [mcat-handler-36] e.t.v.controller.ElectionController      : Returning 2 active elections
2025-11-30 10:40:19.118 DEBUG 1213404 --- [mcat-handler-37] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 10:40:19.119 DEBUG 1213404 --- [mcat-handler-37] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: juan.perez
2025-11-30 10:40:19.119 DEBUG 1213404 --- [mcat-handler-37] e.t.v.config.JwtAuthenticationFilter     : User 'juan.perez' authenticated successfully with role 'Votante (voter)'
2025-11-30 10:40:19.121  INFO 1213404 --- [mcat-handler-37] e.t.votacion.controller.AuthController   : User logged out: juan.perez from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:26:58.178  INFO 1213404 --- [mcat-handler-40] e.t.votacion.controller.AuthController   : Login attempt for user: maria.gonzalez from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:26:58.179 DEBUG 1213404 --- [mcat-handler-40] es.tfg.votacion.service.AuthService      : Attempting to authenticate user: maria.gonzalez
2025-11-30 12:26:58.279  INFO 1213404 --- [mcat-handler-40] es.tfg.votacion.service.AuthService      : User authenticated successfully: maria.gonzalez (role: Votante (voter))
2025-11-30 12:26:58.279 DEBUG 1213404 --- [mcat-handler-40] es.tfg.votacion.service.AuthService      : Generating JWT token for user: maria.gonzalez
2025-11-30 12:26:58.281  INFO 1213404 --- [mcat-handler-40] es.tfg.votacion.service.AuthService      : JWT token generated for user: maria.gonzalez (expires: Sun Nov 30 13:26:58 CET 2025)
2025-11-30 12:26:58.281  INFO 1213404 --- [mcat-handler-40] e.t.votacion.controller.AuthController   : User authenticated successfully: maria.gonzalez (role: Votante)
2025-11-30 12:26:58.340 DEBUG 1213404 --- [mcat-handler-42] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 12:26:58.341 DEBUG 1213404 --- [mcat-handler-42] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:26:58.341 DEBUG 1213404 --- [mcat-handler-42] e.t.v.config.JwtAuthenticationFilter     : User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:26:58.342  INFO 1213404 --- [mcat-handler-42] e.t.v.controller.ElectionController      : Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:26:58.342 DEBUG 1213404 --- [mcat-handler-42] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 12:26:58.351 DEBUG 1213404 --- [mcat-handler-42] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:26:58.351  INFO 1213404 --- [mcat-handler-42] e.t.v.controller.ElectionController      : Returning 2 active elections
2025-11-30 12:27:02.887 DEBUG 1213404 --- [mcat-handler-44] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 12:27:02.890 DEBUG 1213404 --- [mcat-handler-44] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:27:02.890 DEBUG 1213404 --- [mcat-handler-44] e.t.v.config.JwtAuthenticationFilter     : User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:27:02.891  INFO 1213404 --- [mcat-handler-44] e.t.v.controller.ElectionController      : Fetching election: election-f9e4da2a
2025-11-30 12:27:02.892 DEBUG 1213404 --- [mcat-handler-44] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 12:27:02.892 DEBUG 1213404 --- [mcat-handler-44] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:27:17.101 DEBUG 1213404 --- [mcat-handler-45] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 12:27:17.104 DEBUG 1213404 --- [mcat-handler-45] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:27:17.104 DEBUG 1213404 --- [mcat-handler-45] e.t.v.config.JwtAuthenticationFilter     : User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:27:17.105  INFO 1213404 --- [mcat-handler-45] e.t.v.controller.ElectionController      : Fetching election: election-f9e4da2a
2025-11-30 12:27:17.106 DEBUG 1213404 --- [mcat-handler-45] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 12:27:17.107 DEBUG 1213404 --- [mcat-handler-45] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:27:23.387 DEBUG 1213404 --- [mcat-handler-47] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 12:27:23.388 DEBUG 1213404 --- [mcat-handler-47] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: maria.gonzalez
2025-11-30 12:27:23.388 DEBUG 1213404 --- [mcat-handler-47] e.t.v.config.JwtAuthenticationFilter     : User 'maria.gonzalez' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:27:23.389  INFO 1213404 --- [mcat-handler-47] e.t.votacion.controller.AuthController   : User logged out: maria.gonzalez from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:27:38.785  INFO 1213404 --- [mcat-handler-48] e.t.votacion.controller.AuthController   : Login attempt for user: carlos.martin from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:27:38.785 DEBUG 1213404 --- [mcat-handler-48] es.tfg.votacion.service.AuthService      : Attempting to authenticate user: carlos.martin
2025-11-30 12:27:38.895  INFO 1213404 --- [mcat-handler-48] es.tfg.votacion.service.AuthService      : User authenticated successfully: carlos.martin (role: Votante (voter))
2025-11-30 12:27:38.895 DEBUG 1213404 --- [mcat-handler-48] es.tfg.votacion.service.AuthService      : Generating JWT token for user: carlos.martin
2025-11-30 12:27:38.896  INFO 1213404 --- [mcat-handler-48] es.tfg.votacion.service.AuthService      : JWT token generated for user: carlos.martin (expires: Sun Nov 30 13:27:38 CET 2025)
2025-11-30 12:27:38.896  INFO 1213404 --- [mcat-handler-48] e.t.votacion.controller.AuthController   : User authenticated successfully: carlos.martin (role: Votante)
2025-11-30 12:27:38.940 DEBUG 1213404 --- [mcat-handler-49] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 12:27:38.941 DEBUG 1213404 --- [mcat-handler-49] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: carlos.martin
2025-11-30 12:27:38.942 DEBUG 1213404 --- [mcat-handler-49] e.t.v.config.JwtAuthenticationFilter     : User 'carlos.martin' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:27:38.943  INFO 1213404 --- [mcat-handler-49] e.t.v.controller.ElectionController      : Fetching active elections from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:27:38.943 DEBUG 1213404 --- [mcat-handler-49] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 12:27:38.944 DEBUG 1213404 --- [mcat-handler-49] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: carlos.martin
2025-11-30 12:27:38.944  INFO 1213404 --- [mcat-handler-49] e.t.v.controller.ElectionController      : Returning 2 active elections
2025-11-30 12:27:43.149 DEBUG 1213404 --- [mcat-handler-50] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 12:27:43.150 DEBUG 1213404 --- [mcat-handler-50] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: carlos.martin
2025-11-30 12:27:43.150 DEBUG 1213404 --- [mcat-handler-50] e.t.v.config.JwtAuthenticationFilter     : User 'carlos.martin' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:27:43.152  INFO 1213404 --- [mcat-handler-50] e.t.v.controller.ElectionController      : Fetching election: election-f9e4da2a
2025-11-30 12:27:43.153 DEBUG 1213404 --- [mcat-handler-50] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 12:27:43.154 DEBUG 1213404 --- [mcat-handler-50] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: carlos.martin
2025-11-30 12:30:04.405 DEBUG 1213404 --- [mcat-handler-52] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 12:30:04.407 DEBUG 1213404 --- [mcat-handler-52] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: carlos.martin
2025-11-30 12:30:04.407 DEBUG 1213404 --- [mcat-handler-52] e.t.v.config.JwtAuthenticationFilter     : User 'carlos.martin' authenticated successfully with role 'Votante (voter)'
2025-11-30 12:30:04.408  INFO 1213404 --- [mcat-handler-52] e.t.votacion.controller.AuthController   : User logged out: carlos.martin from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:30:23.307  INFO 1213404 --- [mcat-handler-53] e.t.votacion.controller.AuthController   : Login attempt for user: pedro.lopez from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:30:23.307 DEBUG 1213404 --- [mcat-handler-53] es.tfg.votacion.service.AuthService      : Attempting to authenticate user: pedro.lopez
2025-11-30 12:30:23.409  INFO 1213404 --- [mcat-handler-53] es.tfg.votacion.service.AuthService      : User authenticated successfully: pedro.lopez (role: Administrador (admin))
2025-11-30 12:30:23.410 DEBUG 1213404 --- [mcat-handler-53] es.tfg.votacion.service.AuthService      : Generating JWT token for user: pedro.lopez
2025-11-30 12:30:23.410  INFO 1213404 --- [mcat-handler-53] es.tfg.votacion.service.AuthService      : JWT token generated for user: pedro.lopez (expires: Sun Nov 30 13:30:23 CET 2025)
2025-11-30 12:30:23.410  INFO 1213404 --- [mcat-handler-53] e.t.votacion.controller.AuthController   : User authenticated successfully: pedro.lopez (role: Administrador)
2025-11-30 12:30:31.183 DEBUG 1213404 --- [mcat-handler-54] es.tfg.votacion.service.AuthService      : Validating JWT token
2025-11-30 12:30:31.185 DEBUG 1213404 --- [mcat-handler-54] es.tfg.votacion.service.AuthService      : JWT token validated successfully for user: pedro.lopez
2025-11-30 12:30:31.185 DEBUG 1213404 --- [mcat-handler-54] e.t.v.config.JwtAuthenticationFilter     : User 'pedro.lopez' authenticated successfully with role 'Administrador (admin)'
2025-11-30 12:30:31.187  INFO 1213404 --- [mcat-handler-54] e.t.votacion.controller.AuthController   : User logged out: pedro.lopez from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:30:41.294  INFO 1213404 --- [mcat-handler-55] e.t.votacion.controller.AuthController   : Login attempt for user: lucia.garcia from IP: 0:0:0:0:0:0:0:1
2025-11-30 12:30:41.294 DEBUG 1213404 --- [mcat-handler-55] es.tfg.votacion.service.AuthService      : Attempting to authenticate user: lucia.garcia
2025-11-30 12:30:41.420  WARN 1213404 --- [mcat-handler-55] es.tfg.votacion.service.AuthService      : Authentication failed: user is inactive: lucia.garcia
2025-11-30 12:30:41.421  WARN 1213404 --- [mcat-handler-55] e.t.votacion.controller.AuthController   : Authentication failed for user: lucia.garcia
2025-11-30 12:31:13.798  INFO 1213404 --- [ionShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-11-30 12:31:13.807  INFO 1213404 --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-11-30 12:31:13.813  INFO 1213404 --- [ionShutdownHook] es.tfg.votacion.service.FabricService    : Closing Fabric Gateway connection
2025-11-30 12:31:13.818  INFO 1213404 --- [ionShutdownHook] es.tfg.votacion.service.StorageService   : Shutting down Storage Service
2025-11-30 12:31:13.819 DEBUG 1213404 --- [ionShutdownHook] es.tfg.votacion.service.StorageService   : Master key cleared from memory
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  02:21 h
[INFO] Finished at: 2025-11-30T12:31:14+01:00
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:3.5.7:run (default-cli) on project votacion: Process terminated with exit code: 143 -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException
